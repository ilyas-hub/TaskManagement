(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function t1(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var bu={exports:{}},Ts={},ku={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function n1(){if($p)return _e;$p=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function C(M,U,de){this.props=M,this.context=U,this.refs=S,this.updater=de||w}C.prototype.isReactComponent={},C.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},C.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function b(){}b.prototype=C.prototype;function k(M,U,de){this.props=M,this.context=U,this.refs=S,this.updater=de||w}var R=k.prototype=new b;R.constructor=k,x(R,C.prototype),R.isPureReactComponent=!0;var N=Array.isArray,z=Object.prototype.hasOwnProperty,G={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function W(M,U,de){var he,xe={},me=null,be=null;if(U!=null)for(he in U.ref!==void 0&&(be=U.ref),U.key!==void 0&&(me=""+U.key),U)z.call(U,he)&&!X.hasOwnProperty(he)&&(xe[he]=U[he]);var Oe=arguments.length-2;if(Oe===1)xe.children=de;else if(1<Oe){for(var Le=Array(Oe),Ye=0;Ye<Oe;Ye++)Le[Ye]=arguments[Ye+2];xe.children=Le}if(M&&M.defaultProps)for(he in Oe=M.defaultProps,Oe)xe[he]===void 0&&(xe[he]=Oe[he]);return{$$typeof:o,type:M,key:me,ref:be,props:xe,_owner:G.current}}function te(M,U){return{$$typeof:o,type:M.type,key:U,ref:M.ref,props:M.props,_owner:M._owner}}function oe(M){return typeof M=="object"&&M!==null&&M.$$typeof===o}function pe(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(de){return U[de]})}var ge=/\/+/g;function ce(M,U){return typeof M=="object"&&M!==null&&M.key!=null?pe(""+M.key):U.toString(36)}function we(M,U,de,he,xe){var me=typeof M;(me==="undefined"||me==="boolean")&&(M=null);var be=!1;if(M===null)be=!0;else switch(me){case"string":case"number":be=!0;break;case"object":switch(M.$$typeof){case o:case e:be=!0}}if(be)return be=M,xe=xe(be),M=he===""?"."+ce(be,0):he,N(xe)?(de="",M!=null&&(de=M.replace(ge,"$&/")+"/"),we(xe,U,de,"",function(Ye){return Ye})):xe!=null&&(oe(xe)&&(xe=te(xe,de+(!xe.key||be&&be.key===xe.key?"":(""+xe.key).replace(ge,"$&/")+"/")+M)),U.push(xe)),1;if(be=0,he=he===""?".":he+":",N(M))for(var Oe=0;Oe<M.length;Oe++){me=M[Oe];var Le=he+ce(me,Oe);be+=we(me,U,de,Le,xe)}else if(Le=v(M),typeof Le=="function")for(M=Le.call(M),Oe=0;!(me=M.next()).done;)me=me.value,Le=he+ce(me,Oe++),be+=we(me,U,de,Le,xe);else if(me==="object")throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return be}function je(M,U,de){if(M==null)return M;var he=[],xe=0;return we(M,he,"","",function(me){return U.call(de,me,xe++)}),he}function Te(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(de){(M._status===0||M._status===-1)&&(M._status=1,M._result=de)},function(de){(M._status===0||M._status===-1)&&(M._status=2,M._result=de)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var ve={current:null},Y={transition:null},ie={ReactCurrentDispatcher:ve,ReactCurrentBatchConfig:Y,ReactCurrentOwner:G};function Q(){throw Error("act(...) is not supported in production builds of React.")}return _e.Children={map:je,forEach:function(M,U,de){je(M,function(){U.apply(this,arguments)},de)},count:function(M){var U=0;return je(M,function(){U++}),U},toArray:function(M){return je(M,function(U){return U})||[]},only:function(M){if(!oe(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},_e.Component=C,_e.Fragment=t,_e.Profiler=s,_e.PureComponent=k,_e.StrictMode=n,_e.Suspense=d,_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,_e.act=Q,_e.cloneElement=function(M,U,de){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var he=x({},M.props),xe=M.key,me=M.ref,be=M._owner;if(U!=null){if(U.ref!==void 0&&(me=U.ref,be=G.current),U.key!==void 0&&(xe=""+U.key),M.type&&M.type.defaultProps)var Oe=M.type.defaultProps;for(Le in U)z.call(U,Le)&&!X.hasOwnProperty(Le)&&(he[Le]=U[Le]===void 0&&Oe!==void 0?Oe[Le]:U[Le])}var Le=arguments.length-2;if(Le===1)he.children=de;else if(1<Le){Oe=Array(Le);for(var Ye=0;Ye<Le;Ye++)Oe[Ye]=arguments[Ye+2];he.children=Oe}return{$$typeof:o,type:M.type,key:xe,ref:me,props:he,_owner:be}},_e.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},_e.createElement=W,_e.createFactory=function(M){var U=W.bind(null,M);return U.type=M,U},_e.createRef=function(){return{current:null}},_e.forwardRef=function(M){return{$$typeof:u,render:M}},_e.isValidElement=oe,_e.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:Te}},_e.memo=function(M,U){return{$$typeof:f,type:M,compare:U===void 0?null:U}},_e.startTransition=function(M){var U=Y.transition;Y.transition={};try{M()}finally{Y.transition=U}},_e.unstable_act=Q,_e.useCallback=function(M,U){return ve.current.useCallback(M,U)},_e.useContext=function(M){return ve.current.useContext(M)},_e.useDebugValue=function(){},_e.useDeferredValue=function(M){return ve.current.useDeferredValue(M)},_e.useEffect=function(M,U){return ve.current.useEffect(M,U)},_e.useId=function(){return ve.current.useId()},_e.useImperativeHandle=function(M,U,de){return ve.current.useImperativeHandle(M,U,de)},_e.useInsertionEffect=function(M,U){return ve.current.useInsertionEffect(M,U)},_e.useLayoutEffect=function(M,U){return ve.current.useLayoutEffect(M,U)},_e.useMemo=function(M,U){return ve.current.useMemo(M,U)},_e.useReducer=function(M,U,de){return ve.current.useReducer(M,U,de)},_e.useRef=function(M){return ve.current.useRef(M)},_e.useState=function(M){return ve.current.useState(M)},_e.useSyncExternalStore=function(M,U,de){return ve.current.useSyncExternalStore(M,U,de)},_e.useTransition=function(){return ve.current.useTransition()},_e.version="18.3.1",_e}var Gp;function Sh(){return Gp||(Gp=1,ku.exports=n1()),ku.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp;function r1(){if(qp)return Ts;qp=1;var o=Sh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,f){var g,y={},v=null,w=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(w=d.ref);for(g in d)n.call(d,g)&&!a.hasOwnProperty(g)&&(y[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:u,key:v,ref:w,props:y,_owner:s.current}}return Ts.Fragment=t,Ts.jsx=c,Ts.jsxs=c,Ts}var Kp;function i1(){return Kp||(Kp=1,bu.exports=r1()),bu.exports}var K=i1(),I=Sh();const Ee=t1(I);var ua={},Eu={exports:{}},Et={},Ou={exports:{}},Du={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp;function s1(){return Qp||(Qp=1,function(o){function e(Y,ie){var Q=Y.length;Y.push(ie);e:for(;0<Q;){var M=Q-1>>>1,U=Y[M];if(0<s(U,ie))Y[M]=ie,Y[Q]=U,Q=M;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ie=Y[0],Q=Y.pop();if(Q!==ie){Y[0]=Q;e:for(var M=0,U=Y.length,de=U>>>1;M<de;){var he=2*(M+1)-1,xe=Y[he],me=he+1,be=Y[me];if(0>s(xe,Q))me<U&&0>s(be,xe)?(Y[M]=be,Y[me]=Q,M=me):(Y[M]=xe,Y[he]=Q,M=he);else if(me<U&&0>s(be,Q))Y[M]=be,Y[me]=Q,M=me;else break e}}return ie}function s(Y,ie){var Q=Y.sortIndex-ie.sortIndex;return Q!==0?Q:Y.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;o.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();o.unstable_now=function(){return c.now()-u}}var d=[],f=[],g=1,y=null,v=3,w=!1,x=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Y){for(var ie=t(f);ie!==null;){if(ie.callback===null)n(f);else if(ie.startTime<=Y)n(f),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=t(f)}}function N(Y){if(S=!1,R(Y),!x)if(t(d)!==null)x=!0,Te(z);else{var ie=t(f);ie!==null&&ve(N,ie.startTime-Y)}}function z(Y,ie){x=!1,S&&(S=!1,b(W),W=-1),w=!0;var Q=v;try{for(R(ie),y=t(d);y!==null&&(!(y.expirationTime>ie)||Y&&!pe());){var M=y.callback;if(typeof M=="function"){y.callback=null,v=y.priorityLevel;var U=M(y.expirationTime<=ie);ie=o.unstable_now(),typeof U=="function"?y.callback=U:y===t(d)&&n(d),R(ie)}else n(d);y=t(d)}if(y!==null)var de=!0;else{var he=t(f);he!==null&&ve(N,he.startTime-ie),de=!1}return de}finally{y=null,v=Q,w=!1}}var G=!1,X=null,W=-1,te=5,oe=-1;function pe(){return!(o.unstable_now()-oe<te)}function ge(){if(X!==null){var Y=o.unstable_now();oe=Y;var ie=!0;try{ie=X(!0,Y)}finally{ie?ce():(G=!1,X=null)}}else G=!1}var ce;if(typeof k=="function")ce=function(){k(ge)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,je=we.port2;we.port1.onmessage=ge,ce=function(){je.postMessage(null)}}else ce=function(){C(ge,0)};function Te(Y){X=Y,G||(G=!0,ce())}function ve(Y,ie){W=C(function(){Y(o.unstable_now())},ie)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Y){Y.callback=null},o.unstable_continueExecution=function(){x||w||(x=!0,Te(z))},o.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<Y?Math.floor(1e3/Y):5},o.unstable_getCurrentPriorityLevel=function(){return v},o.unstable_getFirstCallbackNode=function(){return t(d)},o.unstable_next=function(Y){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var Q=v;v=ie;try{return Y()}finally{v=Q}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Q=v;v=Y;try{return ie()}finally{v=Q}},o.unstable_scheduleCallback=function(Y,ie,Q){var M=o.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?M+Q:M):Q=M,Y){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Q+U,Y={id:g++,callback:ie,priorityLevel:Y,startTime:Q,expirationTime:U,sortIndex:-1},Q>M?(Y.sortIndex=Q,e(f,Y),t(d)===null&&Y===t(f)&&(S?(b(W),W=-1):S=!0,ve(N,Q-M))):(Y.sortIndex=U,e(d,Y),x||w||(x=!0,Te(z))),Y},o.unstable_shouldYield=pe,o.unstable_wrapCallback=function(Y){var ie=v;return function(){var Q=v;v=ie;try{return Y.apply(this,arguments)}finally{v=Q}}}}(Du)),Du}var Jp;function o1(){return Jp||(Jp=1,Ou.exports=s1()),Ou.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp;function a1(){if(Zp)return Et;Zp=1;var o=Sh(),e=o1();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(s[r]=i,r=0;r<i.length;r++)n.add(i[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(r){return d.call(y,r)?!0:d.call(g,r)?!1:f.test(r)?y[r]=!0:(g[r]=!0,!1)}function w(r,i,l,h){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,i,l,h){if(i===null||typeof i>"u"||w(r,i,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function S(r,i,l,h,p,m,_){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=m,this.removeEmptyString=_}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){C[r]=new S(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];C[i]=new S(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){C[r]=new S(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){C[r]=new S(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){C[r]=new S(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){C[r]=new S(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){C[r]=new S(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){C[r]=new S(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){C[r]=new S(r,5,!1,r.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function k(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(b,k);C[i]=new S(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(b,k);C[i]=new S(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(b,k);C[i]=new S(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){C[r]=new S(r,1,!1,r.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){C[r]=new S(r,1,!1,r.toLowerCase(),null,!0,!0)});function R(r,i,l,h){var p=C.hasOwnProperty(i)?C[i]:null;(p!==null?p.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(x(i,l,p,h)&&(l=null),h||p===null?v(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):p.mustUseProperty?r[p.propertyName]=l===null?p.type===3?!1:"":l:(i=p.attributeName,h=p.attributeNamespace,l===null?r.removeAttribute(i):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?r.setAttributeNS(h,i,l):r.setAttribute(i,l))))}var N=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),G=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),pe=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),ve=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ie(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var Q=Object.assign,M;function U(r){if(M===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||""}return`
`+M+r}var de=!1;function he(r,i){if(!r||de)return"";de=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(A){var h=A}Reflect.construct(r,[],i)}else{try{i.call()}catch(A){h=A}r.call(i.prototype)}else{try{throw Error()}catch(A){h=A}r()}}catch(A){if(A&&h&&typeof A.stack=="string"){for(var p=A.stack.split(`
`),m=h.stack.split(`
`),_=p.length-1,T=m.length-1;1<=_&&0<=T&&p[_]!==m[T];)T--;for(;1<=_&&0<=T;_--,T--)if(p[_]!==m[T]){if(_!==1||T!==1)do if(_--,T--,0>T||p[_]!==m[T]){var E=`
`+p[_].replace(" at new "," at ");return r.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",r.displayName)),E}while(1<=_&&0<=T);break}}}finally{de=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?U(r):""}function xe(r){switch(r.tag){case 5:return U(r.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return r=he(r.type,!1),r;case 11:return r=he(r.type.render,!1),r;case 1:return r=he(r.type,!0),r;default:return""}}function me(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case X:return"Fragment";case G:return"Portal";case te:return"Profiler";case W:return"StrictMode";case ce:return"Suspense";case we:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case pe:return(r.displayName||"Context")+".Consumer";case oe:return(r._context.displayName||"Context")+".Provider";case ge:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case je:return i=r.displayName||null,i!==null?i:me(r.type)||"Memo";case Te:i=r._payload,r=r._init;try{return me(r(i))}catch{}}return null}function be(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(i);case 8:return i===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Oe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Le(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ye(r){var i=Le(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,m=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return p.call(this)},set:function(_){h=""+_,m.call(this,_)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Zs(r){r._valueTracker||(r._valueTracker=Ye(r))}function Jh(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),h="";return r&&(h=Le(r)?r.checked?"true":"false":r.value),r=h,r!==l?(i.setValue(r),!0):!1}function eo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Rl(r,i){var l=i.checked;return Q({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Zh(r,i){var l=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;l=Oe(i.value!=null?i.value:l),r._wrapperState={initialChecked:h,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ed(r,i){i=i.checked,i!=null&&R(r,"checked",i,!1)}function Ll(r,i){ed(r,i);var l=Oe(i.value),h=i.type;if(l!=null)h==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?jl(r,i.type,l):i.hasOwnProperty("defaultValue")&&jl(r,i.type,Oe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function td(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function jl(r,i,l){(i!=="number"||eo(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Bi=Array.isArray;function Gr(r,i,l,h){if(r=r.options,i){i={};for(var p=0;p<l.length;p++)i["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=i.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&h&&(r[l].defaultSelected=!0)}else{for(l=""+Oe(l),i=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,h&&(r[p].defaultSelected=!0);return}i!==null||r[p].disabled||(i=r[p])}i!==null&&(i.selected=!0)}}function Al(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function nd(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(Bi(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:Oe(l)}}function rd(r,i){var l=Oe(i.value),h=Oe(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),h!=null&&(r.defaultValue=""+h)}function id(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function sd(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fl(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?sd(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var to,od=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,h,p){MSApp.execUnsafeLocalFunction(function(){return r(i,l,h,p)})}:r}(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(to=to||document.createElement("div"),to.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=to.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function zi(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oy=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(r){oy.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Wi[i]=Wi[r]})});function ad(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Wi.hasOwnProperty(r)&&Wi[r]?(""+i).trim():i+"px"}function ld(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=ad(l,i[l],h);l==="float"&&(l="cssFloat"),h?r.setProperty(l,p):r[l]=p}}var ay=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Il(r,i){if(i){if(ay[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Nl(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bl=null;function zl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Wl=null,qr=null,Kr=null;function cd(r){if(r=cs(r)){if(typeof Wl!="function")throw Error(t(280));var i=r.stateNode;i&&(i=bo(i),Wl(r.stateNode,r.type,i))}}function ud(r){qr?Kr?Kr.push(r):Kr=[r]:qr=r}function hd(){if(qr){var r=qr,i=Kr;if(Kr=qr=null,cd(r),i)for(r=0;r<i.length;r++)cd(i[r])}}function dd(r,i){return r(i)}function fd(){}var Ul=!1;function pd(r,i,l){if(Ul)return r(i,l);Ul=!0;try{return dd(r,i,l)}finally{Ul=!1,(qr!==null||Kr!==null)&&(fd(),hd())}}function Ui(r,i){var l=r.stateNode;if(l===null)return null;var h=bo(l);if(h===null)return null;l=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Vl=!1;if(u)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{Vl=!1}function ly(r,i,l,h,p,m,_,T,E){var A=Array.prototype.slice.call(arguments,3);try{i.apply(l,A)}catch(H){this.onError(H)}}var Hi=!1,no=null,ro=!1,Hl=null,cy={onError:function(r){Hi=!0,no=r}};function uy(r,i,l,h,p,m,_,T,E){Hi=!1,no=null,ly.apply(cy,arguments)}function hy(r,i,l,h,p,m,_,T,E){if(uy.apply(this,arguments),Hi){if(Hi){var A=no;Hi=!1,no=null}else throw Error(t(198));ro||(ro=!0,Hl=A)}}function _r(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,i.flags&4098&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function gd(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function md(r){if(_r(r)!==r)throw Error(t(188))}function dy(r){var i=r.alternate;if(!i){if(i=_r(r),i===null)throw Error(t(188));return i!==r?null:r}for(var l=r,h=i;;){var p=l.return;if(p===null)break;var m=p.alternate;if(m===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===l)return md(p),r;if(m===h)return md(p),i;m=m.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=m;else{for(var _=!1,T=p.child;T;){if(T===l){_=!0,l=p,h=m;break}if(T===h){_=!0,h=p,l=m;break}T=T.sibling}if(!_){for(T=m.child;T;){if(T===l){_=!0,l=m,h=p;break}if(T===h){_=!0,h=m,l=p;break}T=T.sibling}if(!_)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:i}function yd(r){return r=dy(r),r!==null?vd(r):null}function vd(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=vd(r);if(i!==null)return i;r=r.sibling}return null}var _d=e.unstable_scheduleCallback,xd=e.unstable_cancelCallback,fy=e.unstable_shouldYield,py=e.unstable_requestPaint,Ge=e.unstable_now,gy=e.unstable_getCurrentPriorityLevel,Xl=e.unstable_ImmediatePriority,wd=e.unstable_UserBlockingPriority,io=e.unstable_NormalPriority,my=e.unstable_LowPriority,Sd=e.unstable_IdlePriority,so=null,fn=null;function yy(r){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(so,r,void 0,(r.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:xy,vy=Math.log,_y=Math.LN2;function xy(r){return r>>>=0,r===0?32:31-(vy(r)/_y|0)|0}var oo=64,ao=4194304;function Xi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function lo(r,i){var l=r.pendingLanes;if(l===0)return 0;var h=0,p=r.suspendedLanes,m=r.pingedLanes,_=l&268435455;if(_!==0){var T=_&~p;T!==0?h=Xi(T):(m&=_,m!==0&&(h=Xi(m)))}else _=l&~p,_!==0?h=Xi(_):m!==0&&(h=Xi(m));if(h===0)return 0;if(i!==0&&i!==h&&!(i&p)&&(p=h&-h,m=i&-i,p>=m||p===16&&(m&4194240)!==0))return i;if(h&4&&(h|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)l=31-Qt(i),p=1<<l,h|=r[l],i&=~p;return h}function wy(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sy(r,i){for(var l=r.suspendedLanes,h=r.pingedLanes,p=r.expirationTimes,m=r.pendingLanes;0<m;){var _=31-Qt(m),T=1<<_,E=p[_];E===-1?(!(T&l)||T&h)&&(p[_]=wy(T,i)):E<=i&&(r.expiredLanes|=T),m&=~T}}function Yl(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Cd(){var r=oo;return oo<<=1,!(oo&4194240)&&(oo=64),r}function $l(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Yi(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Qt(i),r[i]=l}function Cy(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<l;){var p=31-Qt(l),m=1<<p;i[p]=0,h[p]=-1,r[p]=-1,l&=~m}}function Gl(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var h=31-Qt(l),p=1<<h;p&i|r[h]&i&&(r[h]|=i),l&=~p}}var Me=0;function Td(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var bd,ql,kd,Ed,Od,Kl=!1,co=[],$n=null,Gn=null,qn=null,$i=new Map,Gi=new Map,Kn=[],Ty="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dd(r,i){switch(r){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":$i.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gi.delete(i.pointerId)}}function qi(r,i,l,h,p,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:l,eventSystemFlags:h,nativeEvent:m,targetContainers:[p]},i!==null&&(i=cs(i),i!==null&&ql(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),r)}function by(r,i,l,h,p){switch(i){case"focusin":return $n=qi($n,r,i,l,h,p),!0;case"dragenter":return Gn=qi(Gn,r,i,l,h,p),!0;case"mouseover":return qn=qi(qn,r,i,l,h,p),!0;case"pointerover":var m=p.pointerId;return $i.set(m,qi($i.get(m)||null,r,i,l,h,p)),!0;case"gotpointercapture":return m=p.pointerId,Gi.set(m,qi(Gi.get(m)||null,r,i,l,h,p)),!0}return!1}function Pd(r){var i=xr(r.target);if(i!==null){var l=_r(i);if(l!==null){if(i=l.tag,i===13){if(i=gd(l),i!==null){r.blockedOn=i,Od(r.priority,function(){kd(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function uo(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=Jl(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var h=new l.constructor(l.type,l);Bl=h,l.target.dispatchEvent(h),Bl=null}else return i=cs(l),i!==null&&ql(i),r.blockedOn=l,!1;i.shift()}return!0}function Md(r,i,l){uo(r)&&l.delete(i)}function ky(){Kl=!1,$n!==null&&uo($n)&&($n=null),Gn!==null&&uo(Gn)&&(Gn=null),qn!==null&&uo(qn)&&(qn=null),$i.forEach(Md),Gi.forEach(Md)}function Ki(r,i){r.blockedOn===i&&(r.blockedOn=null,Kl||(Kl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ky)))}function Qi(r){function i(p){return Ki(p,r)}if(0<co.length){Ki(co[0],r);for(var l=1;l<co.length;l++){var h=co[l];h.blockedOn===r&&(h.blockedOn=null)}}for($n!==null&&Ki($n,r),Gn!==null&&Ki(Gn,r),qn!==null&&Ki(qn,r),$i.forEach(i),Gi.forEach(i),l=0;l<Kn.length;l++)h=Kn[l],h.blockedOn===r&&(h.blockedOn=null);for(;0<Kn.length&&(l=Kn[0],l.blockedOn===null);)Pd(l),l.blockedOn===null&&Kn.shift()}var Qr=N.ReactCurrentBatchConfig,ho=!0;function Ey(r,i,l,h){var p=Me,m=Qr.transition;Qr.transition=null;try{Me=1,Ql(r,i,l,h)}finally{Me=p,Qr.transition=m}}function Oy(r,i,l,h){var p=Me,m=Qr.transition;Qr.transition=null;try{Me=4,Ql(r,i,l,h)}finally{Me=p,Qr.transition=m}}function Ql(r,i,l,h){if(ho){var p=Jl(r,i,l,h);if(p===null)gc(r,i,h,fo,l),Dd(r,h);else if(by(p,r,i,l,h))h.stopPropagation();else if(Dd(r,h),i&4&&-1<Ty.indexOf(r)){for(;p!==null;){var m=cs(p);if(m!==null&&bd(m),m=Jl(r,i,l,h),m===null&&gc(r,i,h,fo,l),m===p)break;p=m}p!==null&&h.stopPropagation()}else gc(r,i,h,null,l)}}var fo=null;function Jl(r,i,l,h){if(fo=null,r=zl(h),r=xr(r),r!==null)if(i=_r(r),i===null)r=null;else if(l=i.tag,l===13){if(r=gd(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return fo=r,null}function Rd(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gy()){case Xl:return 1;case wd:return 4;case io:case my:return 16;case Sd:return 536870912;default:return 16}default:return 16}}var Qn=null,Zl=null,po=null;function Ld(){if(po)return po;var r,i=Zl,l=i.length,h,p="value"in Qn?Qn.value:Qn.textContent,m=p.length;for(r=0;r<l&&i[r]===p[r];r++);var _=l-r;for(h=1;h<=_&&i[l-h]===p[m-h];h++);return po=p.slice(r,1<h?1-h:void 0)}function go(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function mo(){return!0}function jd(){return!1}function jt(r){function i(l,h,p,m,_){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var T in r)r.hasOwnProperty(T)&&(l=r[T],this[T]=l?l(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?mo:jd,this.isPropagationStopped=jd,this}return Q(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=mo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=mo)},persist:function(){},isPersistent:mo}),i}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ec=jt(Jr),Ji=Q({},Jr,{view:0,detail:0}),Dy=jt(Ji),tc,nc,Zi,yo=Q({},Ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Zi&&(Zi&&r.type==="mousemove"?(tc=r.screenX-Zi.screenX,nc=r.screenY-Zi.screenY):nc=tc=0,Zi=r),tc)},movementY:function(r){return"movementY"in r?r.movementY:nc}}),Ad=jt(yo),Py=Q({},yo,{dataTransfer:0}),My=jt(Py),Ry=Q({},Ji,{relatedTarget:0}),rc=jt(Ry),Ly=Q({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),jy=jt(Ly),Ay=Q({},Jr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Fy=jt(Ay),Iy=Q({},Jr,{data:0}),Fd=jt(Iy),Ny={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},By={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wy(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=zy[r])?!!i[r]:!1}function ic(){return Wy}var Uy=Q({},Ji,{key:function(r){if(r.key){var i=Ny[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=go(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?By[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(r){return r.type==="keypress"?go(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?go(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Vy=jt(Uy),Hy=Q({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Id=jt(Hy),Xy=Q({},Ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),Yy=jt(Xy),$y=Q({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gy=jt($y),qy=Q({},yo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ky=jt(qy),Qy=[9,13,27,32],sc=u&&"CompositionEvent"in window,es=null;u&&"documentMode"in document&&(es=document.documentMode);var Jy=u&&"TextEvent"in window&&!es,Nd=u&&(!sc||es&&8<es&&11>=es),Bd=" ",zd=!1;function Wd(r,i){switch(r){case"keyup":return Qy.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ud(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zr=!1;function Zy(r,i){switch(r){case"compositionend":return Ud(i);case"keypress":return i.which!==32?null:(zd=!0,Bd);case"textInput":return r=i.data,r===Bd&&zd?null:r;default:return null}}function ev(r,i){if(Zr)return r==="compositionend"||!sc&&Wd(r,i)?(r=Ld(),po=Zl=Qn=null,Zr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Nd&&i.locale!=="ko"?null:i.data;default:return null}}var tv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!tv[r.type]:i==="textarea"}function Hd(r,i,l,h){ud(h),i=So(i,"onChange"),0<i.length&&(l=new ec("onChange","change",null,l,h),r.push({event:l,listeners:i}))}var ts=null,ns=null;function nv(r){cf(r,0)}function vo(r){var i=ii(r);if(Jh(i))return r}function rv(r,i){if(r==="change")return i}var Xd=!1;if(u){var oc;if(u){var ac="oninput"in document;if(!ac){var Yd=document.createElement("div");Yd.setAttribute("oninput","return;"),ac=typeof Yd.oninput=="function"}oc=ac}else oc=!1;Xd=oc&&(!document.documentMode||9<document.documentMode)}function $d(){ts&&(ts.detachEvent("onpropertychange",Gd),ns=ts=null)}function Gd(r){if(r.propertyName==="value"&&vo(ns)){var i=[];Hd(i,ns,r,zl(r)),pd(nv,i)}}function iv(r,i,l){r==="focusin"?($d(),ts=i,ns=l,ts.attachEvent("onpropertychange",Gd)):r==="focusout"&&$d()}function sv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vo(ns)}function ov(r,i){if(r==="click")return vo(i)}function av(r,i){if(r==="input"||r==="change")return vo(i)}function lv(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Jt=typeof Object.is=="function"?Object.is:lv;function rs(r,i){if(Jt(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),h=Object.keys(i);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!d.call(i,p)||!Jt(r[p],i[p]))return!1}return!0}function qd(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Kd(r,i){var l=qd(r);r=0;for(var h;l;){if(l.nodeType===3){if(h=r+l.textContent.length,r<=i&&h>=i)return{node:l,offset:i-r};r=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=qd(l)}}function Qd(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Qd(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Jd(){for(var r=window,i=eo();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=eo(r.document)}return i}function lc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function cv(r){var i=Jd(),l=r.focusedElem,h=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&Qd(l.ownerDocument.documentElement,l)){if(h!==null&&lc(l)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var p=l.textContent.length,m=Math.min(h.start,p);h=h.end===void 0?m:Math.min(h.end,p),!r.extend&&m>h&&(p=h,h=m,m=p),p=Kd(l,m);var _=Kd(l,h);p&&_&&(r.rangeCount!==1||r.anchorNode!==p.node||r.anchorOffset!==p.offset||r.focusNode!==_.node||r.focusOffset!==_.offset)&&(i=i.createRange(),i.setStart(p.node,p.offset),r.removeAllRanges(),m>h?(r.addRange(i),r.extend(_.node,_.offset)):(i.setEnd(_.node,_.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var uv=u&&"documentMode"in document&&11>=document.documentMode,ei=null,cc=null,is=null,uc=!1;function Zd(r,i,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;uc||ei==null||ei!==eo(h)||(h=ei,"selectionStart"in h&&lc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),is&&rs(is,h)||(is=h,h=So(cc,"onSelect"),0<h.length&&(i=new ec("onSelect","select",null,i,l),r.push({event:i,listeners:h}),i.target=ei)))}function _o(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var ti={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionend:_o("Transition","TransitionEnd")},hc={},ef={};u&&(ef=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function xo(r){if(hc[r])return hc[r];if(!ti[r])return r;var i=ti[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in ef)return hc[r]=i[l];return r}var tf=xo("animationend"),nf=xo("animationiteration"),rf=xo("animationstart"),sf=xo("transitionend"),of=new Map,af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(r,i){of.set(r,i),a(i,[r])}for(var dc=0;dc<af.length;dc++){var fc=af[dc],hv=fc.toLowerCase(),dv=fc[0].toUpperCase()+fc.slice(1);Jn(hv,"on"+dv)}Jn(tf,"onAnimationEnd"),Jn(nf,"onAnimationIteration"),Jn(rf,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(sf,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function lf(r,i,l){var h=r.type||"unknown-event";r.currentTarget=l,hy(h,i,void 0,r),r.currentTarget=null}function cf(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var h=r[l],p=h.event;h=h.listeners;e:{var m=void 0;if(i)for(var _=h.length-1;0<=_;_--){var T=h[_],E=T.instance,A=T.currentTarget;if(T=T.listener,E!==m&&p.isPropagationStopped())break e;lf(p,T,A),m=E}else for(_=0;_<h.length;_++){if(T=h[_],E=T.instance,A=T.currentTarget,T=T.listener,E!==m&&p.isPropagationStopped())break e;lf(p,T,A),m=E}}}if(ro)throw r=Hl,ro=!1,Hl=null,r}function Fe(r,i){var l=i[wc];l===void 0&&(l=i[wc]=new Set);var h=r+"__bubble";l.has(h)||(uf(i,r,2,!1),l.add(h))}function pc(r,i,l){var h=0;i&&(h|=4),uf(l,r,h,i)}var wo="_reactListening"+Math.random().toString(36).slice(2);function os(r){if(!r[wo]){r[wo]=!0,n.forEach(function(l){l!=="selectionchange"&&(fv.has(l)||pc(l,!1,r),pc(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[wo]||(i[wo]=!0,pc("selectionchange",!1,i))}}function uf(r,i,l,h){switch(Rd(i)){case 1:var p=Ey;break;case 4:p=Oy;break;default:p=Ql}l=p.bind(null,i,l,r),p=void 0,!Vl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),h?p!==void 0?r.addEventListener(i,l,{capture:!0,passive:p}):r.addEventListener(i,l,!0):p!==void 0?r.addEventListener(i,l,{passive:p}):r.addEventListener(i,l,!1)}function gc(r,i,l,h,p){var m=h;if(!(i&1)&&!(i&2)&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var T=h.stateNode.containerInfo;if(T===p||T.nodeType===8&&T.parentNode===p)break;if(_===4)for(_=h.return;_!==null;){var E=_.tag;if((E===3||E===4)&&(E=_.stateNode.containerInfo,E===p||E.nodeType===8&&E.parentNode===p))return;_=_.return}for(;T!==null;){if(_=xr(T),_===null)return;if(E=_.tag,E===5||E===6){h=m=_;continue e}T=T.parentNode}}h=h.return}pd(function(){var A=m,H=zl(l),$=[];e:{var V=of.get(r);if(V!==void 0){var J=ec,ne=r;switch(r){case"keypress":if(go(l)===0)break e;case"keydown":case"keyup":J=Vy;break;case"focusin":ne="focus",J=rc;break;case"focusout":ne="blur",J=rc;break;case"beforeblur":case"afterblur":J=rc;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=My;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Yy;break;case tf:case nf:case rf:J=jy;break;case sf:J=Gy;break;case"scroll":J=Dy;break;case"wheel":J=Ky;break;case"copy":case"cut":case"paste":J=Fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Id}var re=(i&4)!==0,qe=!re&&r==="scroll",L=re?V!==null?V+"Capture":null:V;re=[];for(var D=A,j;D!==null;){j=D;var q=j.stateNode;if(j.tag===5&&q!==null&&(j=q,L!==null&&(q=Ui(D,L),q!=null&&re.push(as(D,q,j)))),qe)break;D=D.return}0<re.length&&(V=new J(V,ne,null,l,H),$.push({event:V,listeners:re}))}}if(!(i&7)){e:{if(V=r==="mouseover"||r==="pointerover",J=r==="mouseout"||r==="pointerout",V&&l!==Bl&&(ne=l.relatedTarget||l.fromElement)&&(xr(ne)||ne[bn]))break e;if((J||V)&&(V=H.window===H?H:(V=H.ownerDocument)?V.defaultView||V.parentWindow:window,J?(ne=l.relatedTarget||l.toElement,J=A,ne=ne?xr(ne):null,ne!==null&&(qe=_r(ne),ne!==qe||ne.tag!==5&&ne.tag!==6)&&(ne=null)):(J=null,ne=A),J!==ne)){if(re=Ad,q="onMouseLeave",L="onMouseEnter",D="mouse",(r==="pointerout"||r==="pointerover")&&(re=Id,q="onPointerLeave",L="onPointerEnter",D="pointer"),qe=J==null?V:ii(J),j=ne==null?V:ii(ne),V=new re(q,D+"leave",J,l,H),V.target=qe,V.relatedTarget=j,q=null,xr(H)===A&&(re=new re(L,D+"enter",ne,l,H),re.target=j,re.relatedTarget=qe,q=re),qe=q,J&&ne)t:{for(re=J,L=ne,D=0,j=re;j;j=ni(j))D++;for(j=0,q=L;q;q=ni(q))j++;for(;0<D-j;)re=ni(re),D--;for(;0<j-D;)L=ni(L),j--;for(;D--;){if(re===L||L!==null&&re===L.alternate)break t;re=ni(re),L=ni(L)}re=null}else re=null;J!==null&&hf($,V,J,re,!1),ne!==null&&qe!==null&&hf($,qe,ne,re,!0)}}e:{if(V=A?ii(A):window,J=V.nodeName&&V.nodeName.toLowerCase(),J==="select"||J==="input"&&V.type==="file")var se=rv;else if(Vd(V))if(Xd)se=av;else{se=sv;var ae=iv}else(J=V.nodeName)&&J.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(se=ov);if(se&&(se=se(r,A))){Hd($,se,l,H);break e}ae&&ae(r,V,A),r==="focusout"&&(ae=V._wrapperState)&&ae.controlled&&V.type==="number"&&jl(V,"number",V.value)}switch(ae=A?ii(A):window,r){case"focusin":(Vd(ae)||ae.contentEditable==="true")&&(ei=ae,cc=A,is=null);break;case"focusout":is=cc=ei=null;break;case"mousedown":uc=!0;break;case"contextmenu":case"mouseup":case"dragend":uc=!1,Zd($,l,H);break;case"selectionchange":if(uv)break;case"keydown":case"keyup":Zd($,l,H)}var le;if(sc)e:{switch(r){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Zr?Wd(r,l)&&(ue="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ue="onCompositionStart");ue&&(Nd&&l.locale!=="ko"&&(Zr||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Zr&&(le=Ld()):(Qn=H,Zl="value"in Qn?Qn.value:Qn.textContent,Zr=!0)),ae=So(A,ue),0<ae.length&&(ue=new Fd(ue,r,null,l,H),$.push({event:ue,listeners:ae}),le?ue.data=le:(le=Ud(l),le!==null&&(ue.data=le)))),(le=Jy?Zy(r,l):ev(r,l))&&(A=So(A,"onBeforeInput"),0<A.length&&(H=new Fd("onBeforeInput","beforeinput",null,l,H),$.push({event:H,listeners:A}),H.data=le))}cf($,i)})}function as(r,i,l){return{instance:r,listener:i,currentTarget:l}}function So(r,i){for(var l=i+"Capture",h=[];r!==null;){var p=r,m=p.stateNode;p.tag===5&&m!==null&&(p=m,m=Ui(r,l),m!=null&&h.unshift(as(r,m,p)),m=Ui(r,i),m!=null&&h.push(as(r,m,p))),r=r.return}return h}function ni(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function hf(r,i,l,h,p){for(var m=i._reactName,_=[];l!==null&&l!==h;){var T=l,E=T.alternate,A=T.stateNode;if(E!==null&&E===h)break;T.tag===5&&A!==null&&(T=A,p?(E=Ui(l,m),E!=null&&_.unshift(as(l,E,T))):p||(E=Ui(l,m),E!=null&&_.push(as(l,E,T)))),l=l.return}_.length!==0&&r.push({event:i,listeners:_})}var pv=/\r\n?/g,gv=/\u0000|\uFFFD/g;function df(r){return(typeof r=="string"?r:""+r).replace(pv,`
`).replace(gv,"")}function Co(r,i,l){if(i=df(i),df(r)!==i&&l)throw Error(t(425))}function To(){}var mc=null,yc=null;function vc(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _c=typeof setTimeout=="function"?setTimeout:void 0,mv=typeof clearTimeout=="function"?clearTimeout:void 0,ff=typeof Promise=="function"?Promise:void 0,yv=typeof queueMicrotask=="function"?queueMicrotask:typeof ff<"u"?function(r){return ff.resolve(null).then(r).catch(vv)}:_c;function vv(r){setTimeout(function(){throw r})}function xc(r,i){var l=i,h=0;do{var p=l.nextSibling;if(r.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){r.removeChild(p),Qi(i);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Qi(i)}function Zn(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function pf(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var ri=Math.random().toString(36).slice(2),pn="__reactFiber$"+ri,ls="__reactProps$"+ri,bn="__reactContainer$"+ri,wc="__reactEvents$"+ri,_v="__reactListeners$"+ri,xv="__reactHandles$"+ri;function xr(r){var i=r[pn];if(i)return i;for(var l=r.parentNode;l;){if(i=l[bn]||l[pn]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=pf(r);r!==null;){if(l=r[pn])return l;r=pf(r)}return i}r=l,l=r.parentNode}return null}function cs(r){return r=r[pn]||r[bn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ii(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function bo(r){return r[ls]||null}var Sc=[],si=-1;function er(r){return{current:r}}function Ie(r){0>si||(r.current=Sc[si],Sc[si]=null,si--)}function Ae(r,i){si++,Sc[si]=r.current,r.current=i}var tr={},ut=er(tr),St=er(!1),wr=tr;function oi(r,i){var l=r.type.contextTypes;if(!l)return tr;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var p={},m;for(m in l)p[m]=i[m];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=p),p}function Ct(r){return r=r.childContextTypes,r!=null}function ko(){Ie(St),Ie(ut)}function gf(r,i,l){if(ut.current!==tr)throw Error(t(168));Ae(ut,i),Ae(St,l)}function mf(r,i,l){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in i))throw Error(t(108,be(r)||"Unknown",p));return Q({},l,h)}function Eo(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||tr,wr=ut.current,Ae(ut,r),Ae(St,St.current),!0}function yf(r,i,l){var h=r.stateNode;if(!h)throw Error(t(169));l?(r=mf(r,i,wr),h.__reactInternalMemoizedMergedChildContext=r,Ie(St),Ie(ut),Ae(ut,r)):Ie(St),Ae(St,l)}var kn=null,Oo=!1,Cc=!1;function vf(r){kn===null?kn=[r]:kn.push(r)}function wv(r){Oo=!0,vf(r)}function nr(){if(!Cc&&kn!==null){Cc=!0;var r=0,i=Me;try{var l=kn;for(Me=1;r<l.length;r++){var h=l[r];do h=h(!0);while(h!==null)}kn=null,Oo=!1}catch(p){throw kn!==null&&(kn=kn.slice(r+1)),_d(Xl,nr),p}finally{Me=i,Cc=!1}}return null}var ai=[],li=0,Do=null,Po=0,Wt=[],Ut=0,Sr=null,En=1,On="";function Cr(r,i){ai[li++]=Po,ai[li++]=Do,Do=r,Po=i}function _f(r,i,l){Wt[Ut++]=En,Wt[Ut++]=On,Wt[Ut++]=Sr,Sr=r;var h=En;r=On;var p=32-Qt(h)-1;h&=~(1<<p),l+=1;var m=32-Qt(i)+p;if(30<m){var _=p-p%5;m=(h&(1<<_)-1).toString(32),h>>=_,p-=_,En=1<<32-Qt(i)+p|l<<p|h,On=m+r}else En=1<<m|l<<p|h,On=r}function Tc(r){r.return!==null&&(Cr(r,1),_f(r,1,0))}function bc(r){for(;r===Do;)Do=ai[--li],ai[li]=null,Po=ai[--li],ai[li]=null;for(;r===Sr;)Sr=Wt[--Ut],Wt[Ut]=null,On=Wt[--Ut],Wt[Ut]=null,En=Wt[--Ut],Wt[Ut]=null}var At=null,Ft=null,Ne=!1,Zt=null;function xf(r,i){var l=Yt(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function wf(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,At=r,Ft=Zn(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,At=r,Ft=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=Sr!==null?{id:En,overflow:On}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Yt(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,At=r,Ft=null,!0):!1;default:return!1}}function kc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Ec(r){if(Ne){var i=Ft;if(i){var l=i;if(!wf(r,i)){if(kc(r))throw Error(t(418));i=Zn(l.nextSibling);var h=At;i&&wf(r,i)?xf(h,l):(r.flags=r.flags&-4097|2,Ne=!1,At=r)}}else{if(kc(r))throw Error(t(418));r.flags=r.flags&-4097|2,Ne=!1,At=r}}}function Sf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;At=r}function Mo(r){if(r!==At)return!1;if(!Ne)return Sf(r),Ne=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!vc(r.type,r.memoizedProps)),i&&(i=Ft)){if(kc(r))throw Cf(),Error(t(418));for(;i;)xf(r,i),i=Zn(i.nextSibling)}if(Sf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){Ft=Zn(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}Ft=null}}else Ft=At?Zn(r.stateNode.nextSibling):null;return!0}function Cf(){for(var r=Ft;r;)r=Zn(r.nextSibling)}function ci(){Ft=At=null,Ne=!1}function Oc(r){Zt===null?Zt=[r]:Zt.push(r)}var Sv=N.ReactCurrentBatchConfig;function us(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,r));var p=h,m=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(_){var T=p.refs;_===null?delete T[m]:T[m]=_},i._stringRef=m,i)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Ro(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Tf(r){var i=r._init;return i(r._payload)}function bf(r){function i(L,D){if(r){var j=L.deletions;j===null?(L.deletions=[D],L.flags|=16):j.push(D)}}function l(L,D){if(!r)return null;for(;D!==null;)i(L,D),D=D.sibling;return null}function h(L,D){for(L=new Map;D!==null;)D.key!==null?L.set(D.key,D):L.set(D.index,D),D=D.sibling;return L}function p(L,D){return L=ur(L,D),L.index=0,L.sibling=null,L}function m(L,D,j){return L.index=j,r?(j=L.alternate,j!==null?(j=j.index,j<D?(L.flags|=2,D):j):(L.flags|=2,D)):(L.flags|=1048576,D)}function _(L){return r&&L.alternate===null&&(L.flags|=2),L}function T(L,D,j,q){return D===null||D.tag!==6?(D=_u(j,L.mode,q),D.return=L,D):(D=p(D,j),D.return=L,D)}function E(L,D,j,q){var se=j.type;return se===X?H(L,D,j.props.children,q,j.key):D!==null&&(D.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Te&&Tf(se)===D.type)?(q=p(D,j.props),q.ref=us(L,D,j),q.return=L,q):(q=na(j.type,j.key,j.props,null,L.mode,q),q.ref=us(L,D,j),q.return=L,q)}function A(L,D,j,q){return D===null||D.tag!==4||D.stateNode.containerInfo!==j.containerInfo||D.stateNode.implementation!==j.implementation?(D=xu(j,L.mode,q),D.return=L,D):(D=p(D,j.children||[]),D.return=L,D)}function H(L,D,j,q,se){return D===null||D.tag!==7?(D=Mr(j,L.mode,q,se),D.return=L,D):(D=p(D,j),D.return=L,D)}function $(L,D,j){if(typeof D=="string"&&D!==""||typeof D=="number")return D=_u(""+D,L.mode,j),D.return=L,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case z:return j=na(D.type,D.key,D.props,null,L.mode,j),j.ref=us(L,null,D),j.return=L,j;case G:return D=xu(D,L.mode,j),D.return=L,D;case Te:var q=D._init;return $(L,q(D._payload),j)}if(Bi(D)||ie(D))return D=Mr(D,L.mode,j,null),D.return=L,D;Ro(L,D)}return null}function V(L,D,j,q){var se=D!==null?D.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return se!==null?null:T(L,D,""+j,q);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case z:return j.key===se?E(L,D,j,q):null;case G:return j.key===se?A(L,D,j,q):null;case Te:return se=j._init,V(L,D,se(j._payload),q)}if(Bi(j)||ie(j))return se!==null?null:H(L,D,j,q,null);Ro(L,j)}return null}function J(L,D,j,q,se){if(typeof q=="string"&&q!==""||typeof q=="number")return L=L.get(j)||null,T(D,L,""+q,se);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case z:return L=L.get(q.key===null?j:q.key)||null,E(D,L,q,se);case G:return L=L.get(q.key===null?j:q.key)||null,A(D,L,q,se);case Te:var ae=q._init;return J(L,D,j,ae(q._payload),se)}if(Bi(q)||ie(q))return L=L.get(j)||null,H(D,L,q,se,null);Ro(D,q)}return null}function ne(L,D,j,q){for(var se=null,ae=null,le=D,ue=D=0,ot=null;le!==null&&ue<j.length;ue++){le.index>ue?(ot=le,le=null):ot=le.sibling;var ke=V(L,le,j[ue],q);if(ke===null){le===null&&(le=ot);break}r&&le&&ke.alternate===null&&i(L,le),D=m(ke,D,ue),ae===null?se=ke:ae.sibling=ke,ae=ke,le=ot}if(ue===j.length)return l(L,le),Ne&&Cr(L,ue),se;if(le===null){for(;ue<j.length;ue++)le=$(L,j[ue],q),le!==null&&(D=m(le,D,ue),ae===null?se=le:ae.sibling=le,ae=le);return Ne&&Cr(L,ue),se}for(le=h(L,le);ue<j.length;ue++)ot=J(le,L,ue,j[ue],q),ot!==null&&(r&&ot.alternate!==null&&le.delete(ot.key===null?ue:ot.key),D=m(ot,D,ue),ae===null?se=ot:ae.sibling=ot,ae=ot);return r&&le.forEach(function(hr){return i(L,hr)}),Ne&&Cr(L,ue),se}function re(L,D,j,q){var se=ie(j);if(typeof se!="function")throw Error(t(150));if(j=se.call(j),j==null)throw Error(t(151));for(var ae=se=null,le=D,ue=D=0,ot=null,ke=j.next();le!==null&&!ke.done;ue++,ke=j.next()){le.index>ue?(ot=le,le=null):ot=le.sibling;var hr=V(L,le,ke.value,q);if(hr===null){le===null&&(le=ot);break}r&&le&&hr.alternate===null&&i(L,le),D=m(hr,D,ue),ae===null?se=hr:ae.sibling=hr,ae=hr,le=ot}if(ke.done)return l(L,le),Ne&&Cr(L,ue),se;if(le===null){for(;!ke.done;ue++,ke=j.next())ke=$(L,ke.value,q),ke!==null&&(D=m(ke,D,ue),ae===null?se=ke:ae.sibling=ke,ae=ke);return Ne&&Cr(L,ue),se}for(le=h(L,le);!ke.done;ue++,ke=j.next())ke=J(le,L,ue,ke.value,q),ke!==null&&(r&&ke.alternate!==null&&le.delete(ke.key===null?ue:ke.key),D=m(ke,D,ue),ae===null?se=ke:ae.sibling=ke,ae=ke);return r&&le.forEach(function(e1){return i(L,e1)}),Ne&&Cr(L,ue),se}function qe(L,D,j,q){if(typeof j=="object"&&j!==null&&j.type===X&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case z:e:{for(var se=j.key,ae=D;ae!==null;){if(ae.key===se){if(se=j.type,se===X){if(ae.tag===7){l(L,ae.sibling),D=p(ae,j.props.children),D.return=L,L=D;break e}}else if(ae.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Te&&Tf(se)===ae.type){l(L,ae.sibling),D=p(ae,j.props),D.ref=us(L,ae,j),D.return=L,L=D;break e}l(L,ae);break}else i(L,ae);ae=ae.sibling}j.type===X?(D=Mr(j.props.children,L.mode,q,j.key),D.return=L,L=D):(q=na(j.type,j.key,j.props,null,L.mode,q),q.ref=us(L,D,j),q.return=L,L=q)}return _(L);case G:e:{for(ae=j.key;D!==null;){if(D.key===ae)if(D.tag===4&&D.stateNode.containerInfo===j.containerInfo&&D.stateNode.implementation===j.implementation){l(L,D.sibling),D=p(D,j.children||[]),D.return=L,L=D;break e}else{l(L,D);break}else i(L,D);D=D.sibling}D=xu(j,L.mode,q),D.return=L,L=D}return _(L);case Te:return ae=j._init,qe(L,D,ae(j._payload),q)}if(Bi(j))return ne(L,D,j,q);if(ie(j))return re(L,D,j,q);Ro(L,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,D!==null&&D.tag===6?(l(L,D.sibling),D=p(D,j),D.return=L,L=D):(l(L,D),D=_u(j,L.mode,q),D.return=L,L=D),_(L)):l(L,D)}return qe}var ui=bf(!0),kf=bf(!1),Lo=er(null),jo=null,hi=null,Dc=null;function Pc(){Dc=hi=jo=null}function Mc(r){var i=Lo.current;Ie(Lo),r._currentValue=i}function Rc(r,i,l){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===l)break;r=r.return}}function di(r,i){jo=r,Dc=hi=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&i&&(Tt=!0),r.firstContext=null)}function Vt(r){var i=r._currentValue;if(Dc!==r)if(r={context:r,memoizedValue:i,next:null},hi===null){if(jo===null)throw Error(t(308));hi=r,jo.dependencies={lanes:0,firstContext:r}}else hi=hi.next=r;return i}var Tr=null;function Lc(r){Tr===null?Tr=[r]:Tr.push(r)}function Ef(r,i,l,h){var p=i.interleaved;return p===null?(l.next=l,Lc(i)):(l.next=p.next,p.next=l),i.interleaved=l,Dn(r,h)}function Dn(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var rr=!1;function jc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Of(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Pn(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function ir(r,i,l){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,Se&2){var p=h.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),h.pending=i,Dn(r,l)}return p=h.interleaved,p===null?(i.next=i,Lc(h)):(i.next=p.next,p.next=i),h.interleaved=i,Dn(r,l)}function Ao(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,Gl(r,l)}}function Df(r,i){var l=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var _={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};m===null?p=m=_:m=m.next=_,l=l.next}while(l!==null);m===null?p=m=i:m=m.next=i}else p=m=i;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:h.shared,effects:h.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function Fo(r,i,l,h){var p=r.updateQueue;rr=!1;var m=p.firstBaseUpdate,_=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var E=T,A=E.next;E.next=null,_===null?m=A:_.next=A,_=E;var H=r.alternate;H!==null&&(H=H.updateQueue,T=H.lastBaseUpdate,T!==_&&(T===null?H.firstBaseUpdate=A:T.next=A,H.lastBaseUpdate=E))}if(m!==null){var $=p.baseState;_=0,H=A=E=null,T=m;do{var V=T.lane,J=T.eventTime;if((h&V)===V){H!==null&&(H=H.next={eventTime:J,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var ne=r,re=T;switch(V=i,J=l,re.tag){case 1:if(ne=re.payload,typeof ne=="function"){$=ne.call(J,$,V);break e}$=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=re.payload,V=typeof ne=="function"?ne.call(J,$,V):ne,V==null)break e;$=Q({},$,V);break e;case 2:rr=!0}}T.callback!==null&&T.lane!==0&&(r.flags|=64,V=p.effects,V===null?p.effects=[T]:V.push(T))}else J={eventTime:J,lane:V,tag:T.tag,payload:T.payload,callback:T.callback,next:null},H===null?(A=H=J,E=$):H=H.next=J,_|=V;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;V=T,T=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);if(H===null&&(E=$),p.baseState=E,p.firstBaseUpdate=A,p.lastBaseUpdate=H,i=p.shared.interleaved,i!==null){p=i;do _|=p.lane,p=p.next;while(p!==i)}else m===null&&(p.shared.lanes=0);Er|=_,r.lanes=_,r.memoizedState=$}}function Pf(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var hs={},gn=er(hs),ds=er(hs),fs=er(hs);function br(r){if(r===hs)throw Error(t(174));return r}function Ac(r,i){switch(Ae(fs,i),Ae(ds,r),Ae(gn,hs),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Fl(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Fl(i,r)}Ie(gn),Ae(gn,i)}function fi(){Ie(gn),Ie(ds),Ie(fs)}function Mf(r){br(fs.current);var i=br(gn.current),l=Fl(i,r.type);i!==l&&(Ae(ds,r),Ae(gn,l))}function Fc(r){ds.current===r&&(Ie(gn),Ie(ds))}var ze=er(0);function Io(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ic=[];function Nc(){for(var r=0;r<Ic.length;r++)Ic[r]._workInProgressVersionPrimary=null;Ic.length=0}var No=N.ReactCurrentDispatcher,Bc=N.ReactCurrentBatchConfig,kr=0,We=null,et=null,it=null,Bo=!1,ps=!1,gs=0,Cv=0;function ht(){throw Error(t(321))}function zc(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Jt(r[l],i[l]))return!1;return!0}function Wc(r,i,l,h,p,m){if(kr=m,We=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,No.current=r===null||r.memoizedState===null?Ev:Ov,r=l(h,p),ps){m=0;do{if(ps=!1,gs=0,25<=m)throw Error(t(301));m+=1,it=et=null,i.updateQueue=null,No.current=Dv,r=l(h,p)}while(ps)}if(No.current=Uo,i=et!==null&&et.next!==null,kr=0,it=et=We=null,Bo=!1,i)throw Error(t(300));return r}function Uc(){var r=gs!==0;return gs=0,r}function mn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?We.memoizedState=it=r:it=it.next=r,it}function Ht(){if(et===null){var r=We.alternate;r=r!==null?r.memoizedState:null}else r=et.next;var i=it===null?We.memoizedState:it.next;if(i!==null)it=i,et=r;else{if(r===null)throw Error(t(310));et=r,r={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},it===null?We.memoizedState=it=r:it=it.next=r}return it}function ms(r,i){return typeof i=="function"?i(r):i}function Vc(r){var i=Ht(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=et,p=h.baseQueue,m=l.pending;if(m!==null){if(p!==null){var _=p.next;p.next=m.next,m.next=_}h.baseQueue=p=m,l.pending=null}if(p!==null){m=p.next,h=h.baseState;var T=_=null,E=null,A=m;do{var H=A.lane;if((kr&H)===H)E!==null&&(E=E.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),h=A.hasEagerState?A.eagerState:r(h,A.action);else{var $={lane:H,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};E===null?(T=E=$,_=h):E=E.next=$,We.lanes|=H,Er|=H}A=A.next}while(A!==null&&A!==m);E===null?_=h:E.next=T,Jt(h,i.memoizedState)||(Tt=!0),i.memoizedState=h,i.baseState=_,i.baseQueue=E,l.lastRenderedState=h}if(r=l.interleaved,r!==null){p=r;do m=p.lane,We.lanes|=m,Er|=m,p=p.next;while(p!==r)}else p===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function Hc(r){var i=Ht(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var h=l.dispatch,p=l.pending,m=i.memoizedState;if(p!==null){l.pending=null;var _=p=p.next;do m=r(m,_.action),_=_.next;while(_!==p);Jt(m,i.memoizedState)||(Tt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),l.lastRenderedState=m}return[m,h]}function Rf(){}function Lf(r,i){var l=We,h=Ht(),p=i(),m=!Jt(h.memoizedState,p);if(m&&(h.memoizedState=p,Tt=!0),h=h.queue,Xc(Ff.bind(null,l,h,r),[r]),h.getSnapshot!==i||m||it!==null&&it.memoizedState.tag&1){if(l.flags|=2048,ys(9,Af.bind(null,l,h,p,i),void 0,null),st===null)throw Error(t(349));kr&30||jf(l,i,p)}return p}function jf(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=We.updateQueue,i===null?(i={lastEffect:null,stores:null},We.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function Af(r,i,l,h){i.value=l,i.getSnapshot=h,If(i)&&Nf(r)}function Ff(r,i,l){return l(function(){If(i)&&Nf(r)})}function If(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Jt(r,l)}catch{return!0}}function Nf(r){var i=Dn(r,1);i!==null&&rn(i,r,1,-1)}function Bf(r){var i=mn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:r},i.queue=r,r=r.dispatch=kv.bind(null,We,r),[i.memoizedState,r]}function ys(r,i,l,h){return r={tag:r,create:i,destroy:l,deps:h,next:null},i=We.updateQueue,i===null?(i={lastEffect:null,stores:null},We.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(h=l.next,l.next=r,r.next=h,i.lastEffect=r)),r}function zf(){return Ht().memoizedState}function zo(r,i,l,h){var p=mn();We.flags|=r,p.memoizedState=ys(1|i,l,void 0,h===void 0?null:h)}function Wo(r,i,l,h){var p=Ht();h=h===void 0?null:h;var m=void 0;if(et!==null){var _=et.memoizedState;if(m=_.destroy,h!==null&&zc(h,_.deps)){p.memoizedState=ys(i,l,m,h);return}}We.flags|=r,p.memoizedState=ys(1|i,l,m,h)}function Wf(r,i){return zo(8390656,8,r,i)}function Xc(r,i){return Wo(2048,8,r,i)}function Uf(r,i){return Wo(4,2,r,i)}function Vf(r,i){return Wo(4,4,r,i)}function Hf(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Xf(r,i,l){return l=l!=null?l.concat([r]):null,Wo(4,4,Hf.bind(null,i,r),l)}function Yc(){}function Yf(r,i){var l=Ht();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&zc(i,h[1])?h[0]:(l.memoizedState=[r,i],r)}function $f(r,i){var l=Ht();i=i===void 0?null:i;var h=l.memoizedState;return h!==null&&i!==null&&zc(i,h[1])?h[0]:(r=r(),l.memoizedState=[r,i],r)}function Gf(r,i,l){return kr&21?(Jt(l,i)||(l=Cd(),We.lanes|=l,Er|=l,r.baseState=!0),i):(r.baseState&&(r.baseState=!1,Tt=!0),r.memoizedState=l)}function Tv(r,i){var l=Me;Me=l!==0&&4>l?l:4,r(!0);var h=Bc.transition;Bc.transition={};try{r(!1),i()}finally{Me=l,Bc.transition=h}}function qf(){return Ht().memoizedState}function bv(r,i,l){var h=lr(r);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Kf(r))Qf(i,l);else if(l=Ef(r,i,l,h),l!==null){var p=yt();rn(l,r,h,p),Jf(l,i,h)}}function kv(r,i,l){var h=lr(r),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Kf(r))Qf(i,p);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,T=m(_,l);if(p.hasEagerState=!0,p.eagerState=T,Jt(T,_)){var E=i.interleaved;E===null?(p.next=p,Lc(i)):(p.next=E.next,E.next=p),i.interleaved=p;return}}catch{}finally{}l=Ef(r,i,p,h),l!==null&&(p=yt(),rn(l,r,h,p),Jf(l,i,h))}}function Kf(r){var i=r.alternate;return r===We||i!==null&&i===We}function Qf(r,i){ps=Bo=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function Jf(r,i,l){if(l&4194240){var h=i.lanes;h&=r.pendingLanes,l|=h,i.lanes=l,Gl(r,l)}}var Uo={readContext:Vt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},Ev={readContext:Vt,useCallback:function(r,i){return mn().memoizedState=[r,i===void 0?null:i],r},useContext:Vt,useEffect:Wf,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,zo(4194308,4,Hf.bind(null,i,r),l)},useLayoutEffect:function(r,i){return zo(4194308,4,r,i)},useInsertionEffect:function(r,i){return zo(4,2,r,i)},useMemo:function(r,i){var l=mn();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var h=mn();return i=l!==void 0?l(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=bv.bind(null,We,r),[h.memoizedState,r]},useRef:function(r){var i=mn();return r={current:r},i.memoizedState=r},useState:Bf,useDebugValue:Yc,useDeferredValue:function(r){return mn().memoizedState=r},useTransition:function(){var r=Bf(!1),i=r[0];return r=Tv.bind(null,r[1]),mn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var h=We,p=mn();if(Ne){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),st===null)throw Error(t(349));kr&30||jf(h,i,l)}p.memoizedState=l;var m={value:l,getSnapshot:i};return p.queue=m,Wf(Ff.bind(null,h,m,r),[r]),h.flags|=2048,ys(9,Af.bind(null,h,m,l,i),void 0,null),l},useId:function(){var r=mn(),i=st.identifierPrefix;if(Ne){var l=On,h=En;l=(h&~(1<<32-Qt(h)-1)).toString(32)+l,i=":"+i+"R"+l,l=gs++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Cv++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},Ov={readContext:Vt,useCallback:Yf,useContext:Vt,useEffect:Xc,useImperativeHandle:Xf,useInsertionEffect:Uf,useLayoutEffect:Vf,useMemo:$f,useReducer:Vc,useRef:zf,useState:function(){return Vc(ms)},useDebugValue:Yc,useDeferredValue:function(r){var i=Ht();return Gf(i,et.memoizedState,r)},useTransition:function(){var r=Vc(ms)[0],i=Ht().memoizedState;return[r,i]},useMutableSource:Rf,useSyncExternalStore:Lf,useId:qf,unstable_isNewReconciler:!1},Dv={readContext:Vt,useCallback:Yf,useContext:Vt,useEffect:Xc,useImperativeHandle:Xf,useInsertionEffect:Uf,useLayoutEffect:Vf,useMemo:$f,useReducer:Hc,useRef:zf,useState:function(){return Hc(ms)},useDebugValue:Yc,useDeferredValue:function(r){var i=Ht();return et===null?i.memoizedState=r:Gf(i,et.memoizedState,r)},useTransition:function(){var r=Hc(ms)[0],i=Ht().memoizedState;return[r,i]},useMutableSource:Rf,useSyncExternalStore:Lf,useId:qf,unstable_isNewReconciler:!1};function en(r,i){if(r&&r.defaultProps){i=Q({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function $c(r,i,l,h){i=r.memoizedState,l=l(h,i),l=l==null?i:Q({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Vo={isMounted:function(r){return(r=r._reactInternals)?_r(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var h=yt(),p=lr(r),m=Pn(h,p);m.payload=i,l!=null&&(m.callback=l),i=ir(r,m,p),i!==null&&(rn(i,r,p,h),Ao(i,r,p))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var h=yt(),p=lr(r),m=Pn(h,p);m.tag=1,m.payload=i,l!=null&&(m.callback=l),i=ir(r,m,p),i!==null&&(rn(i,r,p,h),Ao(i,r,p))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=yt(),h=lr(r),p=Pn(l,h);p.tag=2,i!=null&&(p.callback=i),i=ir(r,p,h),i!==null&&(rn(i,r,h,l),Ao(i,r,h))}};function Zf(r,i,l,h,p,m,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,m,_):i.prototype&&i.prototype.isPureReactComponent?!rs(l,h)||!rs(p,m):!0}function ep(r,i,l){var h=!1,p=tr,m=i.contextType;return typeof m=="object"&&m!==null?m=Vt(m):(p=Ct(i)?wr:ut.current,h=i.contextTypes,m=(h=h!=null)?oi(r,p):tr),i=new i(l,m),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Vo,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=p,r.__reactInternalMemoizedMaskedChildContext=m),i}function tp(r,i,l,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,h),i.state!==r&&Vo.enqueueReplaceState(i,i.state,null)}function Gc(r,i,l,h){var p=r.stateNode;p.props=l,p.state=r.memoizedState,p.refs={},jc(r);var m=i.contextType;typeof m=="object"&&m!==null?p.context=Vt(m):(m=Ct(i)?wr:ut.current,p.context=oi(r,m)),p.state=r.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&($c(r,i,m,l),p.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(i=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),i!==p.state&&Vo.enqueueReplaceState(p,p.state,null),Fo(r,l,p,h),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308)}function pi(r,i){try{var l="",h=i;do l+=xe(h),h=h.return;while(h);var p=l}catch(m){p=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:i,stack:p,digest:null}}function qc(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function Kc(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var Pv=typeof WeakMap=="function"?WeakMap:Map;function np(r,i,l){l=Pn(-1,l),l.tag=3,l.payload={element:null};var h=i.value;return l.callback=function(){Ko||(Ko=!0,hu=h),Kc(r,i)},l}function rp(r,i,l){l=Pn(-1,l),l.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=i.value;l.payload=function(){return h(p)},l.callback=function(){Kc(r,i)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(l.callback=function(){Kc(r,i),typeof h!="function"&&(or===null?or=new Set([this]):or.add(this));var _=i.stack;this.componentDidCatch(i.value,{componentStack:_!==null?_:""})}),l}function ip(r,i,l){var h=r.pingCache;if(h===null){h=r.pingCache=new Pv;var p=new Set;h.set(i,p)}else p=h.get(i),p===void 0&&(p=new Set,h.set(i,p));p.has(l)||(p.add(l),r=Hv.bind(null,r,i,l),i.then(r,r))}function sp(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function op(r,i,l,h,p){return r.mode&1?(r.flags|=65536,r.lanes=p,r):(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Pn(-1,1),i.tag=2,ir(l,i,1))),l.lanes|=1),r)}var Mv=N.ReactCurrentOwner,Tt=!1;function mt(r,i,l,h){i.child=r===null?kf(i,null,l,h):ui(i,r.child,l,h)}function ap(r,i,l,h,p){l=l.render;var m=i.ref;return di(i,p),h=Wc(r,i,l,h,m,p),l=Uc(),r!==null&&!Tt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,Mn(r,i,p)):(Ne&&l&&Tc(i),i.flags|=1,mt(r,i,h,p),i.child)}function lp(r,i,l,h,p){if(r===null){var m=l.type;return typeof m=="function"&&!vu(m)&&m.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=m,cp(r,i,m,h,p)):(r=na(l.type,null,h,i,i.mode,p),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!(r.lanes&p)){var _=m.memoizedProps;if(l=l.compare,l=l!==null?l:rs,l(_,h)&&r.ref===i.ref)return Mn(r,i,p)}return i.flags|=1,r=ur(m,h),r.ref=i.ref,r.return=i,i.child=r}function cp(r,i,l,h,p){if(r!==null){var m=r.memoizedProps;if(rs(m,h)&&r.ref===i.ref)if(Tt=!1,i.pendingProps=h=m,(r.lanes&p)!==0)r.flags&131072&&(Tt=!0);else return i.lanes=r.lanes,Mn(r,i,p)}return Qc(r,i,l,h,p)}function up(r,i,l){var h=i.pendingProps,p=h.children,m=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(mi,It),It|=l;else{if(!(l&1073741824))return r=m!==null?m.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Ae(mi,It),It|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:l,Ae(mi,It),It|=h}else m!==null?(h=m.baseLanes|l,i.memoizedState=null):h=l,Ae(mi,It),It|=h;return mt(r,i,p,l),i.child}function hp(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function Qc(r,i,l,h,p){var m=Ct(l)?wr:ut.current;return m=oi(i,m),di(i,p),l=Wc(r,i,l,h,m,p),h=Uc(),r!==null&&!Tt?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~p,Mn(r,i,p)):(Ne&&h&&Tc(i),i.flags|=1,mt(r,i,l,p),i.child)}function dp(r,i,l,h,p){if(Ct(l)){var m=!0;Eo(i)}else m=!1;if(di(i,p),i.stateNode===null)Xo(r,i),ep(i,l,h),Gc(i,l,h,p),h=!0;else if(r===null){var _=i.stateNode,T=i.memoizedProps;_.props=T;var E=_.context,A=l.contextType;typeof A=="object"&&A!==null?A=Vt(A):(A=Ct(l)?wr:ut.current,A=oi(i,A));var H=l.getDerivedStateFromProps,$=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function";$||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==h||E!==A)&&tp(i,_,h,A),rr=!1;var V=i.memoizedState;_.state=V,Fo(i,h,_,p),E=i.memoizedState,T!==h||V!==E||St.current||rr?(typeof H=="function"&&($c(i,l,H,h),E=i.memoizedState),(T=rr||Zf(i,l,T,h,V,E,A))?($||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(i.flags|=4194308)):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=E),_.props=h,_.state=E,_.context=A,h=T):(typeof _.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{_=i.stateNode,Of(r,i),T=i.memoizedProps,A=i.type===i.elementType?T:en(i.type,T),_.props=A,$=i.pendingProps,V=_.context,E=l.contextType,typeof E=="object"&&E!==null?E=Vt(E):(E=Ct(l)?wr:ut.current,E=oi(i,E));var J=l.getDerivedStateFromProps;(H=typeof J=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==$||V!==E)&&tp(i,_,h,E),rr=!1,V=i.memoizedState,_.state=V,Fo(i,h,_,p);var ne=i.memoizedState;T!==$||V!==ne||St.current||rr?(typeof J=="function"&&($c(i,l,J,h),ne=i.memoizedState),(A=rr||Zf(i,l,A,h,V,ne,E)||!1)?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ne,E),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ne,E)),typeof _.componentDidUpdate=="function"&&(i.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===r.memoizedProps&&V===r.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&V===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=ne),_.props=h,_.state=ne,_.context=E,h=A):(typeof _.componentDidUpdate!="function"||T===r.memoizedProps&&V===r.memoizedState||(i.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&V===r.memoizedState||(i.flags|=1024),h=!1)}return Jc(r,i,l,h,m,p)}function Jc(r,i,l,h,p,m){hp(r,i);var _=(i.flags&128)!==0;if(!h&&!_)return p&&yf(i,l,!1),Mn(r,i,m);h=i.stateNode,Mv.current=i;var T=_&&typeof l.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&_?(i.child=ui(i,r.child,null,m),i.child=ui(i,null,T,m)):mt(r,i,T,m),i.memoizedState=h.state,p&&yf(i,l,!0),i.child}function fp(r){var i=r.stateNode;i.pendingContext?gf(r,i.pendingContext,i.pendingContext!==i.context):i.context&&gf(r,i.context,!1),Ac(r,i.containerInfo)}function pp(r,i,l,h,p){return ci(),Oc(p),i.flags|=256,mt(r,i,l,h),i.child}var Zc={dehydrated:null,treeContext:null,retryLane:0};function eu(r){return{baseLanes:r,cachePool:null,transitions:null}}function gp(r,i,l){var h=i.pendingProps,p=ze.current,m=!1,_=(i.flags&128)!==0,T;if((T=_)||(T=r!==null&&r.memoizedState===null?!1:(p&2)!==0),T?(m=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(p|=1),Ae(ze,p&1),r===null)return Ec(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(i.mode&1?r.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(_=h.children,r=h.fallback,m?(h=i.mode,m=i.child,_={mode:"hidden",children:_},!(h&1)&&m!==null?(m.childLanes=0,m.pendingProps=_):m=ra(_,h,0,null),r=Mr(r,h,l,null),m.return=i,r.return=i,m.sibling=r,i.child=m,i.child.memoizedState=eu(l),i.memoizedState=Zc,r):tu(i,_));if(p=r.memoizedState,p!==null&&(T=p.dehydrated,T!==null))return Rv(r,i,_,h,T,p,l);if(m){m=h.fallback,_=i.mode,p=r.child,T=p.sibling;var E={mode:"hidden",children:h.children};return!(_&1)&&i.child!==p?(h=i.child,h.childLanes=0,h.pendingProps=E,i.deletions=null):(h=ur(p,E),h.subtreeFlags=p.subtreeFlags&14680064),T!==null?m=ur(T,m):(m=Mr(m,_,l,null),m.flags|=2),m.return=i,h.return=i,h.sibling=m,i.child=h,h=m,m=i.child,_=r.child.memoizedState,_=_===null?eu(l):{baseLanes:_.baseLanes|l,cachePool:null,transitions:_.transitions},m.memoizedState=_,m.childLanes=r.childLanes&~l,i.memoizedState=Zc,h}return m=r.child,r=m.sibling,h=ur(m,{mode:"visible",children:h.children}),!(i.mode&1)&&(h.lanes=l),h.return=i,h.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=h,i.memoizedState=null,h}function tu(r,i){return i=ra({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Ho(r,i,l,h){return h!==null&&Oc(h),ui(i,r.child,null,l),r=tu(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Rv(r,i,l,h,p,m,_){if(l)return i.flags&256?(i.flags&=-257,h=qc(Error(t(422))),Ho(r,i,_,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(m=h.fallback,p=i.mode,h=ra({mode:"visible",children:h.children},p,0,null),m=Mr(m,p,_,null),m.flags|=2,h.return=i,m.return=i,h.sibling=m,i.child=h,i.mode&1&&ui(i,r.child,null,_),i.child.memoizedState=eu(_),i.memoizedState=Zc,m);if(!(i.mode&1))return Ho(r,i,_,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var T=h.dgst;return h=T,m=Error(t(419)),h=qc(m,h,void 0),Ho(r,i,_,h)}if(T=(_&r.childLanes)!==0,Tt||T){if(h=st,h!==null){switch(_&-_){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=p&(h.suspendedLanes|_)?0:p,p!==0&&p!==m.retryLane&&(m.retryLane=p,Dn(r,p),rn(h,r,p,-1))}return yu(),h=qc(Error(t(421))),Ho(r,i,_,h)}return p.data==="$?"?(i.flags|=128,i.child=r.child,i=Xv.bind(null,r),p._reactRetry=i,null):(r=m.treeContext,Ft=Zn(p.nextSibling),At=i,Ne=!0,Zt=null,r!==null&&(Wt[Ut++]=En,Wt[Ut++]=On,Wt[Ut++]=Sr,En=r.id,On=r.overflow,Sr=i),i=tu(i,h.children),i.flags|=4096,i)}function mp(r,i,l){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Rc(r.return,i,l)}function nu(r,i,l,h,p){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=l,m.tailMode=p)}function yp(r,i,l){var h=i.pendingProps,p=h.revealOrder,m=h.tail;if(mt(r,i,h.children,l),h=ze.current,h&2)h=h&1|2,i.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&mp(r,l,i);else if(r.tag===19)mp(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ae(ze,h),!(i.mode&1))i.memoizedState=null;else switch(p){case"forwards":for(l=i.child,p=null;l!==null;)r=l.alternate,r!==null&&Io(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=i.child,i.child=null):(p=l.sibling,l.sibling=null),nu(i,!1,p,l,m);break;case"backwards":for(l=null,p=i.child,i.child=null;p!==null;){if(r=p.alternate,r!==null&&Io(r)===null){i.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}nu(i,!0,l,null,m);break;case"together":nu(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Xo(r,i){!(i.mode&1)&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Mn(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),Er|=i.lanes,!(l&i.childLanes))return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,l=ur(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=ur(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function Lv(r,i,l){switch(i.tag){case 3:fp(i),ci();break;case 5:Mf(i);break;case 1:Ct(i.type)&&Eo(i);break;case 4:Ac(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,p=i.memoizedProps.value;Ae(Lo,h._currentValue),h._currentValue=p;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(Ae(ze,ze.current&1),i.flags|=128,null):l&i.child.childLanes?gp(r,i,l):(Ae(ze,ze.current&1),r=Mn(r,i,l),r!==null?r.sibling:null);Ae(ze,ze.current&1);break;case 19:if(h=(l&i.childLanes)!==0,r.flags&128){if(h)return yp(r,i,l);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ae(ze,ze.current),h)break;return null;case 22:case 23:return i.lanes=0,up(r,i,l)}return Mn(r,i,l)}var vp,ru,_p,xp;vp=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},ru=function(){},_p=function(r,i,l,h){var p=r.memoizedProps;if(p!==h){r=i.stateNode,br(gn.current);var m=null;switch(l){case"input":p=Rl(r,p),h=Rl(r,h),m=[];break;case"select":p=Q({},p,{value:void 0}),h=Q({},h,{value:void 0}),m=[];break;case"textarea":p=Al(r,p),h=Al(r,h),m=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=To)}Il(l,h);var _;l=null;for(A in p)if(!h.hasOwnProperty(A)&&p.hasOwnProperty(A)&&p[A]!=null)if(A==="style"){var T=p[A];for(_ in T)T.hasOwnProperty(_)&&(l||(l={}),l[_]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(s.hasOwnProperty(A)?m||(m=[]):(m=m||[]).push(A,null));for(A in h){var E=h[A];if(T=p!=null?p[A]:void 0,h.hasOwnProperty(A)&&E!==T&&(E!=null||T!=null))if(A==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||E&&E.hasOwnProperty(_)||(l||(l={}),l[_]="");for(_ in E)E.hasOwnProperty(_)&&T[_]!==E[_]&&(l||(l={}),l[_]=E[_])}else l||(m||(m=[]),m.push(A,l)),l=E;else A==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,T=T?T.__html:void 0,E!=null&&T!==E&&(m=m||[]).push(A,E)):A==="children"?typeof E!="string"&&typeof E!="number"||(m=m||[]).push(A,""+E):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(s.hasOwnProperty(A)?(E!=null&&A==="onScroll"&&Fe("scroll",r),m||T===E||(m=[])):(m=m||[]).push(A,E))}l&&(m=m||[]).push("style",l);var A=m;(i.updateQueue=A)&&(i.flags|=4)}},xp=function(r,i,l,h){l!==h&&(i.flags|=4)};function vs(r,i){if(!Ne)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function dt(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,h=0;if(i)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=h,r.childLanes=l,i}function jv(r,i,l){var h=i.pendingProps;switch(bc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(i),null;case 1:return Ct(i.type)&&ko(),dt(i),null;case 3:return h=i.stateNode,fi(),Ie(St),Ie(ut),Nc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(Mo(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Zt!==null&&(pu(Zt),Zt=null))),ru(r,i),dt(i),null;case 5:Fc(i);var p=br(fs.current);if(l=i.type,r!==null&&i.stateNode!=null)_p(r,i,l,h,p),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return dt(i),null}if(r=br(gn.current),Mo(i)){h=i.stateNode,l=i.type;var m=i.memoizedProps;switch(h[pn]=i,h[ls]=m,r=(i.mode&1)!==0,l){case"dialog":Fe("cancel",h),Fe("close",h);break;case"iframe":case"object":case"embed":Fe("load",h);break;case"video":case"audio":for(p=0;p<ss.length;p++)Fe(ss[p],h);break;case"source":Fe("error",h);break;case"img":case"image":case"link":Fe("error",h),Fe("load",h);break;case"details":Fe("toggle",h);break;case"input":Zh(h,m),Fe("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},Fe("invalid",h);break;case"textarea":nd(h,m),Fe("invalid",h)}Il(l,m),p=null;for(var _ in m)if(m.hasOwnProperty(_)){var T=m[_];_==="children"?typeof T=="string"?h.textContent!==T&&(m.suppressHydrationWarning!==!0&&Co(h.textContent,T,r),p=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(m.suppressHydrationWarning!==!0&&Co(h.textContent,T,r),p=["children",""+T]):s.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&Fe("scroll",h)}switch(l){case"input":Zs(h),td(h,m,!0);break;case"textarea":Zs(h),id(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=To)}h=p,i.updateQueue=h,h!==null&&(i.flags|=4)}else{_=p.nodeType===9?p:p.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=sd(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=_.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=_.createElement(l,{is:h.is}):(r=_.createElement(l),l==="select"&&(_=r,h.multiple?_.multiple=!0:h.size&&(_.size=h.size))):r=_.createElementNS(r,l),r[pn]=i,r[ls]=h,vp(r,i,!1,!1),i.stateNode=r;e:{switch(_=Nl(l,h),l){case"dialog":Fe("cancel",r),Fe("close",r),p=h;break;case"iframe":case"object":case"embed":Fe("load",r),p=h;break;case"video":case"audio":for(p=0;p<ss.length;p++)Fe(ss[p],r);p=h;break;case"source":Fe("error",r),p=h;break;case"img":case"image":case"link":Fe("error",r),Fe("load",r),p=h;break;case"details":Fe("toggle",r),p=h;break;case"input":Zh(r,h),p=Rl(r,h),Fe("invalid",r);break;case"option":p=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},p=Q({},h,{value:void 0}),Fe("invalid",r);break;case"textarea":nd(r,h),p=Al(r,h),Fe("invalid",r);break;default:p=h}Il(l,p),T=p;for(m in T)if(T.hasOwnProperty(m)){var E=T[m];m==="style"?ld(r,E):m==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&od(r,E)):m==="children"?typeof E=="string"?(l!=="textarea"||E!=="")&&zi(r,E):typeof E=="number"&&zi(r,""+E):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(s.hasOwnProperty(m)?E!=null&&m==="onScroll"&&Fe("scroll",r):E!=null&&R(r,m,E,_))}switch(l){case"input":Zs(r),td(r,h,!1);break;case"textarea":Zs(r),id(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Oe(h.value));break;case"select":r.multiple=!!h.multiple,m=h.value,m!=null?Gr(r,!!h.multiple,m,!1):h.defaultValue!=null&&Gr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(r.onclick=To)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return dt(i),null;case 6:if(r&&i.stateNode!=null)xp(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(l=br(fs.current),br(gn.current),Mo(i)){if(h=i.stateNode,l=i.memoizedProps,h[pn]=i,(m=h.nodeValue!==l)&&(r=At,r!==null))switch(r.tag){case 3:Co(h.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Co(h.nodeValue,l,(r.mode&1)!==0)}m&&(i.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[pn]=i,i.stateNode=h}return dt(i),null;case 13:if(Ie(ze),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ne&&Ft!==null&&i.mode&1&&!(i.flags&128))Cf(),ci(),i.flags|=98560,m=!1;else if(m=Mo(i),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[pn]=i}else ci(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;dt(i),m=!1}else Zt!==null&&(pu(Zt),Zt=null),m=!0;if(!m)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,i.mode&1&&(r===null||ze.current&1?tt===0&&(tt=3):yu())),i.updateQueue!==null&&(i.flags|=4),dt(i),null);case 4:return fi(),ru(r,i),r===null&&os(i.stateNode.containerInfo),dt(i),null;case 10:return Mc(i.type._context),dt(i),null;case 17:return Ct(i.type)&&ko(),dt(i),null;case 19:if(Ie(ze),m=i.memoizedState,m===null)return dt(i),null;if(h=(i.flags&128)!==0,_=m.rendering,_===null)if(h)vs(m,!1);else{if(tt!==0||r!==null&&r.flags&128)for(r=i.child;r!==null;){if(_=Io(r),_!==null){for(i.flags|=128,vs(m,!1),h=_.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=l,l=i.child;l!==null;)m=l,r=h,m.flags&=14680066,_=m.alternate,_===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=_.childLanes,m.lanes=_.lanes,m.child=_.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=_.memoizedProps,m.memoizedState=_.memoizedState,m.updateQueue=_.updateQueue,m.type=_.type,r=_.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ae(ze,ze.current&1|2),i.child}r=r.sibling}m.tail!==null&&Ge()>yi&&(i.flags|=128,h=!0,vs(m,!1),i.lanes=4194304)}else{if(!h)if(r=Io(_),r!==null){if(i.flags|=128,h=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),vs(m,!0),m.tail===null&&m.tailMode==="hidden"&&!_.alternate&&!Ne)return dt(i),null}else 2*Ge()-m.renderingStartTime>yi&&l!==1073741824&&(i.flags|=128,h=!0,vs(m,!1),i.lanes=4194304);m.isBackwards?(_.sibling=i.child,i.child=_):(l=m.last,l!==null?l.sibling=_:i.child=_,m.last=_)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=Ge(),i.sibling=null,l=ze.current,Ae(ze,h?l&1|2:l&1),i):(dt(i),null);case 22:case 23:return mu(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&i.mode&1?It&1073741824&&(dt(i),i.subtreeFlags&6&&(i.flags|=8192)):dt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function Av(r,i){switch(bc(i),i.tag){case 1:return Ct(i.type)&&ko(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return fi(),Ie(St),Ie(ut),Nc(),r=i.flags,r&65536&&!(r&128)?(i.flags=r&-65537|128,i):null;case 5:return Fc(i),null;case 13:if(Ie(ze),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));ci()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Ie(ze),null;case 4:return fi(),null;case 10:return Mc(i.type._context),null;case 22:case 23:return mu(),null;case 24:return null;default:return null}}var Yo=!1,ft=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,ee=null;function gi(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){$e(r,i,h)}else l.current=null}function iu(r,i,l){try{l()}catch(h){$e(r,i,h)}}var wp=!1;function Iv(r,i){if(mc=ho,r=Jd(),lc(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var _=0,T=-1,E=-1,A=0,H=0,$=r,V=null;t:for(;;){for(var J;$!==l||p!==0&&$.nodeType!==3||(T=_+p),$!==m||h!==0&&$.nodeType!==3||(E=_+h),$.nodeType===3&&(_+=$.nodeValue.length),(J=$.firstChild)!==null;)V=$,$=J;for(;;){if($===r)break t;if(V===l&&++A===p&&(T=_),V===m&&++H===h&&(E=_),(J=$.nextSibling)!==null)break;$=V,V=$.parentNode}$=J}l=T===-1||E===-1?null:{start:T,end:E}}else l=null}l=l||{start:0,end:0}}else l=null;for(yc={focusedElem:r,selectionRange:l},ho=!1,ee=i;ee!==null;)if(i=ee,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,ee=r;else for(;ee!==null;){i=ee;try{var ne=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ne!==null){var re=ne.memoizedProps,qe=ne.memoizedState,L=i.stateNode,D=L.getSnapshotBeforeUpdate(i.elementType===i.type?re:en(i.type,re),qe);L.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var j=i.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(q){$e(i,i.return,q)}if(r=i.sibling,r!==null){r.return=i.return,ee=r;break}ee=i.return}return ne=wp,wp=!1,ne}function _s(r,i,l){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&r)===r){var m=p.destroy;p.destroy=void 0,m!==void 0&&iu(i,l,m)}p=p.next}while(p!==h)}}function $o(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var h=l.create;l.destroy=h()}l=l.next}while(l!==i)}}function su(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Sp(r){var i=r.alternate;i!==null&&(r.alternate=null,Sp(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[pn],delete i[ls],delete i[wc],delete i[_v],delete i[xv])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Cp(r){return r.tag===5||r.tag===3||r.tag===4}function Tp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Cp(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ou(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=To));else if(h!==4&&(r=r.child,r!==null))for(ou(r,i,l),r=r.sibling;r!==null;)ou(r,i,l),r=r.sibling}function au(r,i,l){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(au(r,i,l),r=r.sibling;r!==null;)au(r,i,l),r=r.sibling}var at=null,tn=!1;function sr(r,i,l){for(l=l.child;l!==null;)bp(r,i,l),l=l.sibling}function bp(r,i,l){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(so,l)}catch{}switch(l.tag){case 5:ft||gi(l,i);case 6:var h=at,p=tn;at=null,sr(r,i,l),at=h,tn=p,at!==null&&(tn?(r=at,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):at.removeChild(l.stateNode));break;case 18:at!==null&&(tn?(r=at,l=l.stateNode,r.nodeType===8?xc(r.parentNode,l):r.nodeType===1&&xc(r,l),Qi(r)):xc(at,l.stateNode));break;case 4:h=at,p=tn,at=l.stateNode.containerInfo,tn=!0,sr(r,i,l),at=h,tn=p;break;case 0:case 11:case 14:case 15:if(!ft&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var m=p,_=m.destroy;m=m.tag,_!==void 0&&(m&2||m&4)&&iu(l,i,_),p=p.next}while(p!==h)}sr(r,i,l);break;case 1:if(!ft&&(gi(l,i),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(T){$e(l,i,T)}sr(r,i,l);break;case 21:sr(r,i,l);break;case 22:l.mode&1?(ft=(h=ft)||l.memoizedState!==null,sr(r,i,l),ft=h):sr(r,i,l);break;default:sr(r,i,l)}}function kp(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new Fv),i.forEach(function(h){var p=Yv.bind(null,r,h);l.has(h)||(l.add(h),h.then(p,p))})}}function nn(r,i){var l=i.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var m=r,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 5:at=T.stateNode,tn=!1;break e;case 3:at=T.stateNode.containerInfo,tn=!0;break e;case 4:at=T.stateNode.containerInfo,tn=!0;break e}T=T.return}if(at===null)throw Error(t(160));bp(m,_,p),at=null,tn=!1;var E=p.alternate;E!==null&&(E.return=null),p.return=null}catch(A){$e(p,i,A)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Ep(i,r),i=i.sibling}function Ep(r,i){var l=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(nn(i,r),yn(r),h&4){try{_s(3,r,r.return),$o(3,r)}catch(re){$e(r,r.return,re)}try{_s(5,r,r.return)}catch(re){$e(r,r.return,re)}}break;case 1:nn(i,r),yn(r),h&512&&l!==null&&gi(l,l.return);break;case 5:if(nn(i,r),yn(r),h&512&&l!==null&&gi(l,l.return),r.flags&32){var p=r.stateNode;try{zi(p,"")}catch(re){$e(r,r.return,re)}}if(h&4&&(p=r.stateNode,p!=null)){var m=r.memoizedProps,_=l!==null?l.memoizedProps:m,T=r.type,E=r.updateQueue;if(r.updateQueue=null,E!==null)try{T==="input"&&m.type==="radio"&&m.name!=null&&ed(p,m),Nl(T,_);var A=Nl(T,m);for(_=0;_<E.length;_+=2){var H=E[_],$=E[_+1];H==="style"?ld(p,$):H==="dangerouslySetInnerHTML"?od(p,$):H==="children"?zi(p,$):R(p,H,$,A)}switch(T){case"input":Ll(p,m);break;case"textarea":rd(p,m);break;case"select":var V=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!m.multiple;var J=m.value;J!=null?Gr(p,!!m.multiple,J,!1):V!==!!m.multiple&&(m.defaultValue!=null?Gr(p,!!m.multiple,m.defaultValue,!0):Gr(p,!!m.multiple,m.multiple?[]:"",!1))}p[ls]=m}catch(re){$e(r,r.return,re)}}break;case 6:if(nn(i,r),yn(r),h&4){if(r.stateNode===null)throw Error(t(162));p=r.stateNode,m=r.memoizedProps;try{p.nodeValue=m}catch(re){$e(r,r.return,re)}}break;case 3:if(nn(i,r),yn(r),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Qi(i.containerInfo)}catch(re){$e(r,r.return,re)}break;case 4:nn(i,r),yn(r);break;case 13:nn(i,r),yn(r),p=r.child,p.flags&8192&&(m=p.memoizedState!==null,p.stateNode.isHidden=m,!m||p.alternate!==null&&p.alternate.memoizedState!==null||(uu=Ge())),h&4&&kp(r);break;case 22:if(H=l!==null&&l.memoizedState!==null,r.mode&1?(ft=(A=ft)||H,nn(i,r),ft=A):nn(i,r),yn(r),h&8192){if(A=r.memoizedState!==null,(r.stateNode.isHidden=A)&&!H&&r.mode&1)for(ee=r,H=r.child;H!==null;){for($=ee=H;ee!==null;){switch(V=ee,J=V.child,V.tag){case 0:case 11:case 14:case 15:_s(4,V,V.return);break;case 1:gi(V,V.return);var ne=V.stateNode;if(typeof ne.componentWillUnmount=="function"){h=V,l=V.return;try{i=h,ne.props=i.memoizedProps,ne.state=i.memoizedState,ne.componentWillUnmount()}catch(re){$e(h,l,re)}}break;case 5:gi(V,V.return);break;case 22:if(V.memoizedState!==null){Pp($);continue}}J!==null?(J.return=V,ee=J):Pp($)}H=H.sibling}e:for(H=null,$=r;;){if($.tag===5){if(H===null){H=$;try{p=$.stateNode,A?(m=p.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(T=$.stateNode,E=$.memoizedProps.style,_=E!=null&&E.hasOwnProperty("display")?E.display:null,T.style.display=ad("display",_))}catch(re){$e(r,r.return,re)}}}else if($.tag===6){if(H===null)try{$.stateNode.nodeValue=A?"":$.memoizedProps}catch(re){$e(r,r.return,re)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===r)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===r)break e;for(;$.sibling===null;){if($.return===null||$.return===r)break e;H===$&&(H=null),$=$.return}H===$&&(H=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:nn(i,r),yn(r),h&4&&kp(r);break;case 21:break;default:nn(i,r),yn(r)}}function yn(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(Cp(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(zi(p,""),h.flags&=-33);var m=Tp(r);au(r,m,p);break;case 3:case 4:var _=h.stateNode.containerInfo,T=Tp(r);ou(r,T,_);break;default:throw Error(t(161))}}catch(E){$e(r,r.return,E)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function Nv(r,i,l){ee=r,Op(r)}function Op(r,i,l){for(var h=(r.mode&1)!==0;ee!==null;){var p=ee,m=p.child;if(p.tag===22&&h){var _=p.memoizedState!==null||Yo;if(!_){var T=p.alternate,E=T!==null&&T.memoizedState!==null||ft;T=Yo;var A=ft;if(Yo=_,(ft=E)&&!A)for(ee=p;ee!==null;)_=ee,E=_.child,_.tag===22&&_.memoizedState!==null?Mp(p):E!==null?(E.return=_,ee=E):Mp(p);for(;m!==null;)ee=m,Op(m),m=m.sibling;ee=p,Yo=T,ft=A}Dp(r)}else p.subtreeFlags&8772&&m!==null?(m.return=p,ee=m):Dp(r)}}function Dp(r){for(;ee!==null;){var i=ee;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:ft||$o(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!ft)if(l===null)h.componentDidMount();else{var p=i.elementType===i.type?l.memoizedProps:en(i.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&Pf(i,m,h);break;case 3:var _=i.updateQueue;if(_!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Pf(i,_,l)}break;case 5:var T=i.stateNode;if(l===null&&i.flags&4){l=T;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&l.focus();break;case"img":E.src&&(l.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var A=i.alternate;if(A!==null){var H=A.memoizedState;if(H!==null){var $=H.dehydrated;$!==null&&Qi($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ft||i.flags&512&&su(i)}catch(V){$e(i,i.return,V)}}if(i===r){ee=null;break}if(l=i.sibling,l!==null){l.return=i.return,ee=l;break}ee=i.return}}function Pp(r){for(;ee!==null;){var i=ee;if(i===r){ee=null;break}var l=i.sibling;if(l!==null){l.return=i.return,ee=l;break}ee=i.return}}function Mp(r){for(;ee!==null;){var i=ee;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{$o(4,i)}catch(E){$e(i,l,E)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var p=i.return;try{h.componentDidMount()}catch(E){$e(i,p,E)}}var m=i.return;try{su(i)}catch(E){$e(i,m,E)}break;case 5:var _=i.return;try{su(i)}catch(E){$e(i,_,E)}}}catch(E){$e(i,i.return,E)}if(i===r){ee=null;break}var T=i.sibling;if(T!==null){T.return=i.return,ee=T;break}ee=i.return}}var Bv=Math.ceil,Go=N.ReactCurrentDispatcher,lu=N.ReactCurrentOwner,Xt=N.ReactCurrentBatchConfig,Se=0,st=null,Je=null,lt=0,It=0,mi=er(0),tt=0,xs=null,Er=0,qo=0,cu=0,ws=null,bt=null,uu=0,yi=1/0,Rn=null,Ko=!1,hu=null,or=null,Qo=!1,ar=null,Jo=0,Ss=0,du=null,Zo=-1,ea=0;function yt(){return Se&6?Ge():Zo!==-1?Zo:Zo=Ge()}function lr(r){return r.mode&1?Se&2&&lt!==0?lt&-lt:Sv.transition!==null?(ea===0&&(ea=Cd()),ea):(r=Me,r!==0||(r=window.event,r=r===void 0?16:Rd(r.type)),r):1}function rn(r,i,l,h){if(50<Ss)throw Ss=0,du=null,Error(t(185));Yi(r,l,h),(!(Se&2)||r!==st)&&(r===st&&(!(Se&2)&&(qo|=l),tt===4&&cr(r,lt)),kt(r,h),l===1&&Se===0&&!(i.mode&1)&&(yi=Ge()+500,Oo&&nr()))}function kt(r,i){var l=r.callbackNode;Sy(r,i);var h=lo(r,r===st?lt:0);if(h===0)l!==null&&xd(l),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(l!=null&&xd(l),i===1)r.tag===0?wv(Lp.bind(null,r)):vf(Lp.bind(null,r)),yv(function(){!(Se&6)&&nr()}),l=null;else{switch(Td(h)){case 1:l=Xl;break;case 4:l=wd;break;case 16:l=io;break;case 536870912:l=Sd;break;default:l=io}l=Wp(l,Rp.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function Rp(r,i){if(Zo=-1,ea=0,Se&6)throw Error(t(327));var l=r.callbackNode;if(vi()&&r.callbackNode!==l)return null;var h=lo(r,r===st?lt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||i)i=ta(r,h);else{i=h;var p=Se;Se|=2;var m=Ap();(st!==r||lt!==i)&&(Rn=null,yi=Ge()+500,Dr(r,i));do try{Uv();break}catch(T){jp(r,T)}while(!0);Pc(),Go.current=m,Se=p,Je!==null?i=0:(st=null,lt=0,i=tt)}if(i!==0){if(i===2&&(p=Yl(r),p!==0&&(h=p,i=fu(r,p))),i===1)throw l=xs,Dr(r,0),cr(r,h),kt(r,Ge()),l;if(i===6)cr(r,h);else{if(p=r.current.alternate,!(h&30)&&!zv(p)&&(i=ta(r,h),i===2&&(m=Yl(r),m!==0&&(h=m,i=fu(r,m))),i===1))throw l=xs,Dr(r,0),cr(r,h),kt(r,Ge()),l;switch(r.finishedWork=p,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Pr(r,bt,Rn);break;case 3:if(cr(r,h),(h&130023424)===h&&(i=uu+500-Ge(),10<i)){if(lo(r,0)!==0)break;if(p=r.suspendedLanes,(p&h)!==h){yt(),r.pingedLanes|=r.suspendedLanes&p;break}r.timeoutHandle=_c(Pr.bind(null,r,bt,Rn),i);break}Pr(r,bt,Rn);break;case 4:if(cr(r,h),(h&4194240)===h)break;for(i=r.eventTimes,p=-1;0<h;){var _=31-Qt(h);m=1<<_,_=i[_],_>p&&(p=_),h&=~m}if(h=p,h=Ge()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Bv(h/1960))-h,10<h){r.timeoutHandle=_c(Pr.bind(null,r,bt,Rn),h);break}Pr(r,bt,Rn);break;case 5:Pr(r,bt,Rn);break;default:throw Error(t(329))}}}return kt(r,Ge()),r.callbackNode===l?Rp.bind(null,r):null}function fu(r,i){var l=ws;return r.current.memoizedState.isDehydrated&&(Dr(r,i).flags|=256),r=ta(r,i),r!==2&&(i=bt,bt=l,i!==null&&pu(i)),r}function pu(r){bt===null?bt=r:bt.push.apply(bt,r)}function zv(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],m=p.getSnapshot;p=p.value;try{if(!Jt(m(),p))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function cr(r,i){for(i&=~cu,i&=~qo,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-Qt(i),h=1<<l;r[l]=-1,i&=~h}}function Lp(r){if(Se&6)throw Error(t(327));vi();var i=lo(r,0);if(!(i&1))return kt(r,Ge()),null;var l=ta(r,i);if(r.tag!==0&&l===2){var h=Yl(r);h!==0&&(i=h,l=fu(r,h))}if(l===1)throw l=xs,Dr(r,0),cr(r,i),kt(r,Ge()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Pr(r,bt,Rn),kt(r,Ge()),null}function gu(r,i){var l=Se;Se|=1;try{return r(i)}finally{Se=l,Se===0&&(yi=Ge()+500,Oo&&nr())}}function Or(r){ar!==null&&ar.tag===0&&!(Se&6)&&vi();var i=Se;Se|=1;var l=Xt.transition,h=Me;try{if(Xt.transition=null,Me=1,r)return r()}finally{Me=h,Xt.transition=l,Se=i,!(Se&6)&&nr()}}function mu(){It=mi.current,Ie(mi)}function Dr(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,mv(l)),Je!==null)for(l=Je.return;l!==null;){var h=l;switch(bc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ko();break;case 3:fi(),Ie(St),Ie(ut),Nc();break;case 5:Fc(h);break;case 4:fi();break;case 13:Ie(ze);break;case 19:Ie(ze);break;case 10:Mc(h.type._context);break;case 22:case 23:mu()}l=l.return}if(st=r,Je=r=ur(r.current,null),lt=It=i,tt=0,xs=null,cu=qo=Er=0,bt=ws=null,Tr!==null){for(i=0;i<Tr.length;i++)if(l=Tr[i],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,m=l.pending;if(m!==null){var _=m.next;m.next=p,h.next=_}l.pending=h}Tr=null}return r}function jp(r,i){do{var l=Je;try{if(Pc(),No.current=Uo,Bo){for(var h=We.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}Bo=!1}if(kr=0,it=et=We=null,ps=!1,gs=0,lu.current=null,l===null||l.return===null){tt=1,xs=i,Je=null;break}e:{var m=r,_=l.return,T=l,E=i;if(i=lt,T.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var A=E,H=T,$=H.tag;if(!(H.mode&1)&&($===0||$===11||$===15)){var V=H.alternate;V?(H.updateQueue=V.updateQueue,H.memoizedState=V.memoizedState,H.lanes=V.lanes):(H.updateQueue=null,H.memoizedState=null)}var J=sp(_);if(J!==null){J.flags&=-257,op(J,_,T,m,i),J.mode&1&&ip(m,A,i),i=J,E=A;var ne=i.updateQueue;if(ne===null){var re=new Set;re.add(E),i.updateQueue=re}else ne.add(E);break e}else{if(!(i&1)){ip(m,A,i),yu();break e}E=Error(t(426))}}else if(Ne&&T.mode&1){var qe=sp(_);if(qe!==null){!(qe.flags&65536)&&(qe.flags|=256),op(qe,_,T,m,i),Oc(pi(E,T));break e}}m=E=pi(E,T),tt!==4&&(tt=2),ws===null?ws=[m]:ws.push(m),m=_;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var L=np(m,E,i);Df(m,L);break e;case 1:T=E;var D=m.type,j=m.stateNode;if(!(m.flags&128)&&(typeof D.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(or===null||!or.has(j)))){m.flags|=65536,i&=-i,m.lanes|=i;var q=rp(m,T,i);Df(m,q);break e}}m=m.return}while(m!==null)}Ip(l)}catch(se){i=se,Je===l&&l!==null&&(Je=l=l.return);continue}break}while(!0)}function Ap(){var r=Go.current;return Go.current=Uo,r===null?Uo:r}function yu(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!(Er&268435455)&&!(qo&268435455)||cr(st,lt)}function ta(r,i){var l=Se;Se|=2;var h=Ap();(st!==r||lt!==i)&&(Rn=null,Dr(r,i));do try{Wv();break}catch(p){jp(r,p)}while(!0);if(Pc(),Se=l,Go.current=h,Je!==null)throw Error(t(261));return st=null,lt=0,tt}function Wv(){for(;Je!==null;)Fp(Je)}function Uv(){for(;Je!==null&&!fy();)Fp(Je)}function Fp(r){var i=zp(r.alternate,r,It);r.memoizedProps=r.pendingProps,i===null?Ip(r):Je=i,lu.current=null}function Ip(r){var i=r;do{var l=i.alternate;if(r=i.return,i.flags&32768){if(l=Av(l,i),l!==null){l.flags&=32767,Je=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{tt=6,Je=null;return}}else if(l=jv(l,i,It),l!==null){Je=l;return}if(i=i.sibling,i!==null){Je=i;return}Je=i=r}while(i!==null);tt===0&&(tt=5)}function Pr(r,i,l){var h=Me,p=Xt.transition;try{Xt.transition=null,Me=1,Vv(r,i,l,h)}finally{Xt.transition=p,Me=h}return null}function Vv(r,i,l,h){do vi();while(ar!==null);if(Se&6)throw Error(t(327));l=r.finishedWork;var p=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=l.lanes|l.childLanes;if(Cy(r,m),r===st&&(Je=st=null,lt=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Qo||(Qo=!0,Wp(io,function(){return vi(),null})),m=(l.flags&15990)!==0,l.subtreeFlags&15990||m){m=Xt.transition,Xt.transition=null;var _=Me;Me=1;var T=Se;Se|=4,lu.current=null,Iv(r,l),Ep(l,r),cv(yc),ho=!!mc,yc=mc=null,r.current=l,Nv(l),py(),Se=T,Me=_,Xt.transition=m}else r.current=l;if(Qo&&(Qo=!1,ar=r,Jo=p),m=r.pendingLanes,m===0&&(or=null),yy(l.stateNode),kt(r,Ge()),i!==null)for(h=r.onRecoverableError,l=0;l<i.length;l++)p=i[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Ko)throw Ko=!1,r=hu,hu=null,r;return Jo&1&&r.tag!==0&&vi(),m=r.pendingLanes,m&1?r===du?Ss++:(Ss=0,du=r):Ss=0,nr(),null}function vi(){if(ar!==null){var r=Td(Jo),i=Xt.transition,l=Me;try{if(Xt.transition=null,Me=16>r?16:r,ar===null)var h=!1;else{if(r=ar,ar=null,Jo=0,Se&6)throw Error(t(331));var p=Se;for(Se|=4,ee=r.current;ee!==null;){var m=ee,_=m.child;if(ee.flags&16){var T=m.deletions;if(T!==null){for(var E=0;E<T.length;E++){var A=T[E];for(ee=A;ee!==null;){var H=ee;switch(H.tag){case 0:case 11:case 15:_s(8,H,m)}var $=H.child;if($!==null)$.return=H,ee=$;else for(;ee!==null;){H=ee;var V=H.sibling,J=H.return;if(Sp(H),H===A){ee=null;break}if(V!==null){V.return=J,ee=V;break}ee=J}}}var ne=m.alternate;if(ne!==null){var re=ne.child;if(re!==null){ne.child=null;do{var qe=re.sibling;re.sibling=null,re=qe}while(re!==null)}}ee=m}}if(m.subtreeFlags&2064&&_!==null)_.return=m,ee=_;else e:for(;ee!==null;){if(m=ee,m.flags&2048)switch(m.tag){case 0:case 11:case 15:_s(9,m,m.return)}var L=m.sibling;if(L!==null){L.return=m.return,ee=L;break e}ee=m.return}}var D=r.current;for(ee=D;ee!==null;){_=ee;var j=_.child;if(_.subtreeFlags&2064&&j!==null)j.return=_,ee=j;else e:for(_=D;ee!==null;){if(T=ee,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:$o(9,T)}}catch(se){$e(T,T.return,se)}if(T===_){ee=null;break e}var q=T.sibling;if(q!==null){q.return=T.return,ee=q;break e}ee=T.return}}if(Se=p,nr(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(so,r)}catch{}h=!0}return h}finally{Me=l,Xt.transition=i}}return!1}function Np(r,i,l){i=pi(l,i),i=np(r,i,1),r=ir(r,i,1),i=yt(),r!==null&&(Yi(r,1,i),kt(r,i))}function $e(r,i,l){if(r.tag===3)Np(r,r,l);else for(;i!==null;){if(i.tag===3){Np(i,r,l);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(or===null||!or.has(h))){r=pi(l,r),r=rp(i,r,1),i=ir(i,r,1),r=yt(),i!==null&&(Yi(i,1,r),kt(i,r));break}}i=i.return}}function Hv(r,i,l){var h=r.pingCache;h!==null&&h.delete(i),i=yt(),r.pingedLanes|=r.suspendedLanes&l,st===r&&(lt&l)===l&&(tt===4||tt===3&&(lt&130023424)===lt&&500>Ge()-uu?Dr(r,0):cu|=l),kt(r,i)}function Bp(r,i){i===0&&(r.mode&1?(i=ao,ao<<=1,!(ao&130023424)&&(ao=4194304)):i=1);var l=yt();r=Dn(r,i),r!==null&&(Yi(r,i,l),kt(r,l))}function Xv(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),Bp(r,l)}function Yv(r,i){var l=0;switch(r.tag){case 13:var h=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),Bp(r,l)}var zp;zp=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||St.current)Tt=!0;else{if(!(r.lanes&l)&&!(i.flags&128))return Tt=!1,Lv(r,i,l);Tt=!!(r.flags&131072)}else Tt=!1,Ne&&i.flags&1048576&&_f(i,Po,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;Xo(r,i),r=i.pendingProps;var p=oi(i,ut.current);di(i,l),p=Wc(null,i,h,r,p,l);var m=Uc();return i.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Ct(h)?(m=!0,Eo(i)):m=!1,i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,jc(i),p.updater=Vo,i.stateNode=p,p._reactInternals=i,Gc(i,h,r,l),i=Jc(null,i,h,!0,m,l)):(i.tag=0,Ne&&m&&Tc(i),mt(null,i,p,l),i=i.child),i;case 16:h=i.elementType;e:{switch(Xo(r,i),r=i.pendingProps,p=h._init,h=p(h._payload),i.type=h,p=i.tag=Gv(h),r=en(h,r),p){case 0:i=Qc(null,i,h,r,l);break e;case 1:i=dp(null,i,h,r,l);break e;case 11:i=ap(null,i,h,r,l);break e;case 14:i=lp(null,i,h,en(h.type,r),l);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:en(h,p),Qc(r,i,h,p,l);case 1:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:en(h,p),dp(r,i,h,p,l);case 3:e:{if(fp(i),r===null)throw Error(t(387));h=i.pendingProps,m=i.memoizedState,p=m.element,Of(r,i),Fo(i,h,null,l);var _=i.memoizedState;if(h=_.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){p=pi(Error(t(423)),i),i=pp(r,i,h,l,p);break e}else if(h!==p){p=pi(Error(t(424)),i),i=pp(r,i,h,l,p);break e}else for(Ft=Zn(i.stateNode.containerInfo.firstChild),At=i,Ne=!0,Zt=null,l=kf(i,null,h,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ci(),h===p){i=Mn(r,i,l);break e}mt(r,i,h,l)}i=i.child}return i;case 5:return Mf(i),r===null&&Ec(i),h=i.type,p=i.pendingProps,m=r!==null?r.memoizedProps:null,_=p.children,vc(h,p)?_=null:m!==null&&vc(h,m)&&(i.flags|=32),hp(r,i),mt(r,i,_,l),i.child;case 6:return r===null&&Ec(i),null;case 13:return gp(r,i,l);case 4:return Ac(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=ui(i,null,h,l):mt(r,i,h,l),i.child;case 11:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:en(h,p),ap(r,i,h,p,l);case 7:return mt(r,i,i.pendingProps,l),i.child;case 8:return mt(r,i,i.pendingProps.children,l),i.child;case 12:return mt(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(h=i.type._context,p=i.pendingProps,m=i.memoizedProps,_=p.value,Ae(Lo,h._currentValue),h._currentValue=_,m!==null)if(Jt(m.value,_)){if(m.children===p.children&&!St.current){i=Mn(r,i,l);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var T=m.dependencies;if(T!==null){_=m.child;for(var E=T.firstContext;E!==null;){if(E.context===h){if(m.tag===1){E=Pn(-1,l&-l),E.tag=2;var A=m.updateQueue;if(A!==null){A=A.shared;var H=A.pending;H===null?E.next=E:(E.next=H.next,H.next=E),A.pending=E}}m.lanes|=l,E=m.alternate,E!==null&&(E.lanes|=l),Rc(m.return,l,i),T.lanes|=l;break}E=E.next}}else if(m.tag===10)_=m.type===i.type?null:m.child;else if(m.tag===18){if(_=m.return,_===null)throw Error(t(341));_.lanes|=l,T=_.alternate,T!==null&&(T.lanes|=l),Rc(_,l,i),_=m.sibling}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===i){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}mt(r,i,p.children,l),i=i.child}return i;case 9:return p=i.type,h=i.pendingProps.children,di(i,l),p=Vt(p),h=h(p),i.flags|=1,mt(r,i,h,l),i.child;case 14:return h=i.type,p=en(h,i.pendingProps),p=en(h.type,p),lp(r,i,h,p,l);case 15:return cp(r,i,i.type,i.pendingProps,l);case 17:return h=i.type,p=i.pendingProps,p=i.elementType===h?p:en(h,p),Xo(r,i),i.tag=1,Ct(h)?(r=!0,Eo(i)):r=!1,di(i,l),ep(i,h,p),Gc(i,h,p,l),Jc(null,i,h,!0,r,l);case 19:return yp(r,i,l);case 22:return up(r,i,l)}throw Error(t(156,i.tag))};function Wp(r,i){return _d(r,i)}function $v(r,i,l,h){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(r,i,l,h){return new $v(r,i,l,h)}function vu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Gv(r){if(typeof r=="function")return vu(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ge)return 11;if(r===je)return 14}return 2}function ur(r,i){var l=r.alternate;return l===null?(l=Yt(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function na(r,i,l,h,p,m){var _=2;if(h=r,typeof r=="function")vu(r)&&(_=1);else if(typeof r=="string")_=5;else e:switch(r){case X:return Mr(l.children,p,m,i);case W:_=8,p|=8;break;case te:return r=Yt(12,l,i,p|2),r.elementType=te,r.lanes=m,r;case ce:return r=Yt(13,l,i,p),r.elementType=ce,r.lanes=m,r;case we:return r=Yt(19,l,i,p),r.elementType=we,r.lanes=m,r;case ve:return ra(l,p,m,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case oe:_=10;break e;case pe:_=9;break e;case ge:_=11;break e;case je:_=14;break e;case Te:_=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Yt(_,l,i,p),i.elementType=r,i.type=h,i.lanes=m,i}function Mr(r,i,l,h){return r=Yt(7,r,h,i),r.lanes=l,r}function ra(r,i,l,h){return r=Yt(22,r,h,i),r.elementType=ve,r.lanes=l,r.stateNode={isHidden:!1},r}function _u(r,i,l){return r=Yt(6,r,null,i),r.lanes=l,r}function xu(r,i,l){return i=Yt(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function qv(r,i,l,h,p){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function wu(r,i,l,h,p,m,_,T,E){return r=new qv(r,i,l,T,E),i===1?(i=1,m===!0&&(i|=8)):i=0,m=Yt(3,null,null,i),r.current=m,m.stateNode=r,m.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},jc(m),r}function Kv(r,i,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:h==null?null:""+h,children:r,containerInfo:i,implementation:l}}function Up(r){if(!r)return tr;r=r._reactInternals;e:{if(_r(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Ct(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(Ct(l))return mf(r,l,i)}return i}function Vp(r,i,l,h,p,m,_,T,E){return r=wu(l,h,!0,r,p,m,_,T,E),r.context=Up(null),l=r.current,h=yt(),p=lr(l),m=Pn(h,p),m.callback=i??null,ir(l,m,p),r.current.lanes=p,Yi(r,p,h),kt(r,h),r}function ia(r,i,l,h){var p=i.current,m=yt(),_=lr(p);return l=Up(l),i.context===null?i.context=l:i.pendingContext=l,i=Pn(m,_),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=ir(p,i,_),r!==null&&(rn(r,p,_,m),Ao(r,p,_)),_}function sa(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Hp(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function Su(r,i){Hp(r,i),(r=r.alternate)&&Hp(r,i)}var Xp=typeof reportError=="function"?reportError:function(r){console.error(r)};function Cu(r){this._internalRoot=r}oa.prototype.render=Cu.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));ia(r,i,null,null)},oa.prototype.unmount=Cu.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Or(function(){ia(null,r,null,null)}),i[bn]=null}};function oa(r){this._internalRoot=r}oa.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ed();r={blockedOn:null,target:r,priority:i};for(var l=0;l<Kn.length&&i!==0&&i<Kn[l].priority;l++);Kn.splice(l,0,r),l===0&&Pd(r)}};function Tu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function aa(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Yp(){}function Qv(r,i,l,h,p){if(p){if(typeof h=="function"){var m=h;h=function(){var A=sa(_);m.call(A)}}var _=Vp(i,h,r,0,null,!1,!1,"",Yp);return r._reactRootContainer=_,r[bn]=_.current,os(r.nodeType===8?r.parentNode:r),Or(),_}for(;p=r.lastChild;)r.removeChild(p);if(typeof h=="function"){var T=h;h=function(){var A=sa(E);T.call(A)}}var E=wu(r,0,!1,null,null,!1,!1,"",Yp);return r._reactRootContainer=E,r[bn]=E.current,os(r.nodeType===8?r.parentNode:r),Or(function(){ia(i,E,l,h)}),E}function la(r,i,l,h,p){var m=l._reactRootContainer;if(m){var _=m;if(typeof p=="function"){var T=p;p=function(){var E=sa(_);T.call(E)}}ia(i,_,r,p)}else _=Qv(l,i,r,p,h);return sa(_)}bd=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=Xi(i.pendingLanes);l!==0&&(Gl(i,l|1),kt(i,Ge()),!(Se&6)&&(yi=Ge()+500,nr()))}break;case 13:Or(function(){var h=Dn(r,1);if(h!==null){var p=yt();rn(h,r,1,p)}}),Su(r,1)}},ql=function(r){if(r.tag===13){var i=Dn(r,134217728);if(i!==null){var l=yt();rn(i,r,134217728,l)}Su(r,134217728)}},kd=function(r){if(r.tag===13){var i=lr(r),l=Dn(r,i);if(l!==null){var h=yt();rn(l,r,i,h)}Su(r,i)}},Ed=function(){return Me},Od=function(r,i){var l=Me;try{return Me=r,i()}finally{Me=l}},Wl=function(r,i,l){switch(i){case"input":if(Ll(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var h=l[i];if(h!==r&&h.form===r.form){var p=bo(h);if(!p)throw Error(t(90));Jh(h),Ll(h,p)}}}break;case"textarea":rd(r,l);break;case"select":i=l.value,i!=null&&Gr(r,!!l.multiple,i,!1)}},dd=gu,fd=Or;var Jv={usingClientEntryPoint:!1,Events:[cs,ii,bo,ud,hd,gu]},Cs={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zv={bundleType:Cs.bundleType,version:Cs.version,rendererPackageName:Cs.rendererPackageName,rendererConfig:Cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=yd(r),r===null?null:r.stateNode},findFiberByHostInstance:Cs.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{so=ca.inject(Zv),fn=ca}catch{}}return Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jv,Et.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tu(i))throw Error(t(200));return Kv(r,i,null,l)},Et.createRoot=function(r,i){if(!Tu(r))throw Error(t(299));var l=!1,h="",p=Xp;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),i=wu(r,1,!1,null,null,l,!1,h,p),r[bn]=i.current,os(r.nodeType===8?r.parentNode:r),new Cu(i)},Et.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=yd(i),r=r===null?null:r.stateNode,r},Et.flushSync=function(r){return Or(r)},Et.hydrate=function(r,i,l){if(!aa(i))throw Error(t(200));return la(null,r,i,!0,l)},Et.hydrateRoot=function(r,i,l){if(!Tu(r))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,m="",_=Xp;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),i=Vp(i,null,r,1,l??null,p,!1,m,_),r[bn]=i.current,os(r),h)for(r=0;r<h.length;r++)l=h[r],p=l._getVersion,p=p(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,p]:i.mutableSourceEagerHydrationData.push(l,p);return new oa(i)},Et.render=function(r,i,l){if(!aa(i))throw Error(t(200));return la(null,r,i,!1,l)},Et.unmountComponentAtNode=function(r){if(!aa(r))throw Error(t(40));return r._reactRootContainer?(Or(function(){la(null,null,r,!1,function(){r._reactRootContainer=null,r[bn]=null})}),!0):!1},Et.unstable_batchedUpdates=gu,Et.unstable_renderSubtreeIntoContainer=function(r,i,l,h){if(!aa(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return la(r,i,l,!1,h)},Et.version="18.3.1-next-f1338f8080-20240426",Et}var eg;function l1(){if(eg)return Eu.exports;eg=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Eu.exports=a1(),Eu.exports}var tg;function c1(){if(tg)return ua;tg=1;var o=l1();return ua.createRoot=o.createRoot,ua.hydrateRoot=o.hydrateRoot,ua}var u1=c1(),bs={},ng;function h1(){if(ng)return bs;ng=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.parse=c,bs.serialize=f;const o=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function c(v,w){const x=new a,S=v.length;if(S<2)return x;const C=(w==null?void 0:w.decode)||g;let b=0;do{const k=v.indexOf("=",b);if(k===-1)break;const R=v.indexOf(";",b),N=R===-1?S:R;if(k>N){b=v.lastIndexOf(";",k-1)+1;continue}const z=u(v,b,k),G=d(v,k,z),X=v.slice(z,G);if(x[X]===void 0){let W=u(v,k+1,N),te=d(v,N,W);const oe=C(v.slice(W,te));x[X]=oe}b=N+1}while(b<S);return x}function u(v,w,x){do{const S=v.charCodeAt(w);if(S!==32&&S!==9)return w}while(++w<x);return x}function d(v,w,x){for(;w>x;){const S=v.charCodeAt(--w);if(S!==32&&S!==9)return w+1}return x}function f(v,w,x){const S=(x==null?void 0:x.encode)||encodeURIComponent;if(!o.test(v))throw new TypeError(`argument name is invalid: ${v}`);const C=S(w);if(!e.test(C))throw new TypeError(`argument val is invalid: ${w}`);let b=v+"="+C;if(!x)return b;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError(`option maxAge is invalid: ${x.maxAge}`);b+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError(`option domain is invalid: ${x.domain}`);b+="; Domain="+x.domain}if(x.path){if(!n.test(x.path))throw new TypeError(`option path is invalid: ${x.path}`);b+="; Path="+x.path}if(x.expires){if(!y(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError(`option expires is invalid: ${x.expires}`);b+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(b+="; HttpOnly"),x.secure&&(b+="; Secure"),x.partitioned&&(b+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${x.priority}`)}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${x.sameSite}`)}return b}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function y(v){return s.call(v)==="[object Date]"}return bs}h1();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rg="popstate";function d1(o={}){function e(n,s){let{pathname:a,search:c,hash:u}=n.location;return qu("",{pathname:a,search:c,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:js(s)}return p1(e,t,null,o)}function Xe(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}function wn(o,e){if(!o){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f1(){return Math.random().toString(36).substring(2,10)}function ig(o,e){return{usr:o.state,key:o.key,idx:e}}function qu(o,e,t=null,n){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof e=="string"?Di(e):e,state:t,key:e&&e.key||n||f1()}}function js({pathname:o="/",search:e="",hash:t=""}){return e&&e!=="?"&&(o+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(o+=t.charAt(0)==="#"?t:"#"+t),o}function Di(o){let e={};if(o){let t=o.indexOf("#");t>=0&&(e.hash=o.substring(t),o=o.substring(0,t));let n=o.indexOf("?");n>=0&&(e.search=o.substring(n),o=o.substring(0,n)),o&&(e.pathname=o)}return e}function p1(o,e,t,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,c=s.history,u="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){u="POP";let C=g(),b=C==null?null:C-f;f=C,d&&d({action:u,location:S.location,delta:b})}function v(C,b){u="PUSH";let k=qu(S.location,C,b);f=g()+1;let R=ig(k,f),N=S.createHref(k);try{c.pushState(R,"",N)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(N)}a&&d&&d({action:u,location:S.location,delta:1})}function w(C,b){u="REPLACE";let k=qu(S.location,C,b);f=g();let R=ig(k,f),N=S.createHref(k);c.replaceState(R,"",N),a&&d&&d({action:u,location:S.location,delta:0})}function x(C){let b=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof C=="string"?C:js(C);return k=k.replace(/ $/,"%20"),Xe(b,`No window.location.(origin|href) available to create URL for href: ${k}`),new URL(k,b)}let S={get action(){return u},get location(){return o(s,c)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(rg,y),d=C,()=>{s.removeEventListener(rg,y),d=null}},createHref(C){return e(s,C)},createURL:x,encodeLocation(C){let b=x(C);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:w,go(C){return c.go(C)}};return S}function lm(o,e,t="/"){return g1(o,e,t,!1)}function g1(o,e,t,n){let s=typeof e=="string"?Di(e):e,a=pr(s.pathname||"/",t);if(a==null)return null;let c=cm(o);m1(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let f=E1(a);u=b1(c[d],f,n)}return u}function cm(o,e=[],t=[],n=""){let s=(a,c,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(Xe(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length));let f=Nn([n,d.relativePath]),g=t.concat(d);a.children&&a.children.length>0&&(Xe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),cm(a.children,e,g,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:C1(f,a.index),routesMeta:g})};return o.forEach((a,c)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,c);else for(let d of um(a.path))s(a,c,d)}),e}function um(o){let e=o.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let c=um(n.join("/")),u=[];return u.push(...c.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...c),u.map(d=>o.startsWith("/")&&d===""?"/":d)}function m1(o){o.sort((e,t)=>e.score!==t.score?t.score-e.score:T1(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var y1=/^:[\w-]+$/,v1=3,_1=2,x1=1,w1=10,S1=-2,sg=o=>o==="*";function C1(o,e){let t=o.split("/"),n=t.length;return t.some(sg)&&(n+=S1),e&&(n+=_1),t.filter(s=>!sg(s)).reduce((s,a)=>s+(y1.test(a)?v1:a===""?x1:w1),n)}function T1(o,e){return o.length===e.length&&o.slice(0,-1).every((n,s)=>n===e[s])?o[o.length-1]-e[e.length-1]:0}function b1(o,e,t=!1){let{routesMeta:n}=o,s={},a="/",c=[];for(let u=0;u<n.length;++u){let d=n[u],f=u===n.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=$a({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!y&&f&&t&&!n[n.length-1].route.index&&(y=$a({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),c.push({params:s,pathname:Nn([a,y.pathname]),pathnameBase:M1(Nn([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Nn([a,y.pathnameBase]))}return c}function $a(o,e){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[t,n]=k1(o.path,o.caseSensitive,o.end),s=e.match(t);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((f,{paramName:g,isOptional:y},v)=>{if(g==="*"){let x=u[v]||"";c=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:o}}function k1(o,e=!1,t=!0){wn(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let n=[],s="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(n.push({paramName:"*"}),s+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":o!==""&&o!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function E1(o){try{return o.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wn(!1,`The URL path "${o}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),o}}function pr(o,e){if(e==="/")return o;if(!o.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=o.charAt(t);return n&&n!=="/"?null:o.slice(t)||"/"}function O1(o,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof o=="string"?Di(o):o;return{pathname:t?t.startsWith("/")?t:D1(t,e):e,search:R1(n),hash:L1(s)}}function D1(o,e){let t=e.replace(/\/+$/,"").split("/");return o.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Pu(o,e,t,n){return`Cannot include a '${o}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P1(o){return o.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hm(o){let e=P1(o);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function dm(o,e,t,n=!1){let s;typeof o=="string"?s=Di(o):(s={...o},Xe(!s.pathname||!s.pathname.includes("?"),Pu("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),Pu("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),Pu("#","search","hash",s)));let a=o===""||s.pathname==="",c=a?"/":s.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}u=y>=0?e[y]:"/"}let d=O1(s,u),f=c&&c!=="/"&&c.endsWith("/"),g=(a||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Nn=o=>o.join("/").replace(/\/\/+/g,"/"),M1=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),R1=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,L1=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function j1(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var fm=["POST","PUT","PATCH","DELETE"];new Set(fm);var A1=["GET",...fm];new Set(A1);var Pi=I.createContext(null);Pi.displayName="DataRouter";var ul=I.createContext(null);ul.displayName="DataRouterState";var pm=I.createContext({isTransitioning:!1});pm.displayName="ViewTransition";var F1=I.createContext(new Map);F1.displayName="Fetchers";var I1=I.createContext(null);I1.displayName="Await";var Tn=I.createContext(null);Tn.displayName="Navigation";var Us=I.createContext(null);Us.displayName="Location";var Hn=I.createContext({outlet:null,matches:[],isDataRoute:!1});Hn.displayName="Route";var Ch=I.createContext(null);Ch.displayName="RouteError";function N1(o,{relative:e}={}){Xe(Vs(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=I.useContext(Tn),{hash:s,pathname:a,search:c}=Hs(o,{relative:e}),u=a;return t!=="/"&&(u=a==="/"?t:Nn([t,a])),n.createHref({pathname:u,search:c,hash:s})}function Vs(){return I.useContext(Us)!=null}function Yr(){return Xe(Vs(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Us).location}var gm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mm(o){I.useContext(Tn).static||I.useLayoutEffect(o)}function B1(){let{isDataRoute:o}=I.useContext(Hn);return o?J1():z1()}function z1(){Xe(Vs(),"useNavigate() may be used only in the context of a <Router> component.");let o=I.useContext(Pi),{basename:e,navigator:t}=I.useContext(Tn),{matches:n}=I.useContext(Hn),{pathname:s}=Yr(),a=JSON.stringify(hm(n)),c=I.useRef(!1);return mm(()=>{c.current=!0}),I.useCallback((d,f={})=>{if(wn(c.current,gm),!c.current)return;if(typeof d=="number"){t.go(d);return}let g=dm(d,JSON.parse(a),s,f.relative==="path");o==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Nn([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,a,s,o])}I.createContext(null);function Hs(o,{relative:e}={}){let{matches:t}=I.useContext(Hn),{pathname:n}=Yr(),s=JSON.stringify(hm(t));return I.useMemo(()=>dm(o,JSON.parse(s),n,e==="path"),[o,s,n,e])}function W1(o,e){return ym(o,e)}function ym(o,e,t,n){var b;Xe(Vs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=I.useContext(Tn),{matches:a}=I.useContext(Hn),c=a[a.length-1],u=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",g=c&&c.route;{let k=g&&g.path||"";vm(d,!g||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let y=Yr(),v;if(e){let k=typeof e=="string"?Di(e):e;Xe(f==="/"||((b=k.pathname)==null?void 0:b.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${k.pathname}" was given in the \`location\` prop.`),v=k}else v=y;let w=v.pathname||"/",x=w;if(f!=="/"){let k=f.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=lm(o,{pathname:x});wn(g||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),wn(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Y1(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},u,k.params),pathname:Nn([f,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:Nn([f,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,t,n);return e&&C?I.createElement(Us.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},C):C}function U1(){let o=Q1(),e=j1(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),t=o instanceof Error?o.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",o),c=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:a},"ErrorBoundary")," or"," ",I.createElement("code",{style:a},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:s},t):null,c)}var V1=I.createElement(U1,null),H1=class extends I.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,e){return e.location!==o.location||e.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:e.error,location:e.location,revalidation:o.revalidation||e.revalidation}}componentDidCatch(o,e){console.error("React Router caught the following error during render",o,e)}render(){return this.state.error!==void 0?I.createElement(Hn.Provider,{value:this.props.routeContext},I.createElement(Ch.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function X1({routeContext:o,match:e,children:t}){let n=I.useContext(Pi);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Hn.Provider,{value:o},t)}function Y1(o,e=[],t=null,n=null){if(o==null){if(!t)return null;if(t.errors)o=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)o=t.matches;else return null}let s=o,a=t==null?void 0:t.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Xe(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(t)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:y}=t,v=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,g)=>{let y,v=!1,w=null,x=null;t&&(y=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||V1,c&&(u<0&&g===0?(vm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,x=null):u===g&&(v=!0,x=f.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,g+1)),C=()=>{let b;return y?b=w:v?b=x:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,I.createElement(X1,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:t!=null},children:b})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?I.createElement(H1,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):C()},null)}function Th(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $1(o){let e=I.useContext(Pi);return Xe(e,Th(o)),e}function G1(o){let e=I.useContext(ul);return Xe(e,Th(o)),e}function q1(o){let e=I.useContext(Hn);return Xe(e,Th(o)),e}function bh(o){let e=q1(o),t=e.matches[e.matches.length-1];return Xe(t.route.id,`${o} can only be used on routes that contain a unique "id"`),t.route.id}function K1(){return bh("useRouteId")}function Q1(){var n;let o=I.useContext(Ch),e=G1("useRouteError"),t=bh("useRouteError");return o!==void 0?o:(n=e.errors)==null?void 0:n[t]}function J1(){let{router:o}=$1("useNavigate"),e=bh("useNavigate"),t=I.useRef(!1);return mm(()=>{t.current=!0}),I.useCallback(async(s,a={})=>{wn(t.current,gm),t.current&&(typeof s=="number"?o.navigate(s):await o.navigate(s,{fromRouteId:e,...a}))},[o,e])}var og={};function vm(o,e,t){!e&&!og[o]&&(og[o]=!0,wn(!1,t))}I.memo(Z1);function Z1({routes:o,future:e,state:t}){return ym(o,void 0,t,e)}function Ku(o){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function e_({basename:o="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:a=!1}){Xe(!Vs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=o.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:c,navigator:s,static:a,future:{}}),[c,s,a]);typeof t=="string"&&(t=Di(t));let{pathname:d="/",search:f="",hash:g="",state:y=null,key:v="default"}=t,w=I.useMemo(()=>{let x=pr(d,c);return x==null?null:{location:{pathname:x,search:f,hash:g,state:y,key:v},navigationType:n}},[c,d,f,g,y,v,n]);return wn(w!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:I.createElement(Tn.Provider,{value:u},I.createElement(Us.Provider,{children:e,value:w}))}function t_({children:o,location:e}){return W1(Qu(o),e)}function Qu(o,e=[]){let t=[];return I.Children.forEach(o,(n,s)=>{if(!I.isValidElement(n))return;let a=[...e,s];if(n.type===I.Fragment){t.push.apply(t,Qu(n.props.children,a));return}Xe(n.type===Ku,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Qu(n.props.children,a)),t.push(c)}),t}var Ia="get",Na="application/x-www-form-urlencoded";function hl(o){return o!=null&&typeof o.tagName=="string"}function n_(o){return hl(o)&&o.tagName.toLowerCase()==="button"}function r_(o){return hl(o)&&o.tagName.toLowerCase()==="form"}function i_(o){return hl(o)&&o.tagName.toLowerCase()==="input"}function s_(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function o_(o,e){return o.button===0&&(!e||e==="_self")&&!s_(o)}var ha=null;function a_(){if(ha===null)try{new FormData(document.createElement("form"),0),ha=!1}catch{ha=!0}return ha}var l_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mu(o){return o!=null&&!l_.has(o)?(wn(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Na}"`),null):o}function c_(o,e){let t,n,s,a,c;if(r_(o)){let u=o.getAttribute("action");n=u?pr(u,e):null,t=o.getAttribute("method")||Ia,s=Mu(o.getAttribute("enctype"))||Na,a=new FormData(o)}else if(n_(o)||i_(o)&&(o.type==="submit"||o.type==="image")){let u=o.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=o.getAttribute("formaction")||u.getAttribute("action");if(n=d?pr(d,e):null,t=o.getAttribute("formmethod")||u.getAttribute("method")||Ia,s=Mu(o.getAttribute("formenctype"))||Mu(u.getAttribute("enctype"))||Na,a=new FormData(u,o),!a_()){let{name:f,type:g,value:y}=o;if(g==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,y)}}else{if(hl(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ia,n=null,s=Na,c=o}return a&&s==="text/plain"&&(c=a,a=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:a,body:c}}function kh(o,e){if(o===!1||o===null||typeof o>"u")throw new Error(e)}async function u_(o,e){if(o.id in e)return e[o.id];try{let t=await import(o.module);return e[o.id]=t,t}catch(t){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function h_(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function d_(o,e,t){let n=await Promise.all(o.map(async s=>{let a=e.routes[s.route.id];if(a){let c=await u_(a,t);return c.links?c.links():[]}return[]}));return m_(n.flat(1).filter(h_).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ag(o,e,t,n,s,a){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>{var g;return t[f].pathname!==d.pathname||((g=t[f].route.path)==null?void 0:g.endsWith("*"))&&t[f].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,f)=>c(d,f)||u(d,f)):a==="data"?e.filter((d,f)=>{var y;let g=n.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(o,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function f_(o,e){return p_(o.map(t=>{let n=e.routes[t.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function p_(o){return[...new Set(o)]}function g_(o){let e={},t=Object.keys(o).sort();for(let n of t)e[n]=o[n];return e}function m_(o,e){let t=new Set;return new Set(e),o.reduce((n,s)=>{let a=JSON.stringify(g_(s));return t.has(a)||(t.add(a),n.push({key:a,link:s})),n},[])}function y_(o){let e=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function v_(){let o=I.useContext(Pi);return kh(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function __(){let o=I.useContext(ul);return kh(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var Eh=I.createContext(void 0);Eh.displayName="FrameworkContext";function _m(){let o=I.useContext(Eh);return kh(o,"You must render this element inside a <HydratedRouter> element"),o}function x_(o,e){let t=I.useContext(Eh),[n,s]=I.useState(!1),[a,c]=I.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,v=I.useRef(null);I.useEffect(()=>{if(o==="render"&&c(!0),o==="viewport"){let S=b=>{b.forEach(k=>{c(k.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[o]),I.useEffect(()=>{if(n){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[n]);let w=()=>{s(!0)},x=()=>{s(!1),c(!1)};return t?o!=="intent"?[a,v,{}]:[a,v,{onFocus:ks(u,w),onBlur:ks(d,x),onMouseEnter:ks(f,w),onMouseLeave:ks(g,x),onTouchStart:ks(y,w)}]:[!1,v,{}]}function ks(o,e){return t=>{o&&o(t),t.defaultPrevented||e(t)}}function w_({page:o,...e}){let{router:t}=v_(),n=I.useMemo(()=>lm(t.routes,o,t.basename),[t.routes,o,t.basename]);return n?I.createElement(C_,{page:o,matches:n,...e}):null}function S_(o){let{manifest:e,routeModules:t}=_m(),[n,s]=I.useState([]);return I.useEffect(()=>{let a=!1;return d_(o,e,t).then(c=>{a||s(c)}),()=>{a=!0}},[o,e,t]),n}function C_({page:o,matches:e,...t}){let n=Yr(),{manifest:s,routeModules:a}=_m(),{loaderData:c,matches:u}=__(),d=I.useMemo(()=>ag(o,e,u,s,n,"data"),[o,e,u,s,n]),f=I.useMemo(()=>ag(o,e,u,s,n,"assets"),[o,e,u,s,n]),g=I.useMemo(()=>{if(o===n.pathname+n.search+n.hash)return[];let w=new Set,x=!1;if(e.forEach(C=>{var k;let b=s.routes[C.route.id];!b||!b.hasLoader||(!d.some(R=>R.route.id===C.route.id)&&C.route.id in c&&((k=a[C.route.id])!=null&&k.shouldRevalidate)||b.hasClientLoader?x=!0:w.add(C.route.id))}),w.size===0)return[];let S=y_(o);return x&&w.size>0&&S.searchParams.set("_routes",e.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[c,n,s,d,e,o,a]),y=I.useMemo(()=>f_(f,s),[f,s]),v=S_(f);return I.createElement(I.Fragment,null,g.map(w=>I.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),y.map(w=>I.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:x})=>I.createElement("link",{key:w,...x})))}function T_(...o){return e=>{o.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var xm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{xm&&(window.__reactRouterVersion="7.1.1")}catch{}function b_({basename:o,children:e,window:t}){let n=I.useRef();n.current==null&&(n.current=d1({window:t,v5Compat:!0}));let s=n.current,[a,c]=I.useState({action:s.action,location:s.location}),u=I.useCallback(d=>{I.startTransition(()=>c(d))},[c]);return I.useLayoutEffect(()=>s.listen(u),[s,u]),I.createElement(e_,{basename:o,children:e,location:a.location,navigationType:a.action,navigator:s})}var wm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sm=I.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:a,replace:c,state:u,target:d,to:f,preventScrollReset:g,viewTransition:y,...v},w){let{basename:x}=I.useContext(Tn),S=typeof f=="string"&&wm.test(f),C,b=!1;if(typeof f=="string"&&S&&(C=f,xm))try{let te=new URL(window.location.href),oe=f.startsWith("//")?new URL(te.protocol+f):new URL(f),pe=pr(oe.pathname,x);oe.origin===te.origin&&pe!=null?f=pe+oe.search+oe.hash:b=!0}catch{wn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=N1(f,{relative:s}),[R,N,z]=x_(n,v),G=D_(f,{replace:c,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:y});function X(te){e&&e(te),te.defaultPrevented||G(te)}let W=I.createElement("a",{...v,...z,href:C||k,onClick:b||a?e:X,ref:T_(w,N),target:d,"data-discover":!S&&t==="render"?"true":void 0});return R&&!S?I.createElement(I.Fragment,null,W,I.createElement(w_,{page:k})):W});Sm.displayName="Link";var k_=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:a,to:c,viewTransition:u,children:d,...f},g){let y=Hs(c,{relative:f.relative}),v=Yr(),w=I.useContext(ul),{navigator:x,basename:S}=I.useContext(Tn),C=w!=null&&j_(y)&&u===!0,b=x.encodeLocation?x.encodeLocation(y).pathname:y.pathname,k=v.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(k=k.toLowerCase(),R=R?R.toLowerCase():null,b=b.toLowerCase()),R&&S&&(R=pr(R,S)||R);const N=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let z=k===b||!s&&k.startsWith(b)&&k.charAt(N)==="/",G=R!=null&&(R===b||!s&&R.startsWith(b)&&R.charAt(b.length)==="/"),X={isActive:z,isPending:G,isTransitioning:C},W=z?e:void 0,te;typeof n=="function"?te=n(X):te=[n,z?"active":null,G?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let oe=typeof a=="function"?a(X):a;return I.createElement(Sm,{...f,"aria-current":W,className:te,ref:g,style:oe,to:c,viewTransition:u},typeof d=="function"?d(X):d)});k_.displayName="NavLink";var E_=I.forwardRef(({discover:o="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:a,method:c=Ia,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,...v},w)=>{let x=R_(),S=L_(u,{relative:f}),C=c.toLowerCase()==="get"?"get":"post",b=typeof u=="string"&&wm.test(u),k=R=>{if(d&&d(R),R.defaultPrevented)return;R.preventDefault();let N=R.nativeEvent.submitter,z=(N==null?void 0:N.getAttribute("formmethod"))||c;x(N||R.currentTarget,{fetcherKey:e,method:z,navigate:t,replace:s,state:a,relative:f,preventScrollReset:g,viewTransition:y})};return I.createElement("form",{ref:w,method:C,action:S,onSubmit:n?d:k,...v,"data-discover":!b&&o==="render"?"true":void 0})});E_.displayName="Form";function O_(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cm(o){let e=I.useContext(Pi);return Xe(e,O_(o)),e}function D_(o,{target:e,replace:t,state:n,preventScrollReset:s,relative:a,viewTransition:c}={}){let u=B1(),d=Yr(),f=Hs(o,{relative:a});return I.useCallback(g=>{if(o_(g,e)){g.preventDefault();let y=t!==void 0?t:js(d)===js(f);u(o,{replace:y,state:n,preventScrollReset:s,relative:a,viewTransition:c})}},[d,u,f,t,n,e,o,s,a,c])}var P_=0,M_=()=>`__${String(++P_)}__`;function R_(){let{router:o}=Cm("useSubmit"),{basename:e}=I.useContext(Tn),t=K1();return I.useCallback(async(n,s={})=>{let{action:a,method:c,encType:u,formData:d,body:f}=c_(n,e);if(s.navigate===!1){let g=s.fetcherKey||M_();await o.fetch(g,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await o.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[o,e,t])}function L_(o,{relative:e}={}){let{basename:t}=I.useContext(Tn),n=I.useContext(Hn);Xe(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Hs(o||".",{relative:e})},c=Yr();if(o==null){a.search=c.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let g=u.toString();a.search=g?`?${g}`:""}}return(!o||o===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Nn([t,a.pathname])),js(a)}function j_(o,e={}){let t=I.useContext(pm);Xe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Cm("useViewTransitionState"),s=Hs(o,{relative:e.relative});if(!t.isTransitioning)return!1;let a=pr(t.currentLocation.pathname,n)||t.currentLocation.pathname,c=pr(t.nextLocation.pathname,n)||t.nextLocation.pathname;return $a(s.pathname,c)!=null||$a(s.pathname,a)!=null}new TextEncoder;function Tm(o){var e,t,n="";if(typeof o=="string"||typeof o=="number")n+=o;else if(typeof o=="object")if(Array.isArray(o)){var s=o.length;for(e=0;e<s;e++)o[e]&&(t=Tm(o[e]))&&(n&&(n+=" "),n+=t)}else for(t in o)o[t]&&(n&&(n+=" "),n+=t);return n}function Br(){for(var o,e,t=0,n="",s=arguments.length;t<s;t++)(o=arguments[t])&&(e=Tm(o))&&(n&&(n+=" "),n+=e);return n}function A_(o){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o))}A_(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Xs=o=>typeof o=="number"&&!isNaN(o),Ur=o=>typeof o=="string",Wn=o=>typeof o=="function",F_=o=>Ur(o)||Xs(o),Ju=o=>Ur(o)||Wn(o)?o:null,I_=(o,e)=>o===!1||Xs(o)&&o>0?o:e,Zu=o=>I.isValidElement(o)||Ur(o)||Wn(o)||Xs(o);function N_(o,e,t=300){let{scrollHeight:n,style:s}=o;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${t}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,t)})})}function B_({enter:o,exit:e,appendPosition:t=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:a,position:c,preventExitTransition:u,done:d,nodeRef:f,isIn:g,playToast:y}){let v=t?`${o}--${c}`:o,w=t?`${e}--${c}`:e,x=I.useRef(0);return I.useLayoutEffect(()=>{let S=f.current,C=v.split(" "),b=k=>{k.target===f.current&&(y(),S.removeEventListener("animationend",b),S.removeEventListener("animationcancel",b),x.current===0&&k.type!=="animationcancel"&&S.classList.remove(...C))};S.classList.add(...C),S.addEventListener("animationend",b),S.addEventListener("animationcancel",b)},[]),I.useEffect(()=>{let S=f.current,C=()=>{S.removeEventListener("animationend",C),n?N_(S,d,s):d()};g||(u?C():(x.current=1,S.className+=` ${w}`,S.addEventListener("animationend",C)))},[g]),Ee.createElement(Ee.Fragment,null,a)}}function lg(o,e){return{content:bm(o.content,o.props),containerId:o.props.containerId,id:o.props.toastId,theme:o.props.theme,type:o.props.type,data:o.props.data||{},isLoading:o.props.isLoading,icon:o.props.icon,reason:o.removalReason,status:e}}function bm(o,e,t=!1){return I.isValidElement(o)&&!Ur(o.type)?I.cloneElement(o,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):Wn(o)?o({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):o}function z_({closeToast:o,theme:e,ariaLabel:t="close"}){return Ee.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:n=>{n.stopPropagation(),o(!0)},"aria-label":t},Ee.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ee.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function W_({delay:o,isRunning:e,closeToast:t,type:n="default",hide:s,className:a,controlledProgress:c,progress:u,rtl:d,isIn:f,theme:g}){let y=s||c&&u===0,v={animationDuration:`${o}ms`,animationPlayState:e?"running":"paused"};c&&(v.transform=`scaleX(${u})`);let w=Br("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${g}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":d}),x=Wn(a)?a({rtl:d,type:n,defaultClassName:w}):Br(w,a),S={[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{f&&t()}};return Ee.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":y},Ee.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${g} Toastify__progress-bar--${n}`}),Ee.createElement("div",{role:"progressbar","aria-hidden":y?"true":"false","aria-label":"notification timer",className:x,style:v,...S}))}var U_=1,km=()=>`${U_++}`;function V_(o,e,t){let n=1,s=0,a=[],c=[],u=e,d=new Map,f=new Set,g=k=>(f.add(k),()=>f.delete(k)),y=()=>{c=Array.from(d.values()),f.forEach(k=>k())},v=({containerId:k,toastId:R,updateId:N})=>{let z=k?k!==o:o!==1,G=d.has(R)&&N==null;return z||G},w=(k,R)=>{d.forEach(N=>{var z;(R==null||R===N.props.toastId)&&((z=N.toggle)==null||z.call(N,k))})},x=k=>{var R,N;(N=(R=k.props)==null?void 0:R.onClose)==null||N.call(R,k.removalReason),k.isActive=!1},S=k=>{if(k==null)d.forEach(x);else{let R=d.get(k);R&&x(R)}y()},C=()=>{s-=a.length,a=[]},b=k=>{var R,N;let{toastId:z,updateId:G}=k.props,X=G==null;k.staleId&&d.delete(k.staleId),k.isActive=!0,d.set(z,k),y(),t(lg(k,X?"added":"updated")),X&&((N=(R=k.props).onOpen)==null||N.call(R))};return{id:o,props:u,observe:g,toggle:w,removeToast:S,toasts:d,clearQueue:C,buildToast:(k,R)=>{if(v(R))return;let{toastId:N,updateId:z,data:G,staleId:X,delay:W}=R,te=z==null;te&&s++;let oe={...u,style:u.toastStyle,key:n++,...Object.fromEntries(Object.entries(R).filter(([ge,ce])=>ce!=null)),toastId:N,updateId:z,data:G,isIn:!1,className:Ju(R.className||u.toastClassName),progressClassName:Ju(R.progressClassName||u.progressClassName),autoClose:R.isLoading?!1:I_(R.autoClose,u.autoClose),closeToast(ge){d.get(N).removalReason=ge,S(N)},deleteToast(){let ge=d.get(N);if(ge!=null){if(t(lg(ge,"removed")),d.delete(N),s--,s<0&&(s=0),a.length>0){b(a.shift());return}y()}}};oe.closeButton=u.closeButton,R.closeButton===!1||Zu(R.closeButton)?oe.closeButton=R.closeButton:R.closeButton===!0&&(oe.closeButton=Zu(u.closeButton)?u.closeButton:!0);let pe={content:k,props:oe,staleId:X};u.limit&&u.limit>0&&s>u.limit&&te?a.push(pe):Xs(W)?setTimeout(()=>{b(pe)},W):b(pe)},setProps(k){u=k},setToggle:(k,R)=>{let N=d.get(k);N&&(N.toggle=R)},isToastActive:k=>{var R;return(R=d.get(k))==null?void 0:R.isActive},getSnapshot:()=>c}}var xt=new Map,As=[],eh=new Set,H_=o=>eh.forEach(e=>e(o)),Em=()=>xt.size>0;function X_(){As.forEach(o=>Dm(o.content,o.options)),As=[]}var Y_=(o,{containerId:e})=>{var t;return(t=xt.get(e||1))==null?void 0:t.toasts.get(o)};function Om(o,e){var t;if(e)return!!((t=xt.get(e))!=null&&t.isToastActive(o));let n=!1;return xt.forEach(s=>{s.isToastActive(o)&&(n=!0)}),n}function $_(o){if(!Em()){As=As.filter(e=>o!=null&&e.options.toastId!==o);return}if(o==null||F_(o))xt.forEach(e=>{e.removeToast(o)});else if(o&&("containerId"in o||"id"in o)){let e=xt.get(o.containerId);e?e.removeToast(o.id):xt.forEach(t=>{t.removeToast(o.id)})}}var G_=(o={})=>{xt.forEach(e=>{e.props.limit&&(!o.containerId||e.id===o.containerId)&&e.clearQueue()})};function Dm(o,e){Zu(o)&&(Em()||As.push({content:o,options:e}),xt.forEach(t=>{t.buildToast(o,e)}))}function q_(o){var e;(e=xt.get(o.containerId||1))==null||e.setToggle(o.id,o.fn)}function Pm(o,e){xt.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(o,e==null?void 0:e.id)})}function K_(o){let e=o.containerId||1;return{subscribe(t){let n=V_(e,o,H_);xt.set(e,n);let s=n.observe(t);return X_(),()=>{s(),xt.delete(e)}},setProps(t){var n;(n=xt.get(e))==null||n.setProps(t)},getSnapshot(){var t;return(t=xt.get(e))==null?void 0:t.getSnapshot()}}}function Q_(o){return eh.add(o),()=>{eh.delete(o)}}function J_(o){return o&&(Ur(o.toastId)||Xs(o.toastId))?o.toastId:km()}function Ys(o,e){return Dm(o,e),e.toastId}function dl(o,e){return{...e,type:e&&e.type||o,toastId:J_(e)}}function fl(o){return(e,t)=>Ys(e,dl(o,t))}function De(o,e){return Ys(o,dl("default",e))}De.loading=(o,e)=>Ys(o,dl("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function Z_(o,{pending:e,error:t,success:n},s){let a;e&&(a=Ur(e)?De.loading(e,s):De.loading(e.render,{...s,...e}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(f,g,y)=>{if(g==null){De.dismiss(a);return}let v={type:f,...c,...s,data:y},w=Ur(g)?{render:g}:g;return a?De.update(a,{...v,...w}):De(w.render,{...v,...w}),y},d=Wn(o)?o():o;return d.then(f=>u("success",n,f)).catch(f=>u("error",t,f)),d}De.promise=Z_;De.success=fl("success");De.info=fl("info");De.error=fl("error");De.warning=fl("warning");De.warn=De.warning;De.dark=(o,e)=>Ys(o,dl("default",{theme:"dark",...e}));function ex(o){$_(o)}De.dismiss=ex;De.clearWaitingQueue=G_;De.isActive=Om;De.update=(o,e={})=>{let t=Y_(o,e);if(t){let{props:n,content:s}=t,a={delay:100,...n,...e,toastId:e.toastId||o,updateId:km()};a.toastId!==o&&(a.staleId=o);let c=a.render||s;delete a.render,Ys(c,a)}};De.done=o=>{De.update(o,{progress:1})};De.onChange=Q_;De.play=o=>Pm(!0,o);De.pause=o=>Pm(!1,o);function tx(o){var e;let{subscribe:t,getSnapshot:n,setProps:s}=I.useRef(K_(o)).current;s(o);let a=(e=I.useSyncExternalStore(t,n,n))==null?void 0:e.slice();function c(u){if(!a)return[];let d=new Map;return o.newestOnTop&&a.reverse(),a.forEach(f=>{let{position:g}=f.props;d.has(g)||d.set(g,[]),d.get(g).push(f)}),Array.from(d,f=>u(f[0],f[1]))}return{getToastToRender:c,isToastActive:Om,count:a==null?void 0:a.length}}function nx(o){let[e,t]=I.useState(!1),[n,s]=I.useState(!1),a=I.useRef(null),c=I.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:u,pauseOnHover:d,closeToast:f,onClick:g,closeOnClick:y}=o;q_({id:o.toastId,containerId:o.containerId,fn:t}),I.useEffect(()=>{if(o.pauseOnFocusLoss)return v(),()=>{w()}},[o.pauseOnFocusLoss]);function v(){document.hasFocus()||b(),window.addEventListener("focus",C),window.addEventListener("blur",b)}function w(){window.removeEventListener("focus",C),window.removeEventListener("blur",b)}function x(X){if(o.draggable===!0||o.draggable===X.pointerType){k();let W=a.current;c.canCloseOnClick=!0,c.canDrag=!0,W.style.transition="none",o.draggableDirection==="x"?(c.start=X.clientX,c.removalDistance=W.offsetWidth*(o.draggablePercent/100)):(c.start=X.clientY,c.removalDistance=W.offsetHeight*(o.draggablePercent===80?o.draggablePercent*1.5:o.draggablePercent)/100)}}function S(X){let{top:W,bottom:te,left:oe,right:pe}=a.current.getBoundingClientRect();X.nativeEvent.type!=="touchend"&&o.pauseOnHover&&X.clientX>=oe&&X.clientX<=pe&&X.clientY>=W&&X.clientY<=te?b():C()}function C(){t(!0)}function b(){t(!1)}function k(){c.didMove=!1,document.addEventListener("pointermove",N),document.addEventListener("pointerup",z)}function R(){document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",z)}function N(X){let W=a.current;if(c.canDrag&&W){c.didMove=!0,e&&b(),o.draggableDirection==="x"?c.delta=X.clientX-c.start:c.delta=X.clientY-c.start,c.start!==X.clientX&&(c.canCloseOnClick=!1);let te=o.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;W.style.transform=`translate3d(${te},0)`,W.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function z(){R();let X=a.current;if(c.canDrag&&c.didMove&&X){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){s(!0),o.closeToast(!0),o.collapseAll();return}X.style.transition="transform 0.2s, opacity 0.2s",X.style.removeProperty("transform"),X.style.removeProperty("opacity")}}let G={onPointerDown:x,onPointerUp:S};return u&&d&&(G.onMouseEnter=b,o.stacked||(G.onMouseLeave=C)),y&&(G.onClick=X=>{g&&g(X),c.canCloseOnClick&&f(!0)}),{playToast:C,pauseToast:b,isRunning:e,preventExitTransition:n,toastRef:a,eventHandlers:G}}var rx=typeof window<"u"?I.useLayoutEffect:I.useEffect,pl=({theme:o,type:e,isLoading:t,...n})=>Ee.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:o==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...n});function ix(o){return Ee.createElement(pl,{...o},Ee.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function sx(o){return Ee.createElement(pl,{...o},Ee.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function ox(o){return Ee.createElement(pl,{...o},Ee.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ax(o){return Ee.createElement(pl,{...o},Ee.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function lx(){return Ee.createElement("div",{className:"Toastify__spinner"})}var th={info:sx,warning:ix,success:ox,error:ax,spinner:lx},cx=o=>o in th;function ux({theme:o,type:e,isLoading:t,icon:n}){let s=null,a={theme:o,type:e};return n===!1||(Wn(n)?s=n({...a,isLoading:t}):I.isValidElement(n)?s=I.cloneElement(n,a):t?s=th.spinner():cx(e)&&(s=th[e](a))),s}var hx=o=>{let{isRunning:e,preventExitTransition:t,toastRef:n,eventHandlers:s,playToast:a}=nx(o),{closeButton:c,children:u,autoClose:d,onClick:f,type:g,hideProgressBar:y,closeToast:v,transition:w,position:x,className:S,style:C,progressClassName:b,updateId:k,role:R,progress:N,rtl:z,toastId:G,deleteToast:X,isIn:W,isLoading:te,closeOnClick:oe,theme:pe,ariaLabel:ge}=o,ce=Br("Toastify__toast",`Toastify__toast-theme--${pe}`,`Toastify__toast--${g}`,{"Toastify__toast--rtl":z},{"Toastify__toast--close-on-click":oe}),we=Wn(S)?S({rtl:z,position:x,type:g,defaultClassName:ce}):Br(ce,S),je=ux(o),Te=!!N||!d,ve={closeToast:v,type:g,theme:pe},Y=null;return c===!1||(Wn(c)?Y=c(ve):I.isValidElement(c)?Y=I.cloneElement(c,ve):Y=z_(ve)),Ee.createElement(w,{isIn:W,done:X,position:x,preventExitTransition:t,nodeRef:n,playToast:a},Ee.createElement("div",{id:G,tabIndex:0,onClick:f,"data-in":W,className:we,...s,style:C,ref:n,...W&&{role:R,"aria-label":ge}},je!=null&&Ee.createElement("div",{className:Br("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!te})},je),bm(u,o,!e),Y,!o.customProgressBar&&Ee.createElement(W_,{...k&&!Te?{key:`p-${k}`}:{},rtl:z,theme:pe,delay:d,isRunning:e,isIn:W,closeToast:v,hide:y,type:g,className:b,controlledProgress:Te,progress:N||0})))},dx=(o,e=!1)=>({enter:`Toastify--animate Toastify__${o}-enter`,exit:`Toastify--animate Toastify__${o}-exit`,appendPosition:e}),fx=B_(dx("bounce",!0)),px={position:"top-right",transition:fx,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:o=>o.altKey&&o.code==="KeyT"};function gx(o){let e={...px,...o},t=o.stacked,[n,s]=I.useState(!0),a=I.useRef(null),{getToastToRender:c,isToastActive:u,count:d}=tx(e),{className:f,style:g,rtl:y,containerId:v,hotKeys:w}=e;function x(C){let b=Br("Toastify__toast-container",`Toastify__toast-container--${C}`,{"Toastify__toast-container--rtl":y});return Wn(f)?f({position:C,rtl:y,defaultClassName:b}):Br(b,Ju(f))}function S(){t&&(s(!0),De.play())}return rx(()=>{var C;if(t){let b=a.current.querySelectorAll('[data-in="true"]'),k=12,R=(C=e.position)==null?void 0:C.includes("top"),N=0,z=0;Array.from(b).reverse().forEach((G,X)=>{let W=G;W.classList.add("Toastify__toast--stacked"),X>0&&(W.dataset.collapsed=`${n}`),W.dataset.pos||(W.dataset.pos=R?"top":"bot");let te=N*(n?.2:1)+(n?0:k*X);W.style.setProperty("--y",`${R?te:te*-1}px`),W.style.setProperty("--g",`${k}`),W.style.setProperty("--s",`${1-(n?z:0)}`),N+=W.offsetHeight,z+=.025})}},[n,d,t]),I.useEffect(()=>{function C(b){var k;let R=a.current;w(b)&&((k=R.querySelector('[tabIndex="0"]'))==null||k.focus(),s(!1),De.pause()),b.key==="Escape"&&(document.activeElement===R||R!=null&&R.contains(document.activeElement))&&(s(!0),De.play())}return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[w]),Ee.createElement("section",{ref:a,className:"Toastify",id:v,onMouseEnter:()=>{t&&(s(!1),De.pause())},onMouseLeave:S,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},c((C,b)=>{let k=b.length?{...g}:{...g,pointerEvents:"none"};return Ee.createElement("div",{tabIndex:-1,className:x(C),"data-stacked":t,style:k,key:`c-${C}`},b.map(({content:R,props:N})=>Ee.createElement(hx,{...N,stacked:t,collapseAll:S,isIn:u(N.toastId,N.containerId),key:`t-${N.key}`},R)))}))}var Mm={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cg=Ee.createContext&&Ee.createContext(Mm),mx=["attr","size","title"];function yx(o,e){if(o==null)return{};var t=vx(o,e),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(s=0;s<a.length;s++)n=a[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(o,n)&&(t[n]=o[n])}return t}function vx(o,e){if(o==null)return{};var t={};for(var n in o)if(Object.prototype.hasOwnProperty.call(o,n)){if(e.indexOf(n)>=0)continue;t[n]=o[n]}return t}function Ga(){return Ga=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},Ga.apply(this,arguments)}function ug(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),t.push.apply(t,n)}return t}function qa(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ug(Object(t),!0).forEach(function(n){_x(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):ug(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function _x(o,e,t){return e=xx(e),e in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function xx(o){var e=wx(o,"string");return typeof e=="symbol"?e:e+""}function wx(o,e){if(typeof o!="object"||!o)return o;var t=o[Symbol.toPrimitive];if(t!==void 0){var n=t.call(o,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(o)}function Rm(o){return o&&o.map((e,t)=>Ee.createElement(e.tag,qa({key:t},e.attr),Rm(e.child)))}function gl(o){return e=>Ee.createElement(Sx,Ga({attr:qa({},o.attr)},e),Rm(o.child))}function Sx(o){var e=t=>{var{attr:n,size:s,title:a}=o,c=yx(o,mx),u=s||t.size||"1em",d;return t.className&&(d=t.className),o.className&&(d=(d?d+" ":"")+o.className),Ee.createElement("svg",Ga({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,c,{className:d,style:qa(qa({color:o.color||t.color},t.style),o.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),a&&Ee.createElement("title",null,a),o.children)};return cg!==void 0?Ee.createElement(cg.Consumer,null,t=>e(t)):e(Mm)}function Cx(o){return gl({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"},child:[]}]})(o)}function Tx(o){return gl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(o)}function bx(o){return gl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(o)}function kx(o){return gl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z",opacity:".87"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"},child:[]}]})(o)}function Ex({onSubmit:o,initialTask:e=null}){const[t,n]=I.useState({title:"",description:"",status:"Pending",dueDate:""});I.useEffect(()=>{e&&n(e)},[e]);const s=u=>{const{name:d,value:f}=u.target;n({...t,[d]:f})},a=async u=>{var d,f;u.preventDefault();try{await o(t),De.success(e?"Task updated successfully!":"Task created successfully!"),n({title:"",description:"",status:"Pending",dueDate:""})}catch(g){(f=(d=g.response)==null?void 0:d.data)!=null&&f.message?De.error(g.response.data.message):De.error("Something went wrong. Please try again.")}},c=()=>{n({title:"",description:"",status:"Pending",dueDate:""}),De.info("Task creation/edit canceled.")};return K.jsx("div",{className:"flex justify-center items-center py-10 bg-gray-100",children:K.jsxs("div",{className:"w-[50%]",children:[K.jsxs("form",{onSubmit:a,className:"bg-white shadow-md rounded-lg p-6 space-y-4",children:[K.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e?"Edit Task":"Add Task"}),K.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[K.jsxs("div",{className:"flex flex-col",children:[K.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Title"}),K.jsx("input",{type:"text",name:"title",value:t.title,onChange:s,placeholder:"Task Title",required:!0,className:"mt-1 p-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400"})]}),K.jsxs("div",{className:"flex flex-col",children:[K.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),K.jsx("textarea",{name:"description",value:t.description,onChange:s,placeholder:"Task Description (optional)",className:"mt-1 p-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400"})]})]}),K.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[K.jsxs("div",{className:"flex flex-col",children:[K.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),K.jsxs("select",{name:"status",value:t.status,onChange:s,className:"mt-1 p-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400",children:[K.jsx("option",{value:"Pending",children:"Pending"}),K.jsx("option",{value:"In Progress",children:"In Progress"}),K.jsx("option",{value:"Completed",children:"Completed"})]})]}),K.jsxs("div",{className:"flex flex-col",children:[K.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Due Date"}),K.jsx("input",{type:"date",name:"dueDate",value:t.dueDate,onChange:s,required:!0,className:"mt-1 p-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400"})]})]}),K.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[K.jsxs("button",{type:"submit",className:"flex items-center justify-center bg-green-500 text-white px-4 py-2 rounded-lg shadow hover:bg-green-600 transition",children:[K.jsx(Cx,{className:"mr-2"}),e?"Update Task":"Add Task"]}),K.jsxs("button",{type:"button",onClick:c,className:"flex items-center justify-center bg-gray-300 text-gray-700 px-4 py-2 rounded-lg shadow hover:bg-gray-400 transition",children:[K.jsx(kx,{className:"mr-2"}),"Cancel"]})]})]}),K.jsx(gx,{})]})})}function Ox({tasks:o,onEdit:e,onDelete:t}){const[n,s]=I.useState(""),[a,c]=I.useState(""),u=o.filter(d=>{const f=d.title.toLowerCase().includes(n.toLowerCase()),g=a?d.status===a:!0;return f&&g});return K.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 px-6",children:[K.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Task List"}),K.jsxs("div",{className:"flex justify-between items-center mb-4",children:[K.jsx("input",{type:"text",value:n,onChange:d=>s(d.target.value),placeholder:"Search by title...",className:"p-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400 w-1/2"}),K.jsxs("select",{value:a,onChange:d=>c(d.target.value),className:"p-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-blue-400 w-1/4",children:[K.jsx("option",{value:"",children:"All Status"}),K.jsx("option",{value:"Pending",children:"Pending"}),K.jsx("option",{value:"In Progress",children:"In Progress"}),K.jsx("option",{value:"Completed",children:"Completed"})]})]}),K.jsxs("table",{className:"table-auto w-full text-left border-collapse",children:[K.jsx("thead",{children:K.jsxs("tr",{children:[K.jsx("th",{className:"border-b p-2 font-medium text-gray-600",children:"Title"}),K.jsx("th",{className:"border-b p-2 font-medium text-gray-600",children:"Description"}),K.jsx("th",{className:"border-b p-2 font-medium text-gray-600",children:"Status"}),K.jsx("th",{className:"border-b p-2 font-medium text-gray-600",children:"Due Date"}),K.jsx("th",{className:"border-b p-2 font-medium text-gray-600",children:"Actions"})]})}),K.jsx("tbody",{children:u.length>0?u.map((d,f)=>K.jsxs("tr",{className:"hover:bg-gray-50",children:[K.jsx("td",{className:"border-b p-2",children:d.title}),K.jsx("td",{className:"border-b p-2",children:d.description||"-"}),K.jsx("td",{className:"border-b p-2",children:d.status}),K.jsx("td",{className:"border-b p-2",children:new Date(d.dueDate).toLocaleDateString()}),K.jsxs("td",{className:"border-b p-2 flex space-x-2",children:[K.jsx("button",{onClick:()=>e(d),className:"text-blue-500 hover:text-blue-700",children:K.jsx(bx,{size:20})}),K.jsx("button",{onClick:()=>t(d._id),className:"text-red-500 hover:text-red-700",children:K.jsx(Tx,{size:20})})]})]},f)):K.jsx("tr",{children:K.jsx("td",{colSpan:"5",className:"text-center p-4 text-gray-500",children:"No tasks found. Try adjusting your search or filters."})})})]})]})}function Lm(o,e){return function(){return o.apply(e,arguments)}}const{toString:Dx}=Object.prototype,{getPrototypeOf:Oh}=Object,ml=(o=>e=>{const t=Dx.call(e);return o[t]||(o[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),dn=o=>(o=o.toLowerCase(),e=>ml(e)===o),yl=o=>e=>typeof e===o,{isArray:Mi}=Array,Fs=yl("undefined");function Px(o){return o!==null&&!Fs(o)&&o.constructor!==null&&!Fs(o.constructor)&&zt(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const jm=dn("ArrayBuffer");function Mx(o){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(o):e=o&&o.buffer&&jm(o.buffer),e}const Rx=yl("string"),zt=yl("function"),Am=yl("number"),vl=o=>o!==null&&typeof o=="object",Lx=o=>o===!0||o===!1,Ba=o=>{if(ml(o)!=="object")return!1;const e=Oh(o);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)},jx=dn("Date"),Ax=dn("File"),Fx=dn("Blob"),Ix=dn("FileList"),Nx=o=>vl(o)&&zt(o.pipe),Bx=o=>{let e;return o&&(typeof FormData=="function"&&o instanceof FormData||zt(o.append)&&((e=ml(o))==="formdata"||e==="object"&&zt(o.toString)&&o.toString()==="[object FormData]"))},zx=dn("URLSearchParams"),[Wx,Ux,Vx,Hx]=["ReadableStream","Request","Response","Headers"].map(dn),Xx=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $s(o,e,{allOwnKeys:t=!1}={}){if(o===null||typeof o>"u")return;let n,s;if(typeof o!="object"&&(o=[o]),Mi(o))for(n=0,s=o.length;n<s;n++)e.call(null,o[n],n,o);else{const a=t?Object.getOwnPropertyNames(o):Object.keys(o),c=a.length;let u;for(n=0;n<c;n++)u=a[n],e.call(null,o[u],u,o)}}function Fm(o,e){e=e.toLowerCase();const t=Object.keys(o);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const Ar=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Im=o=>!Fs(o)&&o!==Ar;function nh(){const{caseless:o}=Im(this)&&this||{},e={},t=(n,s)=>{const a=o&&Fm(e,s)||s;Ba(e[a])&&Ba(n)?e[a]=nh(e[a],n):Ba(n)?e[a]=nh({},n):Mi(n)?e[a]=n.slice():e[a]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&$s(arguments[n],t);return e}const Yx=(o,e,t,{allOwnKeys:n}={})=>($s(e,(s,a)=>{t&&zt(s)?o[a]=Lm(s,t):o[a]=s},{allOwnKeys:n}),o),$x=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),Gx=(o,e,t,n)=>{o.prototype=Object.create(e.prototype,n),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:e.prototype}),t&&Object.assign(o.prototype,t)},qx=(o,e,t,n)=>{let s,a,c;const u={};if(e=e||{},o==null)return e;do{for(s=Object.getOwnPropertyNames(o),a=s.length;a-- >0;)c=s[a],(!n||n(c,o,e))&&!u[c]&&(e[c]=o[c],u[c]=!0);o=t!==!1&&Oh(o)}while(o&&(!t||t(o,e))&&o!==Object.prototype);return e},Kx=(o,e,t)=>{o=String(o),(t===void 0||t>o.length)&&(t=o.length),t-=e.length;const n=o.indexOf(e,t);return n!==-1&&n===t},Qx=o=>{if(!o)return null;if(Mi(o))return o;let e=o.length;if(!Am(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=o[e];return t},Jx=(o=>e=>o&&e instanceof o)(typeof Uint8Array<"u"&&Oh(Uint8Array)),Zx=(o,e)=>{const n=(o&&o[Symbol.iterator]).call(o);let s;for(;(s=n.next())&&!s.done;){const a=s.value;e.call(o,a[0],a[1])}},ew=(o,e)=>{let t;const n=[];for(;(t=o.exec(e))!==null;)n.push(t);return n},tw=dn("HTMLFormElement"),nw=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),hg=(({hasOwnProperty:o})=>(e,t)=>o.call(e,t))(Object.prototype),rw=dn("RegExp"),Nm=(o,e)=>{const t=Object.getOwnPropertyDescriptors(o),n={};$s(t,(s,a)=>{let c;(c=e(s,a,o))!==!1&&(n[a]=c||s)}),Object.defineProperties(o,n)},iw=o=>{Nm(o,(e,t)=>{if(zt(o)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=o[t];if(zt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},sw=(o,e)=>{const t={},n=s=>{s.forEach(a=>{t[a]=!0})};return Mi(o)?n(o):n(String(o).split(e)),t},ow=()=>{},aw=(o,e)=>o!=null&&Number.isFinite(o=+o)?o:e,Ru="abcdefghijklmnopqrstuvwxyz",dg="0123456789",Bm={DIGIT:dg,ALPHA:Ru,ALPHA_DIGIT:Ru+Ru.toUpperCase()+dg},lw=(o=16,e=Bm.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;o--;)t+=e[Math.random()*n|0];return t};function cw(o){return!!(o&&zt(o.append)&&o[Symbol.toStringTag]==="FormData"&&o[Symbol.iterator])}const uw=o=>{const e=new Array(10),t=(n,s)=>{if(vl(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const a=Mi(n)?[]:{};return $s(n,(c,u)=>{const d=t(c,s+1);!Fs(d)&&(a[u]=d)}),e[s]=void 0,a}}return n};return t(o,0)},hw=dn("AsyncFunction"),dw=o=>o&&(vl(o)||zt(o))&&zt(o.then)&&zt(o.catch),zm=((o,e)=>o?setImmediate:e?((t,n)=>(Ar.addEventListener("message",({source:s,data:a})=>{s===Ar&&a===t&&n.length&&n.shift()()},!1),s=>{n.push(s),Ar.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",zt(Ar.postMessage)),fw=typeof queueMicrotask<"u"?queueMicrotask.bind(Ar):typeof process<"u"&&process.nextTick||zm,B={isArray:Mi,isArrayBuffer:jm,isBuffer:Px,isFormData:Bx,isArrayBufferView:Mx,isString:Rx,isNumber:Am,isBoolean:Lx,isObject:vl,isPlainObject:Ba,isReadableStream:Wx,isRequest:Ux,isResponse:Vx,isHeaders:Hx,isUndefined:Fs,isDate:jx,isFile:Ax,isBlob:Fx,isRegExp:rw,isFunction:zt,isStream:Nx,isURLSearchParams:zx,isTypedArray:Jx,isFileList:Ix,forEach:$s,merge:nh,extend:Yx,trim:Xx,stripBOM:$x,inherits:Gx,toFlatObject:qx,kindOf:ml,kindOfTest:dn,endsWith:Kx,toArray:Qx,forEachEntry:Zx,matchAll:ew,isHTMLForm:tw,hasOwnProperty:hg,hasOwnProp:hg,reduceDescriptors:Nm,freezeMethods:iw,toObjectSet:sw,toCamelCase:nw,noop:ow,toFiniteNumber:aw,findKey:Fm,global:Ar,isContextDefined:Im,ALPHABET:Bm,generateString:lw,isSpecCompliantForm:cw,toJSONObject:uw,isAsyncFn:hw,isThenable:dw,setImmediate:zm,asap:fw};function fe(o,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}B.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Wm=fe.prototype,Um={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{Um[o]={value:o}});Object.defineProperties(fe,Um);Object.defineProperty(Wm,"isAxiosError",{value:!0});fe.from=(o,e,t,n,s,a)=>{const c=Object.create(Wm);return B.toFlatObject(o,c,function(d){return d!==Error.prototype},u=>u!=="isAxiosError"),fe.call(c,o.message,e,t,n,s),c.cause=o,c.name=o.name,a&&Object.assign(c,a),c};const pw=null;function rh(o){return B.isPlainObject(o)||B.isArray(o)}function Vm(o){return B.endsWith(o,"[]")?o.slice(0,-2):o}function fg(o,e,t){return o?o.concat(e).map(function(s,a){return s=Vm(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function gw(o){return B.isArray(o)&&!o.some(rh)}const mw=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function _l(o,e,t){if(!B.isObject(o))throw new TypeError("target must be an object");e=e||new FormData,t=B.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!B.isUndefined(C[S])});const n=t.metaTokens,s=t.visitor||g,a=t.dots,c=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(s))throw new TypeError("visitor must be a function");function f(x){if(x===null)return"";if(B.isDate(x))return x.toISOString();if(!d&&B.isBlob(x))throw new fe("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(x)||B.isTypedArray(x)?d&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function g(x,S,C){let b=x;if(x&&!C&&typeof x=="object"){if(B.endsWith(S,"{}"))S=n?S:S.slice(0,-2),x=JSON.stringify(x);else if(B.isArray(x)&&gw(x)||(B.isFileList(x)||B.endsWith(S,"[]"))&&(b=B.toArray(x)))return S=Vm(S),b.forEach(function(R,N){!(B.isUndefined(R)||R===null)&&e.append(c===!0?fg([S],N,a):c===null?S:S+"[]",f(R))}),!1}return rh(x)?!0:(e.append(fg(C,S,a),f(x)),!1)}const y=[],v=Object.assign(mw,{defaultVisitor:g,convertValue:f,isVisitable:rh});function w(x,S){if(!B.isUndefined(x)){if(y.indexOf(x)!==-1)throw Error("Circular reference detected in "+S.join("."));y.push(x),B.forEach(x,function(b,k){(!(B.isUndefined(b)||b===null)&&s.call(e,b,B.isString(k)?k.trim():k,S,v))===!0&&w(b,S?S.concat(k):[k])}),y.pop()}}if(!B.isObject(o))throw new TypeError("data must be an object");return w(o),e}function pg(o){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Dh(o,e){this._pairs=[],o&&_l(o,this,e)}const Hm=Dh.prototype;Hm.append=function(e,t){this._pairs.push([e,t])};Hm.toString=function(e){const t=e?function(n){return e.call(this,n,pg)}:pg;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function yw(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Xm(o,e,t){if(!e)return o;const n=t&&t.encode||yw;B.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let a;if(s?a=s(e,t):a=B.isURLSearchParams(e)?e.toString():new Dh(e,t).toString(n),a){const c=o.indexOf("#");c!==-1&&(o=o.slice(0,c)),o+=(o.indexOf("?")===-1?"?":"&")+a}return o}class gg{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Ym={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vw=typeof URLSearchParams<"u"?URLSearchParams:Dh,_w=typeof FormData<"u"?FormData:null,xw=typeof Blob<"u"?Blob:null,ww={isBrowser:!0,classes:{URLSearchParams:vw,FormData:_w,Blob:xw},protocols:["http","https","file","blob","url","data"]},Ph=typeof window<"u"&&typeof document<"u",ih=typeof navigator=="object"&&navigator||void 0,Sw=Ph&&(!ih||["ReactNative","NativeScript","NS"].indexOf(ih.product)<0),Cw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Tw=Ph&&window.location.href||"http://localhost",bw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ph,hasStandardBrowserEnv:Sw,hasStandardBrowserWebWorkerEnv:Cw,navigator:ih,origin:Tw},Symbol.toStringTag,{value:"Module"})),pt={...bw,...ww};function kw(o,e){return _l(o,new pt.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,a){return pt.isNode&&B.isBuffer(t)?(this.append(n,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Ew(o){return B.matchAll(/\w+|\[(\w*)]/g,o).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ow(o){const e={},t=Object.keys(o);let n;const s=t.length;let a;for(n=0;n<s;n++)a=t[n],e[a]=o[a];return e}function $m(o){function e(t,n,s,a){let c=t[a++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),d=a>=t.length;return c=!c&&B.isArray(s)?s.length:c,d?(B.hasOwnProp(s,c)?s[c]=[s[c],n]:s[c]=n,!u):((!s[c]||!B.isObject(s[c]))&&(s[c]=[]),e(t,n,s[c],a)&&B.isArray(s[c])&&(s[c]=Ow(s[c])),!u)}if(B.isFormData(o)&&B.isFunction(o.entries)){const t={};return B.forEachEntry(o,(n,s)=>{e(Ew(n),s,t,0)}),t}return null}function Dw(o,e,t){if(B.isString(o))try{return(e||JSON.parse)(o),B.trim(o)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(o)}const Gs={transitional:Ym,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,a=B.isObject(e);if(a&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return s?JSON.stringify($m(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e)||B.isReadableStream(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return kw(e,this.formSerializer).toString();if((u=B.isFileList(e))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return _l(u?{"files[]":e}:e,d&&new d,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),Dw(e)):e}],transformResponse:[function(e){const t=this.transitional||Gs.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(B.isResponse(e)||B.isReadableStream(e))return e;if(e&&B.isString(e)&&(n&&!this.responseType||s)){const c=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?fe.from(u,fe.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pt.classes.FormData,Blob:pt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],o=>{Gs.headers[o]={}});const Pw=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Mw=o=>{const e={};let t,n,s;return o&&o.split(`
`).forEach(function(c){s=c.indexOf(":"),t=c.substring(0,s).trim().toLowerCase(),n=c.substring(s+1).trim(),!(!t||e[t]&&Pw[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},mg=Symbol("internals");function Es(o){return o&&String(o).trim().toLowerCase()}function za(o){return o===!1||o==null?o:B.isArray(o)?o.map(za):String(o)}function Rw(o){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(o);)e[n[1]]=n[2];return e}const Lw=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function Lu(o,e,t,n,s){if(B.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!B.isString(e)){if(B.isString(n))return e.indexOf(n)!==-1;if(B.isRegExp(n))return n.test(e)}}function jw(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function Aw(o,e){const t=B.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(o,n+t,{value:function(s,a,c){return this[n].call(this,e,s,a,c)},configurable:!0})})}class Dt{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function a(u,d,f){const g=Es(d);if(!g)throw new Error("header name must be a non-empty string");const y=B.findKey(s,g);(!y||s[y]===void 0||f===!0||f===void 0&&s[y]!==!1)&&(s[y||d]=za(u))}const c=(u,d)=>B.forEach(u,(f,g)=>a(f,g,d));if(B.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(B.isString(e)&&(e=e.trim())&&!Lw(e))c(Mw(e),t);else if(B.isHeaders(e))for(const[u,d]of e.entries())a(d,u,n);else e!=null&&a(t,e,n);return this}get(e,t){if(e=Es(e),e){const n=B.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return Rw(s);if(B.isFunction(t))return t.call(this,s,n);if(B.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Es(e),e){const n=B.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Lu(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function a(c){if(c=Es(c),c){const u=B.findKey(n,c);u&&(!t||Lu(n,n[u],u,t))&&(delete n[u],s=!0)}}return B.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const a=t[n];(!e||Lu(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,n={};return B.forEach(this,(s,a)=>{const c=B.findKey(n,a);if(c){t[c]=za(s),delete t[a];return}const u=e?jw(a):String(a).trim();u!==a&&delete t[a],t[u]=za(s),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return B.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&B.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[mg]=this[mg]={accessors:{}}).accessors,s=this.prototype;function a(c){const u=Es(c);n[u]||(Aw(s,c),n[u]=!0)}return B.isArray(e)?e.forEach(a):a(e),this}}Dt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(Dt.prototype,({value:o},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>o,set(n){this[t]=n}}});B.freezeMethods(Dt);function ju(o,e){const t=this||Gs,n=e||t,s=Dt.from(n.headers);let a=n.data;return B.forEach(o,function(u){a=u.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function Gm(o){return!!(o&&o.__CANCEL__)}function Ri(o,e,t){fe.call(this,o??"canceled",fe.ERR_CANCELED,e,t),this.name="CanceledError"}B.inherits(Ri,fe,{__CANCEL__:!0});function qm(o,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?o(t):e(new fe("Request failed with status code "+t.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Fw(o){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return e&&e[1]||""}function Iw(o,e){o=o||10;const t=new Array(o),n=new Array(o);let s=0,a=0,c;return e=e!==void 0?e:1e3,function(d){const f=Date.now(),g=n[a];c||(c=f),t[s]=d,n[s]=f;let y=a,v=0;for(;y!==s;)v+=t[y++],y=y%o;if(s=(s+1)%o,s===a&&(a=(a+1)%o),f-c<e)return;const w=g&&f-g;return w?Math.round(v*1e3/w):void 0}}function Nw(o,e){let t=0,n=1e3/e,s,a;const c=(f,g=Date.now())=>{t=g,s=null,a&&(clearTimeout(a),a=null),o.apply(null,f)};return[(...f)=>{const g=Date.now(),y=g-t;y>=n?c(f,g):(s=f,a||(a=setTimeout(()=>{a=null,c(s)},n-y)))},()=>s&&c(s)]}const Ka=(o,e,t=3)=>{let n=0;const s=Iw(50,250);return Nw(a=>{const c=a.loaded,u=a.lengthComputable?a.total:void 0,d=c-n,f=s(d),g=c<=u;n=c;const y={loaded:c,total:u,progress:u?c/u:void 0,bytes:d,rate:f||void 0,estimated:f&&u&&g?(u-c)/f:void 0,event:a,lengthComputable:u!=null,[e?"download":"upload"]:!0};o(y)},t)},yg=(o,e)=>{const t=o!=null;return[n=>e[0]({lengthComputable:t,total:o,loaded:n}),e[1]]},vg=o=>(...e)=>B.asap(()=>o(...e)),Bw=pt.hasStandardBrowserEnv?((o,e)=>t=>(t=new URL(t,pt.origin),o.protocol===t.protocol&&o.host===t.host&&(e||o.port===t.port)))(new URL(pt.origin),pt.navigator&&/(msie|trident)/i.test(pt.navigator.userAgent)):()=>!0,zw=pt.hasStandardBrowserEnv?{write(o,e,t,n,s,a){const c=[o+"="+encodeURIComponent(e)];B.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),B.isString(n)&&c.push("path="+n),B.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read(o){const e=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(o){this.write(o,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ww(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function Uw(o,e){return e?o.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):o}function Km(o,e){return o&&!Ww(e)?Uw(o,e):e}const _g=o=>o instanceof Dt?{...o}:o;function Vr(o,e){e=e||{};const t={};function n(f,g,y,v){return B.isPlainObject(f)&&B.isPlainObject(g)?B.merge.call({caseless:v},f,g):B.isPlainObject(g)?B.merge({},g):B.isArray(g)?g.slice():g}function s(f,g,y,v){if(B.isUndefined(g)){if(!B.isUndefined(f))return n(void 0,f,y,v)}else return n(f,g,y,v)}function a(f,g){if(!B.isUndefined(g))return n(void 0,g)}function c(f,g){if(B.isUndefined(g)){if(!B.isUndefined(f))return n(void 0,f)}else return n(void 0,g)}function u(f,g,y){if(y in e)return n(f,g);if(y in o)return n(void 0,f)}const d={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(f,g,y)=>s(_g(f),_g(g),y,!0)};return B.forEach(Object.keys(Object.assign({},o,e)),function(g){const y=d[g]||s,v=y(o[g],e[g],g);B.isUndefined(v)&&y!==u||(t[g]=v)}),t}const Qm=o=>{const e=Vr({},o);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:c,auth:u}=e;e.headers=c=Dt.from(c),e.url=Xm(Km(e.baseURL,e.url),o.params,o.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let d;if(B.isFormData(t)){if(pt.hasStandardBrowserEnv||pt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((d=c.getContentType())!==!1){const[f,...g]=d?d.split(";").map(y=>y.trim()).filter(Boolean):[];c.setContentType([f||"multipart/form-data",...g].join("; "))}}if(pt.hasStandardBrowserEnv&&(n&&B.isFunction(n)&&(n=n(e)),n||n!==!1&&Bw(e.url))){const f=s&&a&&zw.read(a);f&&c.set(s,f)}return e},Vw=typeof XMLHttpRequest<"u",Hw=Vw&&function(o){return new Promise(function(t,n){const s=Qm(o);let a=s.data;const c=Dt.from(s.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:f}=s,g,y,v,w,x;function S(){w&&w(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(g),s.signal&&s.signal.removeEventListener("abort",g)}let C=new XMLHttpRequest;C.open(s.method.toUpperCase(),s.url,!0),C.timeout=s.timeout;function b(){if(!C)return;const R=Dt.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),z={data:!u||u==="text"||u==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:R,config:o,request:C};qm(function(X){t(X),S()},function(X){n(X),S()},z),C=null}"onloadend"in C?C.onloadend=b:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(b)},C.onabort=function(){C&&(n(new fe("Request aborted",fe.ECONNABORTED,o,C)),C=null)},C.onerror=function(){n(new fe("Network Error",fe.ERR_NETWORK,o,C)),C=null},C.ontimeout=function(){let N=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const z=s.transitional||Ym;s.timeoutErrorMessage&&(N=s.timeoutErrorMessage),n(new fe(N,z.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,o,C)),C=null},a===void 0&&c.setContentType(null),"setRequestHeader"in C&&B.forEach(c.toJSON(),function(N,z){C.setRequestHeader(z,N)}),B.isUndefined(s.withCredentials)||(C.withCredentials=!!s.withCredentials),u&&u!=="json"&&(C.responseType=s.responseType),f&&([v,x]=Ka(f,!0),C.addEventListener("progress",v)),d&&C.upload&&([y,w]=Ka(d),C.upload.addEventListener("progress",y),C.upload.addEventListener("loadend",w)),(s.cancelToken||s.signal)&&(g=R=>{C&&(n(!R||R.type?new Ri(null,o,C):R),C.abort(),C=null)},s.cancelToken&&s.cancelToken.subscribe(g),s.signal&&(s.signal.aborted?g():s.signal.addEventListener("abort",g)));const k=Fw(s.url);if(k&&pt.protocols.indexOf(k)===-1){n(new fe("Unsupported protocol "+k+":",fe.ERR_BAD_REQUEST,o));return}C.send(a||null)})},Xw=(o,e)=>{const{length:t}=o=o?o.filter(Boolean):[];if(e||t){let n=new AbortController,s;const a=function(f){if(!s){s=!0,u();const g=f instanceof Error?f:this.reason;n.abort(g instanceof fe?g:new Ri(g instanceof Error?g.message:g))}};let c=e&&setTimeout(()=>{c=null,a(new fe(`timeout ${e} of ms exceeded`,fe.ETIMEDOUT))},e);const u=()=>{o&&(c&&clearTimeout(c),c=null,o.forEach(f=>{f.unsubscribe?f.unsubscribe(a):f.removeEventListener("abort",a)}),o=null)};o.forEach(f=>f.addEventListener("abort",a));const{signal:d}=n;return d.unsubscribe=()=>B.asap(u),d}},Yw=function*(o,e){let t=o.byteLength;if(t<e){yield o;return}let n=0,s;for(;n<t;)s=n+e,yield o.slice(n,s),n=s},$w=async function*(o,e){for await(const t of Gw(o))yield*Yw(t,e)},Gw=async function*(o){if(o[Symbol.asyncIterator]){yield*o;return}const e=o.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},xg=(o,e,t,n)=>{const s=$w(o,e);let a=0,c,u=d=>{c||(c=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:f,value:g}=await s.next();if(f){u(),d.close();return}let y=g.byteLength;if(t){let v=a+=y;t(v)}d.enqueue(new Uint8Array(g))}catch(f){throw u(f),f}},cancel(d){return u(d),s.return()}},{highWaterMark:2})},xl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Jm=xl&&typeof ReadableStream=="function",qw=xl&&(typeof TextEncoder=="function"?(o=>e=>o.encode(e))(new TextEncoder):async o=>new Uint8Array(await new Response(o).arrayBuffer())),Zm=(o,...e)=>{try{return!!o(...e)}catch{return!1}},Kw=Jm&&Zm(()=>{let o=!1;const e=new Request(pt.origin,{body:new ReadableStream,method:"POST",get duplex(){return o=!0,"half"}}).headers.has("Content-Type");return o&&!e}),wg=64*1024,sh=Jm&&Zm(()=>B.isReadableStream(new Response("").body)),Qa={stream:sh&&(o=>o.body)};xl&&(o=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Qa[e]&&(Qa[e]=B.isFunction(o[e])?t=>t[e]():(t,n)=>{throw new fe(`Response type '${e}' is not supported`,fe.ERR_NOT_SUPPORT,n)})})})(new Response);const Qw=async o=>{if(o==null)return 0;if(B.isBlob(o))return o.size;if(B.isSpecCompliantForm(o))return(await new Request(pt.origin,{method:"POST",body:o}).arrayBuffer()).byteLength;if(B.isArrayBufferView(o)||B.isArrayBuffer(o))return o.byteLength;if(B.isURLSearchParams(o)&&(o=o+""),B.isString(o))return(await qw(o)).byteLength},Jw=async(o,e)=>{const t=B.toFiniteNumber(o.getContentLength());return t??Qw(e)},Zw=xl&&(async o=>{let{url:e,method:t,data:n,signal:s,cancelToken:a,timeout:c,onDownloadProgress:u,onUploadProgress:d,responseType:f,headers:g,withCredentials:y="same-origin",fetchOptions:v}=Qm(o);f=f?(f+"").toLowerCase():"text";let w=Xw([s,a&&a.toAbortSignal()],c),x;const S=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let C;try{if(d&&Kw&&t!=="get"&&t!=="head"&&(C=await Jw(g,n))!==0){let z=new Request(e,{method:"POST",body:n,duplex:"half"}),G;if(B.isFormData(n)&&(G=z.headers.get("content-type"))&&g.setContentType(G),z.body){const[X,W]=yg(C,Ka(vg(d)));n=xg(z.body,wg,X,W)}}B.isString(y)||(y=y?"include":"omit");const b="credentials"in Request.prototype;x=new Request(e,{...v,signal:w,method:t.toUpperCase(),headers:g.normalize().toJSON(),body:n,duplex:"half",credentials:b?y:void 0});let k=await fetch(x);const R=sh&&(f==="stream"||f==="response");if(sh&&(u||R&&S)){const z={};["status","statusText","headers"].forEach(te=>{z[te]=k[te]});const G=B.toFiniteNumber(k.headers.get("content-length")),[X,W]=u&&yg(G,Ka(vg(u),!0))||[];k=new Response(xg(k.body,wg,X,()=>{W&&W(),S&&S()}),z)}f=f||"text";let N=await Qa[B.findKey(Qa,f)||"text"](k,o);return!R&&S&&S(),await new Promise((z,G)=>{qm(z,G,{data:N,headers:Dt.from(k.headers),status:k.status,statusText:k.statusText,config:o,request:x})})}catch(b){throw S&&S(),b&&b.name==="TypeError"&&/fetch/i.test(b.message)?Object.assign(new fe("Network Error",fe.ERR_NETWORK,o,x),{cause:b.cause||b}):fe.from(b,b&&b.code,o,x)}}),oh={http:pw,xhr:Hw,fetch:Zw};B.forEach(oh,(o,e)=>{if(o){try{Object.defineProperty(o,"name",{value:e})}catch{}Object.defineProperty(o,"adapterName",{value:e})}});const Sg=o=>`- ${o}`,eS=o=>B.isFunction(o)||o===null||o===!1,e0={getAdapter:o=>{o=B.isArray(o)?o:[o];const{length:e}=o;let t,n;const s={};for(let a=0;a<e;a++){t=o[a];let c;if(n=t,!eS(t)&&(n=oh[(c=String(t)).toLowerCase()],n===void 0))throw new fe(`Unknown adapter '${c}'`);if(n)break;s[c||"#"+a]=n}if(!n){const a=Object.entries(s).map(([u,d])=>`adapter ${u} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=e?a.length>1?`since :
`+a.map(Sg).join(`
`):" "+Sg(a[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n},adapters:oh};function Au(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new Ri(null,o)}function Cg(o){return Au(o),o.headers=Dt.from(o.headers),o.data=ju.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),e0.getAdapter(o.adapter||Gs.adapter)(o).then(function(n){return Au(o),n.data=ju.call(o,o.transformResponse,n),n.headers=Dt.from(n.headers),n},function(n){return Gm(n)||(Au(o),n&&n.response&&(n.response.data=ju.call(o,o.transformResponse,n.response),n.response.headers=Dt.from(n.response.headers))),Promise.reject(n)})}const t0="1.7.9",wl={};["object","boolean","number","function","string","symbol"].forEach((o,e)=>{wl[o]=function(n){return typeof n===o||"a"+(e<1?"n ":" ")+o}});const Tg={};wl.transitional=function(e,t,n){function s(a,c){return"[Axios v"+t0+"] Transitional option '"+a+"'"+c+(n?". "+n:"")}return(a,c,u)=>{if(e===!1)throw new fe(s(c," has been removed"+(t?" in "+t:"")),fe.ERR_DEPRECATED);return t&&!Tg[c]&&(Tg[c]=!0,console.warn(s(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,c,u):!0}};wl.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function tS(o,e,t){if(typeof o!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const n=Object.keys(o);let s=n.length;for(;s-- >0;){const a=n[s],c=e[a];if(c){const u=o[a],d=u===void 0||c(u,a,o);if(d!==!0)throw new fe("option "+a+" must be "+d,fe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new fe("Unknown option "+a,fe.ERR_BAD_OPTION)}}const Wa={assertOptions:tS,validators:wl},vn=Wa.validators;class zr{constructor(e){this.defaults=e,this.interceptors={request:new gg,response:new gg}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Vr(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:a}=t;n!==void 0&&Wa.assertOptions(n,{silentJSONParsing:vn.transitional(vn.boolean),forcedJSONParsing:vn.transitional(vn.boolean),clarifyTimeoutError:vn.transitional(vn.boolean)},!1),s!=null&&(B.isFunction(s)?t.paramsSerializer={serialize:s}:Wa.assertOptions(s,{encode:vn.function,serialize:vn.function},!0)),Wa.assertOptions(t,{baseUrl:vn.spelling("baseURL"),withXsrfToken:vn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=a&&B.merge(a.common,a[t.method]);a&&B.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=Dt.concat(c,a);const u=[];let d=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(d=d&&S.synchronous,u.unshift(S.fulfilled,S.rejected))});const f=[];this.interceptors.response.forEach(function(S){f.push(S.fulfilled,S.rejected)});let g,y=0,v;if(!d){const x=[Cg.bind(this),void 0];for(x.unshift.apply(x,u),x.push.apply(x,f),v=x.length,g=Promise.resolve(t);y<v;)g=g.then(x[y++],x[y++]);return g}v=u.length;let w=t;for(y=0;y<v;){const x=u[y++],S=u[y++];try{w=x(w)}catch(C){S.call(this,C);break}}try{g=Cg.call(this,w)}catch(x){return Promise.reject(x)}for(y=0,v=f.length;y<v;)g=g.then(f[y++],f[y++]);return g}getUri(e){e=Vr(this.defaults,e);const t=Km(e.baseURL,e.url);return Xm(t,e.params,e.paramsSerializer)}}B.forEach(["delete","get","head","options"],function(e){zr.prototype[e]=function(t,n){return this.request(Vr(n||{},{method:e,url:t,data:(n||{}).data}))}});B.forEach(["post","put","patch"],function(e){function t(n){return function(a,c,u){return this.request(Vr(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}zr.prototype[e]=t(),zr.prototype[e+"Form"]=t(!0)});class Mh{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const n=this;this.promise.then(s=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](s);n._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(u=>{n.subscribe(u),a=u}).then(s);return c.cancel=function(){n.unsubscribe(a)},c},e(function(a,c,u){n.reason||(n.reason=new Ri(a,c,u),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Mh(function(s){e=s}),cancel:e}}}function nS(o){return function(t){return o.apply(null,t)}}function rS(o){return B.isObject(o)&&o.isAxiosError===!0}const ah={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ah).forEach(([o,e])=>{ah[e]=o});function n0(o){const e=new zr(o),t=Lm(zr.prototype.request,e);return B.extend(t,zr.prototype,e,{allOwnKeys:!0}),B.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return n0(Vr(o,s))},t}const He=n0(Gs);He.Axios=zr;He.CanceledError=Ri;He.CancelToken=Mh;He.isCancel=Gm;He.VERSION=t0;He.toFormData=_l;He.AxiosError=fe;He.Cancel=He.CanceledError;He.all=function(e){return Promise.all(e)};He.spread=nS;He.isAxiosError=rS;He.mergeConfig=Vr;He.AxiosHeaders=Dt;He.formToJSON=o=>$m(B.isHTMLForm(o)?new FormData(o):o);He.getAdapter=e0.getAdapter;He.HttpStatusCode=ah;He.default=He;const bg="/assets/room-C5Rjmlzu.jpg",r0=()=>{const[o,e]=I.useState(""),t=[{id:1,name:"Gray",color:"#808080"},{id:2,name:"Beige",color:"#F5F5DC"},{id:3,name:"Brown",color:"#8B4513"},{id:4,name:"White",color:"#FFFFFF"}];return K.jsxs("div",{className:"app",children:[K.jsx("h1",{children:"My Floor Style Simulator"}),K.jsxs("div",{className:"simulation-container",children:[K.jsx("img",{src:bg,alt:"Room",className:"room-image"}),K.jsx("div",{className:"floor-overlay",style:{backgroundColor:o||"transparent",opacity:.85},children:K.jsx("img",{src:bg,alt:"Floor Mask",className:"floor-mask"})})]}),K.jsxs("div",{className:"color-selector",children:[K.jsx("h2",{children:"Select a Floor Color:"}),K.jsx("div",{className:"color-options",children:t.map(n=>K.jsx("div",{onClick:()=>e(n.color),className:"color-option",style:{backgroundColor:n.color},children:K.jsx("p",{children:n.name})},n.id))})]})]})};function O(o,e,t){return(e=function(n){var s=function(a,c){if(typeof a!="object"||!a)return a;var u=a[Symbol.toPrimitive];if(u!==void 0){var d=u.call(a,c||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(a)}(n,"string");return typeof s=="symbol"?s:s+""}(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}function kg(o,e){var t=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(o,s).enumerable})),t.push.apply(t,n)}return t}function P(o){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kg(Object(t),!0).forEach(function(n){O(o,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(t)):kg(Object(t)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(t,n))})}return o}function Be(o,e){if(o==null)return{};var t,n,s=function(c,u){if(c==null)return{};var d={};for(var f in c)if({}.hasOwnProperty.call(c,f)){if(u.indexOf(f)>=0)continue;d[f]=c[f]}return d}(o,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(o,t)&&(s[t]=o[t])}return s}function yr(o,e){return e||(e=o.slice(0)),Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(e)}}))}class Eg{constructor(){O(this,"browserShadowBlurConstant",1),O(this,"DPI",96),O(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),O(this,"perfLimitSizeTotal",2097152),O(this,"maxCacheSideLimit",4096),O(this,"minCacheSideLimit",256),O(this,"disableStyleCopyPaste",!1),O(this,"enableGLFiltering",!0),O(this,"textureSize",4096),O(this,"forceGLPutImageData",!1),O(this,"cachesBoundsOfCurve",!1),O(this,"fontPaths",{}),O(this,"NUM_FRACTION_DIGITS",4)}}const Ce=new class extends Eg{constructor(o){super(),this.configure(o)}configure(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,o)}addFonts(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=P(P({},this.fontPaths),o)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(o=>{delete this.fontPaths[o]})}clearFonts(){this.fontPaths={}}restoreDefaults(o){const e=new Eg,t=(o==null?void 0:o.reduce((n,s)=>(n[s]=e[s],n),{}))||e;this.configure(t)}},gr=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return console[o]("fabric",...t)};class xn extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class iS extends xn{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class sS{}class oS extends sS{testPrecision(e,t){const n="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,n),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(t,n)),t.getExtension("WEBGL_lose_context").loseContext(),gr("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const aS={};let Og;const Sn=()=>Og||(Og={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new oS,dispose(){},copyPasteData:aS}),Li=()=>Sn().document,Rh=()=>Sn().window,i0=()=>{var o;return Math.max((o=Ce.devicePixelRatio)!==null&&o!==void 0?o:Rh().devicePixelRatio,1)},Ps=new class{constructor(){O(this,"charWidthsCache",{}),O(this,"boundsOfCurveCache",{})}getFontCache(o){let{fontFamily:e,fontStyle:t,fontWeight:n}=o;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],a="".concat(t.toLowerCase(),"_").concat((n+"").toLowerCase());return s[a]||(s[a]={}),s[a]}clearFontCache(o){(o=(o||"").toLowerCase())?this.charWidthsCache[o]&&delete this.charWidthsCache[o]:this.charWidthsCache={}}limitDimsByArea(o){const{perfLimitSizeTotal:e}=Ce,t=Math.sqrt(e*o);return[Math.floor(t),Math.floor(e/t)]}},lh="6.5.4";function Ua(){}const qs=Math.PI/2,Ja=2*Math.PI,Lh=Math.PI/180,wt=Object.freeze([1,0,0,1,0,0]),jh=16,dr=.4477152502,ye="center",Pe="left",Pt="top",ch="bottom",Ke="right",Mt="none",Ah=/\r?\n/,s0="moving",Sl="scaling",o0="rotating",Fh="rotate",a0="skewing",Is="resizing",lS="modifyPoly",cS="modifyPath",Za="changed",Cl="scale",Lt="scaleX",Kt="scaleY",ji="skewX",Ai="skewY",nt="fill",Rt="stroke",el="modified",_i="json",Fu="svg",Z=new class{constructor(){this[_i]=new Map,this[Fu]=new Map}has(o){return this[_i].has(o)}getClass(o){const e=this[_i].get(o);if(!e)throw new xn("No class registered for ".concat(o));return e}setClass(o,e){e?this[_i].set(e,o):(this[_i].set(o.type,o),this[_i].set(o.type.toLowerCase(),o))}getSVGClass(o){return this[Fu].get(o)}setSVGClass(o,e){this[Fu].set(e??o.type.toLowerCase(),o)}},tl=new class extends Array{remove(o){const e=this.indexOf(o);e>-1&&this.splice(e,1)}cancelAll(){const o=this.splice(0);return o.forEach(e=>e.abort()),o}cancelByCanvas(o){if(!o)return[];const e=this.filter(t=>{var n;return t.target===o||typeof t.target=="object"&&((n=t.target)===null||n===void 0?void 0:n.canvas)===o});return e.forEach(t=>t.abort()),e}cancelByTarget(o){if(!o)return[];const e=this.filter(t=>t.target===o);return e.forEach(t=>t.abort()),e}};class uS{constructor(){O(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[s,a]=n;this.on(s,a)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(s=>{let[a,c]=s;n.push(this.once(a,c))}),()=>n.forEach(s=>s())}if(t){const n=this.on(e,function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];t.call(this,...a),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],s=n.indexOf(t);s>-1&&n.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[s,a]=n;this._removeEventListener(s,a)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const s=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(s)for(let a=0;a<s.length;a++)s[a].call(this,t||{})}}const wi=(o,e)=>{const t=o.indexOf(e);return t!==-1&&o.splice(t,1),o},Un=o=>{if(o===0)return 1;switch(Math.abs(o)/qs){case 1:case 3:return 0;case 2:return-1}return Math.cos(o)},Vn=o=>{if(o===0)return 0;const e=o/qs,t=Math.sign(o);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(o)};class F{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new F(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new F(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new F(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new F(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new F(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new F(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new F(this.x/e.x,this.y/e.y)}scalarDivide(e){return new F(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new F(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new F(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new F(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new F(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ih;const n=Vn(e),s=Un(e),a=this.subtract(t);return new F(a.x*s-a.y*n,a.x*n+a.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new F(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Ih=new F(0,0),Va=o=>!!o&&Array.isArray(o._objects);function l0(o){class e extends o{constructor(){super(...arguments),O(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];const c=this._objects.push(...s);return s.forEach(u=>this._onObjectAdded(u)),c}insertAt(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return this._objects.splice(n,0,...a),a.forEach(u=>this._onObjectAdded(u)),this._objects.length}remove(){const n=this._objects,s=[];for(var a=arguments.length,c=new Array(a),u=0;u<a;u++)c[u]=arguments[u];return c.forEach(d=>{const f=n.indexOf(d);f!==-1&&(n.splice(f,1),s.push(d),this._onObjectRemoved(d))}),s}forEachObject(n){this.getObjects().forEach((s,a,c)=>n(s,a,c))}getObjects(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return s.length===0?[...this._objects]:this._objects.filter(c=>c.isType(...s))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,s){return!!this._objects.includes(n)||!!s&&this._objects.some(a=>a instanceof e&&a.contains(n,!0))}complexity(){return this._objects.reduce((n,s)=>n+=s.complexity?s.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(wi(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(wi(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,s){if(!n)return!1;const a=this._objects.indexOf(n);if(a!==0){const c=this.findNewLowerIndex(n,a,s);return wi(this._objects,n),this._objects.splice(c,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,s){if(!n)return!1;const a=this._objects.indexOf(n);if(a!==this._objects.length-1){const c=this.findNewUpperIndex(n,a,s);return wi(this._objects,n),this._objects.splice(c,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,s){return n!==this._objects[s]&&(wi(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,s,a){let c;if(a){c=s;for(let u=s-1;u>=0;--u)if(n.isOverlapping(this._objects[u])){c=u;break}}else c=s-1;return c}findNewUpperIndex(n,s,a){let c;if(a){c=s;for(let u=s+1;u<this._objects.length;++u)if(n.isOverlapping(this._objects[u])){c=u;break}}else c=s+1;return c}collectObjects(n){let{left:s,top:a,width:c,height:u}=n,{includeIntersecting:d=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const f=[],g=new F(s,a),y=g.add(new F(c,u));for(let v=this._objects.length-1;v>=0;v--){const w=this._objects[v];w.selectable&&w.visible&&(d&&w.intersectsWithRect(g,y)||w.isContainedWithinRect(g,y)||d&&w.containsPoint(g)||d&&w.containsPoint(y))&&f.push(w)}return f}}return e}class c0 extends uS{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function Ha(o){return Rh().requestAnimationFrame(o)}function hS(o){return Rh().cancelAnimationFrame(o)}let dS=0;const mr=()=>dS++,hn=()=>{const o=Li().createElement("canvas");if(!o||o.getContext===void 0)throw new xn("Failed to create `canvas` element");return o},fS=()=>Li().createElement("img"),Cn=o=>{const e=hn();return e.width=o.width,e.height=o.height,e},u0=(o,e,t)=>o.toDataURL("image/".concat(e),t),Qe=o=>o*Lh,Hr=o=>o/Lh,pS=o=>o.every((e,t)=>e===wt[t]),Ot=(o,e,t)=>new F(o).transform(e,t),cn=o=>{const e=1/(o[0]*o[3]-o[1]*o[2]),t=[e*o[3],-e*o[1],-e*o[2],e*o[0],0,0],{x:n,y:s}=new F(o[4],o[5]).transform(t,!0);return t[4]=-n,t[5]=-s,t},ct=(o,e,t)=>[o[0]*e[0]+o[2]*e[1],o[1]*e[0]+o[3]*e[1],o[0]*e[2]+o[2]*e[3],o[1]*e[2]+o[3]*e[3],t?0:o[0]*e[4]+o[2]*e[5]+o[4],t?0:o[1]*e[4]+o[3]*e[5]+o[5]],Nh=(o,e)=>o.reduceRight((t,n)=>n&&t?ct(n,t,e):n||t,void 0)||wt.concat(),h0=o=>{let[e,t]=o;return Math.atan2(t,e)},nl=o=>{const e=h0(o),t=Math.pow(o[0],2)+Math.pow(o[1],2),n=Math.sqrt(t),s=(o[0]*o[3]-o[2]*o[1])/n,a=Math.atan2(o[0]*o[2]+o[1]*o[3],t);return{angle:Hr(e),scaleX:n,scaleY:s,skewX:Hr(a),skewY:0,translateX:o[4]||0,translateY:o[5]||0}},Ks=function(o){return[1,0,0,1,o,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Qs(){let{angle:o=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=Qe(o),s=Un(n),a=Vn(n);return[s,a,-a,s,e?e-(s*e-a*t):0,t?t-(a*e+s*t):0]}const Bh=function(o){return[o,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,0,0]},d0=o=>Math.tan(Qe(o)),f0=o=>[1,0,d0(o),1,0,0],p0=o=>[1,d0(o),0,1,0,0],Tl=o=>{let{scaleX:e=1,scaleY:t=1,flipX:n=!1,flipY:s=!1,skewX:a=0,skewY:c=0}=o,u=Bh(n?-e:e,s?-t:t);return a&&(u=ct(u,f0(a),!0)),c&&(u=ct(u,p0(c),!0)),u},gS=o=>{const{translateX:e=0,translateY:t=0,angle:n=0}=o;let s=Ks(e,t);n&&(s=ct(s,Qs({angle:n})));const a=Tl(o);return pS(a)||(s=ct(s,a)),s},Xa=function(o){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,s){if(e&&e.aborted)return s(new iS("loadImage"));const a=fS();let c;e&&(c=function(d){a.src="",s(d)},e.addEventListener("abort",c,{once:!0}));const u=function(){a.onload=a.onerror=null,c&&(e==null||e.removeEventListener("abort",c)),n(a)};o?(a.onload=u,a.onerror=function(){c&&(e==null||e.removeEventListener("abort",c)),s(new xn("Error loading ".concat(a.src)))},t&&(a.crossOrigin=t),a.src=o):u()})},Ns=function(o){let{signal:e,reviver:t=Ua}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,s)=>{const a=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(o.map(c=>Z.getClass(c.type).fromObject(c,{signal:e}).then(u=>(t(c,u),a.push(u),u)))).then(n).catch(c=>{a.forEach(u=>{u.dispose&&u.dispose()}),s(c)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},bl=function(o){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,n)=>{const s=[];e&&e.addEventListener("abort",n,{once:!0});const a=Object.values(o).map(u=>u&&u.type&&Z.has(u.type)?Ns([u],{signal:e}).then(d=>{let[f]=d;return s.push(f),f}):u),c=Object.keys(o);Promise.all(a).then(u=>u.reduce((d,f,g)=>(d[c[g]]=f,d),{})).then(t).catch(u=>{s.forEach(d=>{d.dispose&&d.dispose()}),n(u)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},Fi=function(o){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in o&&(e[t]=o[t]),e),{})},zh=(o,e)=>Object.keys(o).reduce((t,n)=>(e(o[n],n,o)&&(t[n]=o[n]),t),{}),Dg={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Iu=(o,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+6*(e-o)*t:t<.5?e:t<2/3?o+(e-o)*(2/3-t)*6:o),Pg=(o,e,t,n)=>{o/=255,e/=255,t/=255;const s=Math.max(o,e,t),a=Math.min(o,e,t);let c,u;const d=(s+a)/2;if(s===a)c=u=0;else{const f=s-a;switch(u=d>.5?f/(2-s-a):f/(s+a),s){case o:c=(e-t)/f+(e<t?6:0);break;case e:c=(t-o)/f+2;break;case t:c=(o-e)/f+4}c/=6}return[Math.round(360*c),Math.round(100*u),Math.round(100*d),n]},Mg=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(o)/(o.endsWith("%")?100:1)},da=o=>Math.min(Math.round(o),255).toString(16).toUpperCase().padStart(2,"0"),Rg=o=>{let[e,t,n,s=1]=o;const a=Math.round(.3*e+.59*t+.11*n);return[a,a,a,s]};class Re{constructor(e){if(O(this,"isUnrecognised",!1),e)if(e instanceof Re)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,s,a=1]=e;this.setSource([t,n,s,a])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Dg&&(e=Dg[e]),e==="transparent"?[255,255,255,0]:Re.sourceFromHex(e)||Re.sourceFromRgb(e)||Re.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=Pg(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,s]=Pg(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,s]=this.getSource();return"".concat(da(e)).concat(da(t)).concat(da(n)).concat(da(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Rg(this.getSource())),this}toBlackWhite(e){const[t,,,n]=Rg(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,n]),this}overlayWith(e){e instanceof Re||(e=new Re(e));const t=this.getSource(),n=e.getSource(),[s,a,c]=t.map((u,d)=>Math.round(.5*u+.5*n[d]));return this.setSource([s,a,c,t[3]]),this}static fromRgb(e){return Re.fromRgba(e)}static fromRgba(e){return new Re(Re.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[n,s,a]=t.slice(1,4).map(c=>{const u=parseFloat(c);return c.endsWith("%")?Math.round(2.55*u):u});return[n,s,a,Mg(t[4])]}}static fromHsl(e){return Re.fromHsla(e)}static fromHsla(e){return new Re(Re.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(Re.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,a=parseFloat(t[3])/100;let c,u,d;if(s===0)c=u=d=a;else{const f=a<=.5?a*(s+1):a+s-a*s,g=2*a-f;c=Iu(g,f,n+1/3),u=Iu(g,f,n),d=Iu(g,f,n-1/3)}return[Math.round(255*c),Math.round(255*u),Math.round(255*d),Mg(t[4])]}static fromHex(e){return new Re(Re.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(d=>d+d):t.match(/.{2}/g);const[s,a,c,u=255]=n.map(d=>parseInt(d,16));return[s,a,c,u/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?Hr(n):t.includes("turn")?360*n:n}}const Ve=(o,e)=>parseFloat(Number(o).toFixed(e)),bi=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jh;const t=/\D{0,2}$/.exec(o),n=parseFloat(o),s=Ce.DPI;switch(t==null?void 0:t[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*e;default:return n}},mS=o=>{const[e,t]=o.trim().split(" "),[n,s]=(a=e)&&a!==Mt?[a.slice(1,4),a.slice(5,8)]:a===Mt?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:t||"meet",alignX:n,alignY:s}},rl=o=>"matrix("+o.map(e=>Ve(e,Ce.NUM_FRACTION_DIGITS)).join(" ")+")",Bs=function(o,e){let t,n,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const a=new Re(e),c=a.getAlpha();t=a.toRgb(),c!==1&&(n=c.toString())}else t="none";return s?"".concat(o,": ").concat(t,"; ").concat(n?"".concat(o,"-opacity: ").concat(n,"; "):""):"".concat(o,'="').concat(t,'" ').concat(n?"".concat(o,'-opacity="').concat(n,'" '):"")},qt=o=>!!o&&o.toLive!==void 0,Lg=o=>!!o&&typeof o.toObject=="function",jg=o=>!!o&&o.offsetX!==void 0&&"source"in o,Rr=o=>!!o&&"multiSelectionStacking"in o;function g0(o){const e=o&&ln(o);let t=0,n=0;if(!o||!e)return{left:t,top:n};let s=o;const a=e.documentElement,c=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=c.scrollLeft||a.scrollLeft||0,n=c.scrollTop||a.scrollTop||0):(t+=s.scrollLeft||0,n+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:n}}const ln=o=>o.ownerDocument||null,m0=o=>{var e;return((e=o.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},y0=function(o,e,t){let{width:n,height:s}=t,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;o.width=n,o.height=s,a>1&&(o.setAttribute("width",(n*a).toString()),o.setAttribute("height",(s*a).toString()),e.scale(a,a))},uh=(o,e)=>{let{width:t,height:n}=e;t&&(o.style.width=typeof t=="number"?"".concat(t,"px"):t),n&&(o.style.height=typeof n=="number"?"".concat(n,"px"):n)};function Ag(o){return o.onselectstart!==void 0&&(o.onselectstart=()=>!1),o.style.userSelect=Mt,o}class v0{constructor(e){O(this,"_originalCanvasStyle",void 0),O(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&n.getContext!==void 0?e:e&&Li().getElementById(e)||hn();var n;if(t.hasAttribute("data-fabric"))throw new xn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(n)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:s}=this.lower;y0(n,s,e,t)}setCSSDimensions(e){uh(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&ln(e),s={left:0,top:0};if(!n)return s;const a=((t=m0(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(a.borderLeftWidth,10)||0,s.top+=parseInt(a.borderTopWidth,10)||0,s.left+=parseInt(a.paddingLeft,10)||0,s.top+=parseInt(a.paddingTop,10)||0;let c={left:0,top:0};const u=n.documentElement;e.getBoundingClientRect!==void 0&&(c=e.getBoundingClientRect());const d=g0(e);return{left:c.left+d.left-(u.clientLeft||0)+s.left,top:c.top+d.top-(u.clientTop||0)+s.top}}(this.lower.el)}dispose(){Sn().dispose(this.lower.el),delete this.lower}}const yS={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...wt]};class Js extends l0(c0){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Js.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new v0(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const a=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),a}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(gr("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?i0():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=P({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,s=[...this.viewportTransform],a=Ot(e,cn(s));s[0]=t,s[3]=t;const c=Ot(a,s);s[4]+=n.x-c.x,s[5]+=n.y-c.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new F(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new F(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Ha(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=cn(this.viewportTransform),s=Ot({x:0,y:0},n),a=Ot({x:e,y:t},n),c=s.min(a),u=s.max(a);return this.vptCoords={tl:c,tr:new F(u.x,c.y),bl:new F(c.x,u.y),br:u}}cancelRequestedRender(){this.nextRenderHandle&&(hS(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,s=t.length;n<s;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],s=this["".concat(t,"Image")],a=this.viewportTransform,c=this["".concat(t,"Vpt")];if(!n&&!s)return;const u=qt(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=u?n.toLive(e):n,c&&e.transform(...a),u){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const d=n.gradientTransform||n.patternTransform;d&&e.transform(...d)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:d}=this;this.skipOffscreen=c,c&&e.transform(...a),s.render(e),this.skipOffscreen=d,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new F(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new F(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new F(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new F(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new F(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Ot(this.getCenterPoint(),cn(this.viewportTransform))}_centerObject(e,t){e.setXY(t,ye,ye),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,s=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return P(P(P({version:lh},Fi(this,t)),{},{objects:this._objects.filter(a=>!a.excludeFromExport).map(a=>this._toObject(a,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,n){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const a=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!s),a}__serializeBgOverlay(e,t){const n={},s=this.backgroundImage,a=this.overlayImage,c=this.backgroundColor,u=this.overlayColor;return qt(c)?c.excludeFromExport||(n.background=c.toObject(t)):c&&(n.background=c),qt(u)?u.excludeFromExport||(n.overlay=u.toObject(t)):u&&(n.overlay=u),s&&!s.excludeFromExport&&(n.backgroundImage=this._toObject(s,e,t)),a&&!a.excludeFromExport&&(n.overlayImage=this._toObject(a,e,t)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),s=t.height||"".concat(this.height),a=Ce.NUM_FRACTION_DIGITS,c=t.viewBox;let u;if(c)u='viewBox="'.concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height,'" ');else if(this.svgViewportTransformation){const d=this.viewportTransform;u='viewBox="'.concat(Ve(-d[4]/d[0],a)," ").concat(Ve(-d[5]/d[3],a)," ").concat(Ve(this.width/d[0],a)," ").concat(Ve(this.height/d[3],a),'" ')}else u='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',u,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",lh,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(mr()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(qt(t)){const n=this["".concat(e,"Vpt")],s=this.viewportTransform,a={isType:()=>!1,width:this.width/(n?s[0]:1),height:this.height/(n?s[3]:1)};return t.toSVG(a,{additionalTransform:n?rl(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=Ce.fontPaths;this._objects.forEach(function a(c){e.push(c),Va(c)&&c._objects.forEach(a)}),e.forEach(a=>{if(!(c=a)||typeof c._renderText!="function")return;var c;const{styles:u,fontFamily:d}=a;!t[d]&&n[d]&&(t[d]=!0,u&&Object.values(u).forEach(f=>{Object.values(f).forEach(g=>{let{fontFamily:y=""}=g;!t[y]&&n[y]&&(t[y]=!0)})}))});const s=Object.keys(t).map(a=>`		@font-face {
			font-family: '`.concat(a,`';
			src: url('`).concat(n[a],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(qt(n)){const s=n.repeat||"",a=this.width,c=this.height,u=this["".concat(t,"Vpt")]?rl(cn(this.viewportTransform)):"";e.push('<rect transform="'.concat(u," translate(").concat(a/2,",").concat(c/2,')" x="').concat(n.offsetX-a/2,'" y="').concat(n.offsetY-c/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!jg(n)?a:n.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!jg(n)?c:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new xn("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:a=[],backgroundImage:c,background:u,overlayImage:d,overlay:f,clipPath:g}=s,y=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Ns(a,{reviver:t,signal:n}),bl({backgroundImage:c,backgroundColor:u,overlayImage:d,overlayColor:f,clipPath:g},{signal:n})]).then(v=>{let[w,x]=v;return this.clear(),this.add(...w),this.set(s),this.set(x),this.renderOnAddRemove=y,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Cn(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:s=1,enableRetinaScaling:a=!1}=e,c=s*(a?this.getRetinaScaling():1);return u0(this.toCanvasElement(c,e),t,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:n,left:s,top:a,filter:c}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=(t||this.width)*e,d=(n||this.height)*e,f=this.getZoom(),g=this.width,y=this.height,v=this.skipControlsDrawing,w=f*e,x=this.viewportTransform,S=[w,0,0,w,(x[4]-(s||0))*e,(x[5]-(a||0))*e],C=this.enableRetinaScaling,b=Cn({width:u,height:d}),k=c?this._objects.filter(R=>c(R)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=S,this.width=u,this.height=d,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),k),this.viewportTransform=x,this.width=g,this.height=y,this.calcViewportBoundaries(),this.enableRetinaScaling=C,this.skipControlsDrawing=v,b}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),tl.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}O(Js,"ownDefaults",yS);const vS=["touchstart","touchmove","touchend"],_S=o=>{const e=g0(o.target),t=function(n){const s=n.changedTouches;return s&&s[0]?s[0]:n}(o);return new F(t.clientX+e.left,t.clientY+e.top)},hh=o=>vS.includes(o.type)||o.pointerType==="touch",dh=o=>{o.preventDefault(),o.stopPropagation()},Bn=o=>{let e=0,t=0,n=0,s=0;for(let a=0,c=o.length;a<c;a++){const{x:u,y:d}=o[a];(u>n||!a)&&(n=u),(u<e||!a)&&(e=u),(d>s||!a)&&(s=d),(d<t||!a)&&(t=d)}return{left:e,top:t,width:n-e,height:s-t}},xS=["translateX","translateY","scaleX","scaleY"],wS=(o,e)=>il(o,ct(e,o.calcOwnMatrix())),il=(o,e)=>{const t=nl(e),{translateX:n,translateY:s,scaleX:a,scaleY:c}=t,u=Be(t,xS),d=new F(n,s);o.flipX=!1,o.flipY=!1,Object.assign(o,u),o.set({scaleX:a,scaleY:c}),o.setPositionByOrigin(d,ye,ye)},SS=o=>{o.scaleX=1,o.scaleY=1,o.skewX=0,o.skewY=0,o.flipX=!1,o.flipY=!1,o.rotate(0)},_0=o=>({scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,angle:o.angle,left:o.left,flipX:o.flipX,flipY:o.flipY,top:o.top}),Wh=(o,e,t)=>{const n=o/2,s=e/2,a=[new F(-n,-s),new F(n,-s),new F(-n,s),new F(n,s)].map(u=>u.transform(t)),c=Bn(a);return new F(c.width,c.height)},kl=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt;return ct(cn(arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt),o)},ki=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt;return o.transform(kl(e,t))},CS=function(o){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt;return o.transform(kl(e,t),!0)},TS=(o,e,t)=>{const n=kl(e,t);return il(o,ct(n,o.calcOwnMatrix())),n},x0=(o,e)=>{var t;const{transform:{target:n}}=e;(t=n.canvas)===null||t===void 0||t.fire("object:".concat(o),P(P({},e),{},{target:n})),n.fire(o,e)},bS={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ze=o=>typeof o=="string"?bS[o]:o-.5,sl="not-allowed";function w0(o){return Ze(o.originX)===Ze(ye)&&Ze(o.originY)===Ze(ye)}function Fg(o){return .5-Ze(o)}const un=(o,e)=>o[e],S0=(o,e,t,n)=>({e:o,transform:e,pointer:new F(t,n)});function C0(o,e){const t=o.getTotalAngle()+Hr(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function Uh(o,e,t,n,s){var a;let{target:c,corner:u}=o;const d=c.controls[u],f=((a=c.canvas)===null||a===void 0?void 0:a.getZoom())||1,g=c.padding/f,y=function(v,w,x,S){const C=v.getRelativeCenterPoint(),b=x!==void 0&&S!==void 0?v.translateToGivenOrigin(C,ye,ye,x,S):new F(v.left,v.top);return(v.angle?w.rotate(-Qe(v.angle),C):w).subtract(b)}(c,new F(n,s),e,t);return y.x>=g&&(y.x-=g),y.x<=-g&&(y.x+=g),y.y>=g&&(y.y-=g),y.y<=g&&(y.y+=g),y.x-=d.offsetX,y.y-=d.offsetY,y}const kS=(o,e,t,n)=>{const{target:s,offsetX:a,offsetY:c}=e,u=t-a,d=n-c,f=!un(s,"lockMovementX")&&s.left!==u,g=!un(s,"lockMovementY")&&s.top!==d;return f&&s.set(Pe,u),g&&s.set(Pt,d),(f||g)&&x0(s0,S0(o,e,t,n)),f||g};class T0{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):Mt,a=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",u=this.strokeLineJoin?this.strokeLineJoin:"miter",d=this.strokeMiterLimit?this.strokeMiterLimit:"4",f=this.opacity!==void 0?this.opacity:"1",g=this.visible?"":" visibility: hidden;",y=e?"":this.getSvgFilter(),v=Bs(nt,this.fill);return[Bs(Rt,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",u,"; ","stroke-miterlimit: ",d,"; ",v,"fill-rule: ",t,"; ","opacity: ",f,";",y,g].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(rl(n));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),a=e.indexOf("COMMON_PARTS");return e[a]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:s,additionalTransform:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=t?"":'style="'.concat(this.getSvgStyles(),'" '),u=s?'style="'.concat(this.getSvgFilter(),'" '):"",d=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=d&&d.absolutePositioned,y=this.stroke,v=this.fill,w=this.shadow,x=[],S=e.indexOf("COMMON_PARTS");let C;d&&(d.clipPathId="CLIPPATH_".concat(mr()),C='<clipPath id="'.concat(d.clipPathId,`" >
`).concat(d.toClipPathSVG(n),`</clipPath>
`)),g&&x.push("<g ",u,this.getSvgCommons(),` >
`),x.push("<g ",this.getSvgTransform(!1),g?"":u+this.getSvgCommons(),` >
`);const b=[c,f,t?"":this.addPaintOrder()," ",a?'transform="'.concat(a,'" '):""].join("");return e[S]=b,qt(v)&&x.push(v.toSVG(this)),qt(y)&&x.push(y.toSVG(this)),w&&x.push(w.toSVG(this)),d&&x.push(C),x.push(e.join("")),x.push(`</g>
`),g&&x.push(`</g>
`),n?n(x.join("")):x.join("")}addPaintOrder(){return this.paintFirst!==nt?' paint-order="'.concat(this.paintFirst,'" '):""}}function El(o){return new RegExp("^("+o.join("|")+")\\b","i")}var Ig;const Xr=String.raw(Ig||(Ig=yr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),ES=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Xr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Xr+"))?\\s+(.*)"),OS={cx:Pe,x:Pe,r:"radius",cy:Pt,y:Pt,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Nu="font-size",Bu="clip-path";El(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);El(["symbol","image","marker","pattern","view","svg"]);const Ng=El(["symbol","g","a","svg","clipPath","defs"]),DS=new F(1,0),b0=new F,k0=(o,e)=>o.rotate(e),fh=(o,e)=>new F(e).subtract(o),ph=o=>o.distanceFrom(b0),gh=(o,e)=>Math.atan2(Ms(o,e),MS(o,e)),PS=o=>gh(DS,o),Vh=o=>o.eq(b0)?o:o.scalarDivide(ph(o)),E0=function(o){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Vh(new F(-o.y,o.x).scalarMultiply(e?1:-1))},Ms=(o,e)=>o.x*e.y-o.y*e.x,MS=(o,e)=>o.x*e.x+o.y*e.y,Bg=(o,e,t)=>{if(o.eq(e)||o.eq(t))return!0;const n=Ms(e,t),s=Ms(e,o),a=Ms(t,o);return n>=0?s>=0&&a<=0:!(s<=0&&a>=0)},zg="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Wg=new RegExp("(?:\\s|^)"+zg+zg+"("+Xr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class zn{constructor(e){const t=typeof e=="string"?zn.parseShadow(e):e;Object.assign(this,zn.ownDefaults,t),this.id=mr()}static parseShadow(e){const t=e.trim(),[,n=0,s=0,a=0]=(Wg.exec(t)||[]).map(c=>parseFloat(c)||0);return{color:(t.replace(Wg,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:s,blur:a}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=k0(new F(this.offsetX,this.offsetY),Qe(-e.angle)),n=new Re(this.color);let s=40,a=40;return e.width&&e.height&&(s=100*Ve((Math.abs(t.x)+this.blur)/e.width,Ce.NUM_FRACTION_DIGITS)+20,a=100*Ve((Math.abs(t.y)+this.blur)/e.height,Ce.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(a,'%" height="').concat(100+2*a,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Ve(this.blur?this.blur/2:0,Ce.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Ve(t.x,Ce.NUM_FRACTION_DIGITS),'" dy="').concat(Ve(t.y,Ce.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=zn.ownDefaults;return this.includeDefaultValues?e:zh(e,(n,s)=>n!==t[s])}static async fromObject(e){return new this(e)}}O(zn,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),O(zn,"type","shadow"),Z.setClass(zn,"shadow");const Oi=(o,e,t)=>Math.max(o,Math.min(e,t)),RS=[Pt,Pe,Lt,Kt,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",ji,Ai],Xn=[nt,Rt,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],LS={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Pe,originY:Pt,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:nt,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},jS=(o,e,t,n)=>-t*Math.cos(o/n*qs)+t+e,AS=()=>!1;class Hh{constructor(e){let{startValue:t,byValue:n,duration:s=500,delay:a=0,easing:c=jS,onStart:u=Ua,onChange:d=Ua,onComplete:f=Ua,abort:g=AS,target:y}=e;O(this,"_state","pending"),O(this,"durationProgress",0),O(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=a,this.easing=c,this._onStart=u,this._onChange=d,this._onComplete=f,this._abort=g,this.target=y,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Ha(e),this.delay):Ha(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:s,valueProgress:a}=this.calculate(n);this.value=Object.freeze(s),this.valueProgress=a,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Ha(this.tick)))}register(){tl.push(this)}unregister(){tl.remove(this)}abort(){this._state="aborted",this.unregister()}}const FS=["startValue","endValue"];class IS extends Hh{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(P(P({},Be(e,FS)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const NS=["startValue","endValue"];class BS extends Hh{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(P(P({},Be(e,NS)),{},{startValue:t,byValue:n.map((s,a)=>s-t[a])}))}calculate(e){const t=this.startValue.map((n,s)=>this.easing(e,n,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const zS=["startValue","endValue","easing","onChange","onComplete","abort"],WS=(o,e,t,n)=>e+t*(1-Math.cos(o/n*qs)),zu=o=>o&&((e,t,n)=>o(new Re(e).toRgba(),t,n));class US extends Hh{constructor(e){let{startValue:t,endValue:n,easing:s=WS,onChange:a,onComplete:c,abort:u}=e,d=Be(e,zS);const f=new Re(t).getSource(),g=new Re(n).getSource();super(P(P({},d),{},{startValue:f,byValue:g.map((y,v)=>y-f[v]),easing:s,onChange:zu(a),onComplete:zu(c),abort:zu(u)}))}calculate(e){const[t,n,s,a]=this.startValue.map((u,d)=>this.easing(e,u,this.byValue[d],this.duration,d)),c=[...[t,n,s].map(Math.round),Oi(0,a,1)];return{value:c,valueProgress:c.map((u,d)=>this.byValue[d]!==0?Math.abs((u-this.startValue[d])/this.byValue[d]):0).find(u=>u!==0)||0}}}function O0(o){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(o)?new BS(o):new IS(o);return e.start(),e}function VS(o){const e=new US(o);return e.start(),e}class Ue{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const a=fh(t,n),c=fh(t,e).divide(a);return s?Math.abs(c.x)===Math.abs(c.y):c.x===c.y&&c.x>=0&&c.x<=1}}static isPointInPolygon(e,t){const n=new F(e).setX(Math.min(e.x-1,...t.map(a=>a.x)));let s=0;for(let a=0;a<t.length;a++){const c=this.intersectSegmentSegment(t[a],t[(a+1)%t.length],e,n);if(c.includes(e))return!0;s+=+(c.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,n,s){let a=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const u=t.x-e.x,d=t.y-e.y,f=s.x-n.x,g=s.y-n.y,y=e.x-n.x,v=e.y-n.y,w=f*v-g*y,x=u*v-d*y,S=g*u-f*d;if(S!==0){const C=w/S,b=x/S;return(a||0<=C&&C<=1)&&(c||0<=b&&b<=1)?new Ue("Intersection").append(new F(e.x+C*u,e.y+C*d)):new Ue}if(w===0||x===0){const C=a||c||Ue.isPointContained(e,n,s)||Ue.isPointContained(t,n,s)||Ue.isPointContained(n,e,t)||Ue.isPointContained(s,e,t);return new Ue(C?"Coincident":void 0)}return new Ue("Parallel")}static intersectSegmentLine(e,t,n,s){return Ue.intersectLineLine(e,t,n,s,!1,!0)}static intersectSegmentSegment(e,t,n,s){return Ue.intersectLineLine(e,t,n,s,!1,!1)}static intersectLinePolygon(e,t,n){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const a=new Ue,c=n.length;for(let u,d,f,g=0;g<c;g++){if(u=n[g],d=n[(g+1)%c],f=Ue.intersectLineLine(e,t,u,d,s,!1),f.status==="Coincident")return f;a.append(...f.points)}return a.points.length>0&&(a.status="Intersection"),a}static intersectSegmentPolygon(e,t,n){return Ue.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new Ue,s=e.length,a=[];for(let c=0;c<s;c++){const u=e[c],d=e[(c+1)%s],f=Ue.intersectSegmentPolygon(u,d,t);f.status==="Coincident"?(a.push(f),n.append(u,d)):n.append(...f.points)}return a.length>0&&a.length===e.length?new Ue("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const s=t.min(n),a=t.max(n),c=new F(a.x,s.y),u=new F(s.x,a.y);return Ue.intersectPolygonPolygon(e,[s,c,a,u])}}class HS extends c0{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Ot(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=Ot(e,cn(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new F(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),a=[e,t,n,s];if(this.group){const c=this.group.calcTransformMatrix();return a.map(u=>Ot(u,c))}return a}intersectsWithRect(e,t){return Ue.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Ue.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:s,width:a,height:c}=this.getBoundingRect();return n>=e.x&&n+a<=t.x&&s>=e.y&&s+c<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Ue.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Bn(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Lt,e),this._set(Kt,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Hr(h0(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||wt.concat()}calcACoords(){const e=Qs({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),s=Ks(t,n),a=ct(s,e),c=this._getTransformedDimensions(),u=c.x/2,d=c.y/2;return{tl:Ot({x:-u,y:-d},a),tr:Ot({x:u,y:-d},a),bl:Ot({x:-u,y:d},a),br:Ot({x:u,y:d},a)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ze(this.originX),Ze(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((a,c)=>a===n[c])?s.value:(this.group&&(t=ct(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},a=gS(s);return this.ownMatrixCache={key:e,value:a},a}_getNonTransformedDimensions(){return new F(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=P({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let s=n,a=0;this.strokeUniform&&(s=0,a=n);const c=t.width+s,u=t.height+s;let d;return d=t.skewX===0&&t.skewY===0?new F(c*t.scaleX,u*t.scaleY):Wh(c,u,Tl(t)),d.scalarAdd(a)}translateToGivenOrigin(e,t,n,s,a){let c=e.x,u=e.y;const d=Ze(s)-Ze(t),f=Ze(a)-Ze(n);if(d||f){const g=this._getTransformedDimensions();c+=d*g.x,u+=f*g.y}return new F(c,u)}translateToCenterPoint(e,t,n){if(t===ye&&n===ye)return e;const s=this.translateToGivenOrigin(e,t,n,ye,ye);return this.angle?s.rotate(Qe(this.angle),e):s}translateToOriginPoint(e,t,n){const s=this.translateToGivenOrigin(e,ye,ye,t,n);return this.angle?s.rotate(Qe(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Ot(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new F(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const s=this.translateToCenterPoint(e,t,n),a=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:a.x,top:a.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Pe,Pt)}}const XS=["type"],YS=["extraParam"];let Ln=class Ya extends HS{static getDefaults(){return Ya.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){gr("warn","Setting type has no effect",e)}constructor(e){super(),O(this,"_cacheContext",null),Object.assign(this,Ya.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=hn(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,s=Ce.maxCacheSideLimit,a=Ce.minCacheSideLimit;if(t<=s&&n<=s&&t*n<=Ce.perfLimitSizeTotal)return t<a&&(e.width=a),n<a&&(e.height=a),e;const c=t/n,[u,d]=Ps.limitDimsByArea(c),f=Oi(a,u,s),g=Oi(a,d,s);return t>f&&(e.zoomX/=t/f,e.width=f,e.capped=!0),n>g&&(e.zoomY/=n/g,e.height=g,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:n,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:s,zoomX:a,zoomY:c,x:u,y:d}=this._limitCacheSize(this._getCacheCanvasDimensions()),f=n!==e.width||s!==e.height,g=this.zoomX!==a||this.zoomY!==c;if(!e||!t)return!1;if(f||g){n!==e.width||s!==e.height?(e.width=n,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const y=u/2,v=d/2;return this.cacheTranslationX=Math.round(e.width/2-y)+y,this.cacheTranslationY=Math.round(e.height/2-v)+v,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(a,c),this.zoomX=a,this.zoomY=c,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new F(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=nl(this.calcTransformMatrix());return new F(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==Lt&&e!==Kt||(t=this._constrainScale(t)),e===Lt&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof zn||(t=new zn(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:a}=this,{width:c,height:u}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:s,cacheTranslationY:a,width:c,height:u,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Rt&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const s=this.fill,a=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=s,this.stroke=a}createClipPathLayer(e,t){const n=Cn(t),s=n.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(a=>{a.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const a=cn(this.calcTransformMatrix());s.transform(a[0],a[1],a[2],a[3],a[4],a[5])}return e.transform(s),e.drawObject(s,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,qt(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(qt(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,s=this.getCanvasRetinaScaling(),[a,,,c]=(n==null?void 0:n.viewportTransform)||wt,u=a*s,d=c*s,f=t.nonScaling?new F(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Ce.browserShadowBlurConstant*(u+d)*(f.x+f.y)/4,e.shadowOffsetX=t.offsetX*u*f.x,e.shadowOffsetY=t.offsetY*d*f.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!qt(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,a=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,a):e.transform(1,0,0,1,s,a),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:s,offsetY:a}}_renderPaintInOrder(e){this.paintFirst===Rt?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),a=this.getCanvasRetinaScaling(),c=s.x/this.scaleX/a,u=s.y/this.scaleY/a,d=Cn({width:Math.ceil(c),height:Math.ceil(u)}),f=d.getContext("2d");f&&(f.beginPath(),f.moveTo(0,0),f.lineTo(c,0),f.lineTo(c,u),f.lineTo(0,u),f.closePath(),f.translate(c/2,u/2),f.scale(s.zoomX/this.scaleX/a,s.zoomY/this.scaleY/a),this._applyPatternGradientTransform(f,t),f.fillStyle=t.toLive(e),f.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/s.zoomX,a*this.scaleY/s.zoomY),e.strokeStyle=(n=f.createPattern(d,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new F(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Z.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=_0(this),n=this.group,s=this.shadow,a=Math.abs,c=e.enableRetinaScaling?i0():1,u=(e.multiplier||1)*c,d=e.canvasProvider||(k=>new Js(k,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&SS(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&TS(this,this.getViewportTransform()),this.setCoords();const f=hn(),g=this.getBoundingRect(),y=this.shadow,v=new F;if(y){const k=y.blur,R=y.nonScaling?new F(1,1):this.getObjectScaling();v.x=2*Math.round(a(y.offsetX)+k)*a(R.x),v.y=2*Math.round(a(y.offsetY)+k)*a(R.y)}const w=g.width+v.x,x=g.height+v.y;f.width=Math.ceil(w),f.height=Math.ceil(x);const S=d(f);e.format==="jpeg"&&(S.backgroundColor="#fff"),this.setPositionByOrigin(new F(S.width/2,S.height/2),ye,ye);const C=this.canvas;S._objects=[this],this.set("canvas",S),this.setCoords();const b=S.toCanvasElement(u||1,e);return this.set("canvas",C),this.shadow=s,n&&(this.group=n),this.set(t),this.setCoords(),S._objects=[],S.destroy(),b}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return u0(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:s}=this;if(t){const{x:a,y:c}=this.getRelativeCenterPoint();this.originX=ye,this.originY=ye,this.left=a,this.top=c}if(this.set("angle",e),t){const{x:a,y:c}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,s);this.left=a,this.top=c,this.originX=n,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){tl.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Sn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((n,s)=>{let[a,c]=s;return n[a]=this._animate(a,c,t),n},{})}_animate(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),a=this.constructor.colorProperties.includes(s[s.length-1]),{abort:c,startValue:u,onChange:d,onComplete:f}=n,g=P(P({},n),{},{target:this,startValue:u??s.reduce((y,v)=>y[v],this),endValue:t,abort:c==null?void 0:c.bind(this),onChange:(y,v,w)=>{s.reduce((x,S,C)=>(C===s.length-1&&(x[S]=y),x[S]),this),d&&d(y,v,w)},onComplete:(y,v,w)=>{this.setCoords(),f&&f(y,v,w)}});return a?VS(g):O0(g)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(t.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let s,a=0;a<t.length;a++){if(s=t[a],s===e)return{fork:[this,...t.slice(0,a)],otherFork:[],common:t.slice(a)};for(let c=0;c<n.length;c++){if(this===n[c])return{fork:[],otherFork:[e,...n.slice(0,c)],common:[this,...t]};if(s===n[c])return{fork:[this,...t.slice(0,a)],otherFork:[e,...n.slice(0,c)],common:t.slice(a)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const s=t.fork.pop(),a=t.otherFork.pop(),c=n._objects.indexOf(s),u=n._objects.indexOf(a);return c>-1&&c>u}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Ya.customProperties,this.constructor.customProperties||[]);let t;const n=Ce.NUM_FRACTION_DIGITS,{clipPath:s,fill:a,stroke:c,shadow:u,strokeDashArray:d,left:f,top:g,originX:y,originY:v,width:w,height:x,strokeWidth:S,strokeLineCap:C,strokeDashOffset:b,strokeLineJoin:k,strokeUniform:R,strokeMiterLimit:N,scaleX:z,scaleY:G,angle:X,flipX:W,flipY:te,opacity:oe,visible:pe,backgroundColor:ge,fillRule:ce,paintFirst:we,globalCompositeOperation:je,skewX:Te,skewY:ve}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const Y=Q=>Ve(Q,n),ie=P(P({},Fi(this,e)),{},{type:this.constructor.type,version:lh,originX:y,originY:v,left:Y(f),top:Y(g),width:Y(w),height:Y(x),fill:Lg(a)?a.toObject():a,stroke:Lg(c)?c.toObject():c,strokeWidth:Y(S),strokeDashArray:d&&d.concat(),strokeLineCap:C,strokeDashOffset:b,strokeLineJoin:k,strokeUniform:R,strokeMiterLimit:Y(N),scaleX:Y(z),scaleY:Y(G),angle:Y(X),flipX:W,flipY:te,opacity:Y(oe),shadow:u&&u.toObject(),visible:pe,backgroundColor:ge,fillRule:ce,paintFirst:we,globalCompositeOperation:je,skewX:Y(Te),skewY:Y(ve)},t?{clipPath:t}:null);return this.includeDefaultValues?ie:this._removeDefaultValues(ie)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return zh(e,(s,a)=>{if(a===Pe||a===Pt||a==="type")return!0;const c=n[a];return s!==c&&!(Array.isArray(s)&&Array.isArray(c)&&s.length===0&&c.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Be(e,XS),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=n,a=Be(n,YS);return bl(t,a).then(c=>s?(delete c[s],new this(t[s],c)):new this(c))}static fromObject(e,t){return this._fromObject(e,t)}};O(Ln,"stateProperties",RS),O(Ln,"cacheProperties",Xn),O(Ln,"ownDefaults",LS),O(Ln,"type","FabricObject"),O(Ln,"colorProperties",[nt,Rt,"backgroundColor"]),O(Ln,"customProperties",[]),Z.setClass(Ln),Z.setClass(Ln,"object");const Ii=(o,e,t)=>(n,s,a,c)=>{const u=e(n,s,a,c);return u&&x0(o,P(P({},S0(n,s,a,c)),t)),u};function Ni(o){return(e,t,n,s)=>{const{target:a,originX:c,originY:u}=t,d=a.getRelativeCenterPoint(),f=a.translateToOriginPoint(d,c,u),g=o(e,t,n,s);return a.setPositionByOrigin(f,t.originX,t.originY),g}}const Ug=Ii(Is,Ni((o,e,t,n)=>{const s=Uh(e,e.originX,e.originY,t,n);if(Ze(e.originX)===Ze(ye)||Ze(e.originX)===Ze(Ke)&&s.x<0||Ze(e.originX)===Ze(Pe)&&s.x>0){const{target:a}=e,c=a.strokeWidth/(a.strokeUniform?a.scaleX:1),u=w0(e)?2:1,d=a.width,f=Math.abs(s.x*u/a.scaleX)-c;return a.set("width",Math.max(f,1)),d!==a.width}return!1}));function $S(o,e,t,n,s){n=n||{};const a=this.sizeX||n.cornerSize||s.cornerSize,c=this.sizeY||n.cornerSize||s.cornerSize,u=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,d=u?Rt:nt,f=!u&&(n.cornerStrokeColor||s.cornerStrokeColor);let g,y=e,v=t;o.save(),o.fillStyle=n.cornerColor||s.cornerColor||"",o.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",a>c?(g=a,o.scale(1,c/a),v=t*a/c):c>a?(g=c,o.scale(a/c,1),y=e*c/a):g=a,o.beginPath(),o.arc(y,v,g/2,0,Ja,!1),o[d](),f&&o.stroke(),o.restore()}function GS(o,e,t,n,s){n=n||{};const a=this.sizeX||n.cornerSize||s.cornerSize,c=this.sizeY||n.cornerSize||s.cornerSize,u=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,d=u?Rt:nt,f=!u&&(n.cornerStrokeColor||s.cornerStrokeColor),g=a/2,y=c/2;o.save(),o.fillStyle=n.cornerColor||s.cornerColor||"",o.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",o.translate(e,t);const v=s.getTotalAngle();o.rotate(Qe(v)),o["".concat(d,"Rect")](-g,-y,a,c),f&&o.strokeRect(-g,-y,a,c),o.restore()}class on{constructor(e){O(this,"visible",!0),O(this,"actionName",Cl),O(this,"angle",0),O(this,"x",0),O(this,"y",0),O(this,"offsetX",0),O(this,"offsetY",0),O(this,"sizeX",0),O(this,"sizeY",0),O(this,"touchSizeX",0),O(this,"touchSizeY",0),O(this,"cursorStyle","crosshair"),O(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,s){var a;let{tl:c,tr:u,br:d,bl:f}=s;return((a=t.canvas)===null||a===void 0?void 0:a.getActiveObject())===t&&t.isControlVisible(e)&&Ue.isPointInPolygon(n,[c,u,d,f])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,s;return(n=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&n!==void 0?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,s){return new F(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,s,a,c){const u=Nh([Ks(n,s),Qs({angle:e}),Bh((a?this.touchSizeX:this.sizeX)||t,(a?this.touchSizeY:this.sizeY)||t)]);return{tl:new F(-.5,-.5).transform(u),tr:new F(.5,-.5).transform(u),br:new F(.5,.5).transform(u),bl:new F(-.5,.5).transform(u)}}render(e,t,n,s,a){((s=s||{}).cornerStyle||a.cornerStyle)==="circle"?$S.call(this,e,t,n,s,a):GS.call(this,e,t,n,s,a)}}const qS=(o,e,t)=>t.lockRotation?sl:e.cursorStyle,KS=Ii(o0,Ni((o,e,t,n)=>{let{target:s,ex:a,ey:c,theta:u,originX:d,originY:f}=e;const g=s.translateToOriginPoint(s.getRelativeCenterPoint(),d,f);if(un(s,"lockRotation"))return!1;const y=Math.atan2(c-g.y,a-g.x),v=Math.atan2(n-g.y,t-g.x);let w=Hr(v-y+u);if(s.snapAngle&&s.snapAngle>0){const S=s.snapAngle,C=s.snapThreshold||S,b=Math.ceil(w/S)*S,k=Math.floor(w/S)*S;Math.abs(w-k)<C?w=k:Math.abs(w-b)<C&&(w=b)}w<0&&(w=360+w),w%=360;const x=s.angle!==w;return s.angle=w,x}));function D0(o,e){const t=e.canvas,n=o[t.uniScaleKey];return t.uniformScaling&&!n||!t.uniformScaling&&n}function P0(o,e,t){const n=un(o,"lockScalingX"),s=un(o,"lockScalingY");if(n&&s||!e&&(n||s)&&t||n&&e==="x"||s&&e==="y")return!0;const{width:a,height:c,strokeWidth:u}=o;return a===0&&u===0&&e!=="y"||c===0&&u===0&&e!=="x"}const QS=["e","se","s","sw","w","nw","n","ne","e"],Ds=(o,e,t)=>{const n=D0(o,t);if(P0(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return sl;const s=C0(t,e);return"".concat(QS[s],"-resize")};function Xh(o,e,t,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const a=e.target,c=s.by,u=D0(o,a);let d,f,g,y,v,w;if(P0(a,c,u))return!1;if(e.gestureScale)f=e.scaleX*e.gestureScale,g=e.scaleY*e.gestureScale;else{if(d=Uh(e,e.originX,e.originY,t,n),v=c!=="y"?Math.sign(d.x||e.signX||1):1,w=c!=="x"?Math.sign(d.y||e.signY||1):1,e.signX||(e.signX=v),e.signY||(e.signY=w),un(a,"lockScalingFlip")&&(e.signX!==v||e.signY!==w))return!1;if(y=a._getTransformedDimensions(),u&&!c){const C=Math.abs(d.x)+Math.abs(d.y),{original:b}=e,k=C/(Math.abs(y.x*b.scaleX/a.scaleX)+Math.abs(y.y*b.scaleY/a.scaleY));f=b.scaleX*k,g=b.scaleY*k}else f=Math.abs(d.x*a.scaleX/y.x),g=Math.abs(d.y*a.scaleY/y.y);w0(e)&&(f*=2,g*=2),e.signX!==v&&c!=="y"&&(e.originX=Fg(e.originX),f*=-1,e.signX=v),e.signY!==w&&c!=="x"&&(e.originY=Fg(e.originY),g*=-1,e.signY=w)}const x=a.scaleX,S=a.scaleY;return c?(c==="x"&&a.set(Lt,f),c==="y"&&a.set(Kt,g)):(!un(a,"lockScalingX")&&a.set(Lt,f),!un(a,"lockScalingY")&&a.set(Kt,g)),x!==a.scaleX||S!==a.scaleY}const fa=Ii(Sl,Ni((o,e,t,n)=>Xh(o,e,t,n))),JS=Ii(Sl,Ni((o,e,t,n)=>Xh(o,e,t,n,{by:"x"}))),ZS=Ii(Sl,Ni((o,e,t,n)=>Xh(o,e,t,n,{by:"y"}))),eC=["target","ex","ey","skewingSide"],Wu={x:{counterAxis:"y",scale:Lt,skew:ji,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Kt,skew:Ai,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},tC=["ns","nesw","ew","nwse"],nC=(o,e,t)=>{if(e.x!==0&&un(t,"lockSkewingY")||e.y!==0&&un(t,"lockSkewingX"))return sl;const n=C0(t,e)%4;return"".concat(tC[n],"-resize")};function M0(o,e,t,n,s){const{target:a}=t,{counterAxis:c,origin:u,lockSkewing:d,skew:f,flip:g}=Wu[o];if(un(a,d))return!1;const{origin:y,flip:v}=Wu[c],w=Ze(t[y])*(a[v]?-1:1),x=-Math.sign(w)*(a[g]?-1:1),S=.5*-((a[f]===0&&Uh(t,ye,ye,n,s)[o]>0||a[f]>0?1:-1)*x)+.5;return Ii(a0,Ni((b,k,R,N)=>function(z,G,X){let{target:W,ex:te,ey:oe,skewingSide:pe}=G,ge=Be(G,eC);const{skew:ce}=Wu[z],we=X.subtract(new F(te,oe)).divide(new F(W.scaleX,W.scaleY))[z],je=W[ce],Te=ge[ce],ve=Math.tan(Qe(Te)),Y=z==="y"?W._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:W._getTransformedDimensions({scaleX:1,scaleY:1}).y,ie=2*we*pe/Math.max(Y,1)+ve,Q=Hr(Math.atan(ie));W.set(ce,Q);const M=je!==W[ce];if(M&&z==="y"){const{skewX:U,scaleX:de}=W,he=W._getTransformedDimensions({skewY:je}),xe=W._getTransformedDimensions(),me=U!==0?he.x/xe.x:1;me!==1&&W.set(Lt,me*de)}return M}(o,k,new F(R,N))))(e,P(P({},t),{},{[u]:S,skewingSide:x}),n,s)}const rC=(o,e,t,n)=>M0("x",o,e,t,n),iC=(o,e,t,n)=>M0("y",o,e,t,n);function Ol(o,e){return o[e.canvas.altActionKey]}const pa=(o,e,t)=>{const n=Ol(o,t);return e.x===0?n?ji:Kt:e.y===0?n?Ai:Lt:""},Si=(o,e,t)=>Ol(o,t)?nC(0,e,t):Ds(o,e,t),Vg=(o,e,t,n)=>Ol(o,e.target)?iC(o,e,t,n):JS(o,e,t,n),Hg=(o,e,t,n)=>Ol(o,e.target)?rC(o,e,t,n):ZS(o,e,t,n),R0=()=>({ml:new on({x:-.5,y:0,cursorStyleHandler:Si,actionHandler:Vg,getActionName:pa}),mr:new on({x:.5,y:0,cursorStyleHandler:Si,actionHandler:Vg,getActionName:pa}),mb:new on({x:0,y:.5,cursorStyleHandler:Si,actionHandler:Hg,getActionName:pa}),mt:new on({x:0,y:-.5,cursorStyleHandler:Si,actionHandler:Hg,getActionName:pa}),tl:new on({x:-.5,y:-.5,cursorStyleHandler:Ds,actionHandler:fa}),tr:new on({x:.5,y:-.5,cursorStyleHandler:Ds,actionHandler:fa}),bl:new on({x:-.5,y:.5,cursorStyleHandler:Ds,actionHandler:fa}),br:new on({x:.5,y:.5,cursorStyleHandler:Ds,actionHandler:fa}),mtr:new on({x:0,y:-.5,actionHandler:KS,cursorStyleHandler:qS,offsetY:-40,withConnection:!0,actionName:Fh})}),sC=()=>({mr:new on({x:.5,y:0,actionHandler:Ug,cursorStyleHandler:Si,actionName:Is}),ml:new on({x:-.5,y:0,actionHandler:Ug,cursorStyleHandler:Si,actionName:Is})}),oC=()=>P(P({},R0()),sC());class zs extends Ln{static getDefaults(){return P(P({},super.getDefaults()),zs.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),zs.ownDefaults),this.setOptions(e)}static createControls(){return{controls:R0()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,s=t.action;if(this===n&&s&&s.startsWith(Cl))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let s=n.length-1;s>=0;s--){const[a,c]=n[s],u=this.controls[a];if(u.shouldActivate(a,this,e,t?c.touchCorner:c.corner))return this.__corner=a,{key:a,control:u,coord:this.oCoords[a]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=Ks(t.x,t.y),s=Qs({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),a=ct(n,s),c=ct(e,a),u=ct(c,[1/e[0],0,0,1/e[3],0,0]),d=this.group?nl(this.calcTransformMatrix()):void 0;d&&(d.scaleX=Math.abs(d.scaleX),d.scaleY=Math.abs(d.scaleY));const f=this._calculateCurrentDimensions(d),g={};return this.forEachControl((y,v)=>{const w=y.positionHandler(f,u,this,y);g[v]=Object.assign(w,this._calcCornerCoords(y,w))}),g}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Qe(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=P({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:s}=this,a=P({hasBorders:n,hasControls:s},t),c=this.getViewportTransform(),u=a.hasBorders,d=a.hasControls,f=ct(c,this.calcTransformMatrix()),g=nl(f);e.save(),e.translate(g.translateX,g.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(g.angle-=180),e.rotate(Qe(this.group?g.angle:this.angle)),u&&this.drawBorders(e,g,t),d&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let s;if(n&&n.forActiveSelection||this.group){const a=Wh(this.width,this.height,Tl(t)),c=this.isStrokeAccountedForInDimensions()?Ih:(this.strokeUniform?new F().scalarAdd(this.canvas?this.canvas.getZoom():1):new F(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=a.add(c).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((s,a)=>{s.withConnection&&s.getVisibility(this,a)&&(n=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:a,cornerColor:c}=this,u=P({cornerStrokeColor:s,cornerDashArray:a,cornerColor:c},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=u.cornerColor,this.transparentCorners||(e.strokeStyle=u.cornerStrokeColor),this._setLineDash(e,u.cornerDashArray),this.forEachControl((d,f)=>{if(d.getVisibility(this,f)){const g=this.oCoords[f];d.render(e,g.x,g.y,u,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[n,s]=t;return this.setControlVisible(n,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const s=this.width+4,a=this.height+4;return t.clearRect(-s/2,-a/2,s,a),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function L0(o,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(o.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),o}O(zs,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class gt extends zs{}L0(gt,[T0]),Z.setClass(gt),Z.setClass(gt,"object");const aC=(o,e,t,n)=>{const s=2*(n=Math.round(n))+1,{data:a}=o.getImageData(e-n,t-n,s,s);for(let c=3;c<a.length;c+=4)if(a[c]>0)return!1;return!0};class j0{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new F(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new F(1/this.options.scaleX,1/this.options.scaleY):new F(1,1)}createSideVector(e,t){const n=fh(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new F(e);return t.y+=t.x*Math.tan(Qe(this.options.skewY)),t.x+=t.y*Math.tan(Qe(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const lC=new F;class Ei extends j0{static getOrthogonalRotationFactor(e,t){const n=t?gh(e,t):PS(e);return Math.abs(n)<qs?-1:1}constructor(e,t,n,s){super(s),O(this,"AB",void 0),O(this,"AC",void 0),O(this,"alpha",void 0),O(this,"bisector",void 0),this.A=new F(e),this.B=new F(t),this.C=new F(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=gh(this.AB,this.AC),this.bisector=Vh(k0(this.AB.eq(lC)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),a=E0(s),c=Ei.getOrthogonalRotationFactor(a,this.bisector);return this.scaleUnitVector(a,n*c)}projectBevel(){const e=[];return(this.alpha%Ja==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),a=this.options.strokeUniform?ph(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return ph(s)/this.strokeProjectionMagnitude<=a&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],s=new F(Ei.getOrthogonalRotationFactor(this.bisector),Ei.getOrthogonalRotationFactor(new F(this.bisector.y,this.bisector.x)));return[new F(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new F(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(a=>{Bg(a,e,t)&&n.push(this.A.add(a))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:s,skewY:a,scaleX:c,scaleY:u,strokeUniform:d}=this.options,f=new F(Math.tan(Qe(s)),Math.tan(Qe(a))),g=this.strokeProjectionMagnitude,y=d?g/u/Math.sqrt(1/u**2+1/c**2*f.y**2):g/Math.sqrt(1+f.y**2),v=new F(Math.sqrt(Math.max(g**2-y**2,0)),y),w=d?g/Math.sqrt(1+f.x**2*(1/u)**2/(1/c+1/c*f.x*f.y)**2):g/Math.sqrt(1+f.x**2/(1+f.x*f.y)**2),x=new F(w,Math.sqrt(Math.max(g**2-w**2,0)));return[x,x.scalarMultiply(-1),v,v.scalarMultiply(-1)].map(S=>this.applySkew(d?S.multiply(this.strokeUniformScalar):S)).forEach(S=>{Bg(S,e,t)&&n.push(this.applySkew(this.A).add(S))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Ja==0,n=this.applySkew(this.A),s=e[t?0:2].subtract(n),a=e[t?1:0].subtract(n),c=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),u=Ms(s,c)>0,d=u?s:a,f=u?a:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(d,f)):e.push(...this.projectRoundNoSkew(d,f)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Xg extends j0{constructor(e,t,n){super(n),this.A=new F(e),this.T=new F(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(E0(s),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Ei(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new F(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(Vh(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(n);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const cC=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(o.length===0)return n;const s=o.reduce((a,c)=>(a[a.length-1].eq(c)||a.push(new F(c)),a),[new F(o[0])]);if(s.length===1)t=!0;else if(!t){const a=s[0],c=((u,d)=>{for(let f=u.length-1;f>=0;f--)if(d(u[f],f,u))return f;return-1})(s,u=>!u.eq(a));s.splice(c+1)}return s.forEach((a,c,u)=>{let d,f;c===0?(f=u[1],d=t?a:u[u.length-1]):c===u.length-1?(d=u[c-1],f=t?a:u[0]):(d=u[c-1],f=u[c+1]),t&&u.length===1?n.push(...new Xg(a,a,e).project()):!t||c!==0&&c!==u.length-1?n.push(...new Ei(a,d,f,e).project()):n.push(...new Xg(a,c===0?f:d,e).project())}),n},Yh=o=>{const e={};return Object.keys(o).forEach(t=>{e[t]={},Object.keys(o[t]).forEach(n=>{e[t][n]=P({},o[t][n])})}),e},uC=o=>o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),$h=o=>{const e=[];for(let t,n=0;n<o.length;n++)(t=hC(o,n))!==!1&&e.push(t);return e},hC=(o,e)=>{const t=o.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return o.charAt(e);if(55296<=t&&t<=56319){if(o.length<=e+1)throw"High surrogate without following low surrogate";const s=o.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return o.charAt(e)+o.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=o.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1},Gh=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return o.fill!==e.fill||o.stroke!==e.stroke||o.strokeWidth!==e.strokeWidth||o.fontSize!==e.fontSize||o.fontFamily!==e.fontFamily||o.fontWeight!==e.fontWeight||o.fontStyle!==e.fontStyle||o.textBackgroundColor!==e.textBackgroundColor||o.deltaY!==e.deltaY||t&&(o.overline!==e.overline||o.underline!==e.underline||o.linethrough!==e.linethrough)},dC=(o,e)=>{const t=e.split(`
`),n=[];let s=-1,a={};o=Yh(o);for(let c=0;c<t.length;c++){const u=$h(t[c]);if(o[c])for(let d=0;d<u.length;d++){s++;const f=o[c][d];f&&Object.keys(f).length>0&&(Gh(a,f,!0)?n.push({start:s,end:s+1,style:f}):n[n.length-1].end++),a=f||{}}else s+=u.length,a={}}return n},fC=(o,e)=>{if(!Array.isArray(o))return Yh(o);const t=e.split(Ah),n={};let s=-1,a=0;for(let c=0;c<t.length;c++){const u=$h(t[c]);for(let d=0;d<u.length;d++)s++,o[a]&&o[a].start<=s&&s<o[a].end&&(n[c]=n[c]||{},n[c][d]=P({},o[a].style),s===o[a].end-1&&a++)}return n},vr=["display","transform",nt,"fill-opacity","fill-rule","opacity",Rt,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Yg(o,e){const t=o.nodeName,n=o.getAttribute("class"),s=o.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let c;if(c=new RegExp("^"+t,"i"),e=e.replace(c,""),s&&e.length&&(c=new RegExp("#"+s+a,"i"),e=e.replace(c,"")),n&&e.length){const u=n.split(" ");for(let d=u.length;d--;)c=new RegExp("\\."+u[d]+a,"i"),e=e.replace(c,"")}return e.length===0}function pC(o,e){let t=!0;const n=Yg(o,e.pop());return n&&e.length&&(t=function(s,a){let c,u=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&a.length;)u&&(c=a.pop()),u=Yg(s=s.parentElement,c);return a.length===0}(o,e)),n&&t&&e.length===0}const gC=o=>{var e;return(e=OS[o])!==null&&e!==void 0?e:o},mC=new RegExp("(".concat(Xr,")"),"gi"),yC=o=>o.replace(mC," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var $g,Gg,qg,Kg,Qg,Jg,Zg;const _t="(".concat(Xr,")"),vC=String.raw($g||($g=yr(["(skewX)(",")"],["(skewX)\\(","\\)"])),_t),_C=String.raw(Gg||(Gg=yr(["(skewY)(",")"],["(skewY)\\(","\\)"])),_t),xC=String.raw(qg||(qg=yr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),_t,_t,_t),wC=String.raw(Kg||(Kg=yr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),_t,_t),SC=String.raw(Qg||(Qg=yr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),_t,_t),CC=String.raw(Jg||(Jg=yr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),_t,_t,_t,_t,_t,_t),qh="(?:".concat(CC,"|").concat(SC,"|").concat(xC,"|").concat(wC,"|").concat(vC,"|").concat(_C,")"),TC="(?:".concat(qh,"*)"),bC=String.raw(Zg||(Zg=yr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),TC),kC=new RegExp(bC),EC=new RegExp(qh),OC=new RegExp(qh,"g");function mh(o){const e=[];if(!(o=yC(o).replace(/\s*([()])\s*/gi,"$1"))||o&&!kC.test(o))return[...wt];for(const t of o.matchAll(OC)){const n=EC.exec(t[0]);if(!n)continue;let s=wt;const a=n.filter(x=>!!x),[,c,...u]=a,[d,f,g,y,v,w]=u.map(x=>parseFloat(x));switch(c){case"translate":s=Ks(d,f);break;case Fh:s=Qs({angle:d},{x:f,y:g});break;case Cl:s=Bh(d,f);break;case ji:s=f0(d);break;case Ai:s=p0(d);break;case"matrix":s=[d,f,g,y,v,w]}e.push(s)}return Nh(e)}function DC(o,e,t,n){const s=Array.isArray(e);let a,c=e;if(o!==nt&&o!==Rt||e!==Mt){if(o==="strokeUniform")return e==="non-scaling-stroke";if(o==="strokeDashArray")c=e===Mt?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(o==="transformMatrix")c=t&&t.transformMatrix?ct(t.transformMatrix,mh(e)):mh(e);else if(o==="visible")c=e!==Mt&&e!=="hidden",t&&t.visible===!1&&(c=!1);else if(o==="opacity")c=parseFloat(e),t&&t.opacity!==void 0&&(c*=t.opacity);else if(o==="textAnchor")c=e==="start"?Pe:e==="end"?Ke:ye;else if(o==="charSpacing")a=bi(e,n)/n*1e3;else if(o==="paintFirst"){const u=e.indexOf(nt),d=e.indexOf(Rt);c=nt,(u>-1&&d>-1&&d<u||u===-1&&d>-1)&&(c=Rt)}else{if(o==="href"||o==="xlink:href"||o==="font"||o==="id")return e;if(o==="imageSmoothing")return e==="optimizeQuality";a=s?e.map(bi):bi(e,n)}}else c="";return!s&&isNaN(a)?c:a}function PC(o,e){const t=o.match(ES);if(!t)return;const n=t[1],s=t[3],a=t[4],c=t[5],u=t[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),a&&(e.fontSize=bi(a)),u&&(e.fontFamily=u),c&&(e.lineHeight=c==="normal"?1:c)}function MC(o,e){o.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[n,s]=t.split(":");e[n.trim().toLowerCase()]=s.trim()})}function RC(o){const e={},t=o.getAttribute("style");return t&&(typeof t=="string"?MC(t,e):function(n,s){Object.entries(n).forEach(a=>{let[c,u]=a;u!==void 0&&(s[c.toLowerCase()]=u)})}(t,e)),e}const LC={stroke:"strokeOpacity",fill:"fillOpacity"};function Yn(o,e,t){if(!o)return{};let n,s={},a=jh;o.parentNode&&Ng.test(o.parentNode.nodeName)&&(s=Yn(o.parentElement,e,t),s.fontSize&&(n=a=bi(s.fontSize)));const c=P(P(P({},e.reduce((f,g)=>{const y=o.getAttribute(g);return y&&(f[g]=y),f},{})),function(f){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y={};for(const v in g)pC(f,v.split(" "))&&(y=P(P({},y),g[v]));return y}(o,t)),RC(o));c[Bu]&&o.setAttribute(Bu,c[Bu]),c[Nu]&&(n=bi(c[Nu],a),c[Nu]="".concat(n));const u={};for(const f in c){const g=gC(f),y=DC(g,c[f],s,n);u[g]=y}u.font&&PC(u.font,u);const d=P(P({},s),u);return Ng.test(o.nodeName)?d:function(f){const g=gt.getDefaults();return Object.entries(LC).forEach(y=>{let[v,w]=y;if(f[w]===void 0||f[v]==="")return;if(f[v]===void 0){if(!g[v])return;f[v]=g[v]}if(f[v].indexOf("url(")===0)return;const x=new Re(f[v]);f[v]=x.setAlpha(Ve(x.getAlpha()*f[w],2)).toRgba()}),f}(d)}const jC=["left","top","width","height","visible"],A0=["rx","ry"];class Bt extends gt{static getDefaults(){return P(P({},super.getDefaults()),Bt.ownDefaults)}constructor(e){super(),Object.assign(this,Bt.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,s=-t/2,a=-n/2,c=this.rx?Math.min(this.rx,t/2):0,u=this.ry?Math.min(this.ry,n/2):0,d=c!==0||u!==0;e.beginPath(),e.moveTo(s+c,a),e.lineTo(s+t-c,a),d&&e.bezierCurveTo(s+t-dr*c,a,s+t,a+dr*u,s+t,a+u),e.lineTo(s+t,a+n-u),d&&e.bezierCurveTo(s+t,a+n-dr*u,s+t-dr*c,a+n,s+t-c,a+n),e.lineTo(s+c,a+n),d&&e.bezierCurveTo(s+dr*c,a+n,s,a+n-dr*u,s,a+n-u),e.lineTo(s,a+u),d&&e.bezierCurveTo(s,a+dr*u,s+dr*c,a,s+c,a),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...A0,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,n){const s=Yn(e,this.ATTRIBUTE_NAMES,n),{left:a=0,top:c=0,width:u=0,height:d=0,visible:f=!0}=s,g=Be(s,jC);return new this(P(P(P({},t),g),{},{left:a,top:c,width:u,height:d,visible:!!(f&&u&&d)}))}}O(Bt,"type","Rect"),O(Bt,"cacheProperties",[...Xn,...A0]),O(Bt,"ownDefaults",{rx:0,ry:0}),O(Bt,"ATTRIBUTE_NAMES",[...vr,"x","y","rx","ry","width","height"]),Z.setClass(Bt),Z.setSVGClass(Bt);const Fn="initialization",ol="added",Kh="removed",al="imperative",F0=(o,e)=>{const{strokeUniform:t,strokeWidth:n,width:s,height:a,group:c}=e,u=c&&c!==o?kl(c.calcTransformMatrix(),o.calcTransformMatrix()):null,d=u?e.getRelativeCenterPoint().transform(u):e.getRelativeCenterPoint(),f=!e.isStrokeAccountedForInDimensions(),g=t&&f?CS(new F(n,n),void 0,o.calcTransformMatrix()):Ih,y=!t&&f?n:0,v=Wh(s+y,a+y,Nh([u,e.calcOwnMatrix()],!0)).add(g).scalarDivide(2);return[d.subtract(v),d.add(v)]};class Dl{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:s}=e;return t===Fn||t===al||!!n&&s!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==Fn&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:s}=t;if(n===al&&t.overrides)return t.overrides;if(e.length===0)return;const{left:a,top:c,width:u,height:d}=Bn(e.map(y=>F0(s,y)).reduce((y,v)=>y.concat(v),[])),f=new F(u,d),g=new F(a,c).add(f.scalarDivide(2));if(n===Fn){const y=this.getInitialSize(t,{size:f,center:g});return{center:g,relativeCorrection:new F(0,0),size:y}}return{center:g.transform(s.calcOwnMatrix()),size:f}}}O(Dl,"type","strategy");class yh extends Dl{shouldPerformLayout(e){return!0}}O(yh,"type","fit-content"),Z.setClass(yh);const AC=["strategy"],FC=["target","strategy","bubbles","prevStrategy"],I0="layoutManager";class Ws{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new yh;O(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=P(P({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[el,s0,Is,o0,Sl,a0,Za,lS,cS].map(s=>e.on(s,a=>this.performLayout(s===el?{type:"object_modified",trigger:s,e:a,target:n}:{type:"object_modifying",trigger:s,e:a,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:s}=t;if(n===Fn||n===ol?this.subscribeTargets(e):n===Kh&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),n===al&&e.deep){const a=Be(e,AC);t.forEachObject(c=>c.layoutManager&&c.layoutManager.performLayout(P(P({},a),{},{bubbles:!1,target:c})))}}getLayoutResult(e){const{target:t,strategy:n,type:s}=e,a=n.calcLayoutResult(e,t.getObjects());if(!a)return;const c=s===Fn?new F:t.getRelativeCenterPoint(),{center:u,correction:d=new F,relativeCorrection:f=new F}=a,g=c.subtract(u).add(d).transform(s===Fn?wt:cn(t.calcOwnMatrix()),!0).add(f);return{result:a,prevCenter:c,nextCenter:u,offset:g}}commitLayout(e,t){const{target:n}=e,{result:{size:s},nextCenter:a}=t;var c,u;n.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===Fn?n.set({left:(c=e.x)!==null&&c!==void 0?c:a.x+s.x*Ze(n.originX),top:(u=e.y)!==null&&u!==void 0?u:a.y+s.y*Ze(n.originY)}):(n.setPositionByOrigin(a,ye,ye),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(s=>{s.group===n&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:s}=t;n.set({left:n.left+s.x,top:n.top+s.y})}onAfterLayout(e,t){const{target:n,strategy:s,bubbles:a,prevStrategy:c}=e,u=Be(e,FC),{canvas:d}=n;n.fire("layout:after",{context:e,result:t}),d&&d.fire("object:layout:after",{context:e,result:t,target:n});const f=n.parent;a&&f!=null&&f.layoutManager&&((u.path||(u.path=[])).push(n),f.layoutManager.performLayout(P(P({},u),{},{target:f}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(n=>n())),e.clear()}toObject(){return{type:I0,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Z.setClass(Ws,I0);const IC=["type","objects","layoutManager"];class NC extends Ws{performLayout(){}}class Wr extends l0(gt){static getDefaults(){return P(P({},super.getDefaults()),Wr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),O(this,"_activeObjects",[]),O(this,"__objectSelectionTracker",void 0),O(this,"__objectSelectionDisposer",void 0),Object.assign(this,Wr.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(n=t.layoutManager)!==null&&n!==void 0?n:new Ws,this.layoutManager.performLayout({type:Fn,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(gr("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(gr("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,n,s)=>this.canEnterGroup(t)&&s.indexOf(t)===n)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(t),a=super.add(...s);return this._onAfterObjectsChange(ol,s),a}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];const a=this._filterObjectsBeforeEnteringGroup(n),c=super.insertAt(e,...a);return this._onAfterObjectsChange(ol,a),c}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Kh,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),e==="canvas"&&n!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const s=this._activeObjects;if(e)s.push(n),this._set("dirty",!0);else if(s.length>0){const a=s.indexOf(n);a>-1&&(s.splice(a,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&il(e,ct(cn(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(il(e,ct(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=gt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let a=0;a<this._objects.length;a++){var s;const c=this._objects[a];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&c.group!==this?(e.save(),e.transform(...cn(this.calcTransformMatrix())),c.render(e),e.restore()):c.group===this&&c.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(P({target:this,type:al},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const a=s.includeDefaultValues;s.includeDefaultValues=n;const c=s[e||"toObject"](t);return s.includeDefaultValues=a,c})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return P(P(P({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=Bt.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&t.push("		",n);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("	",n);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:s=[],layoutManager:a}=e,c=Be(e,IC);return Promise.all([Ns(s,t),bl(c,t)]).then(u=>{let[d,f]=u;const g=new this(d,P(P(P({},c),f),{},{layoutManager:new NC}));if(a){const y=Z.getClass(a.type),v=Z.getClass(a.strategy);g.layoutManager=new y(new v)}else g.layoutManager=new Ws;return g.layoutManager.subscribeTargets({type:Fn,target:g,targets:g.getObjects()}),g.setCoords(),g})}}O(Wr,"type","Group"),O(Wr,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Z.setClass(Wr);const BC=(o,e)=>Math.min(e.width/o.width,e.height/o.height),zC=(o,e)=>Math.max(e.width/o.width,e.height/o.height),vh="\\s*,?\\s*",Os="".concat(vh,"(").concat(Xr,")"),WC="".concat(Os).concat(Os).concat(Os).concat(vh,"([01])").concat(vh,"([01])").concat(Os).concat(Os),UC={m:"l",M:"L"},VC=(o,e,t,n,s,a,c,u,d,f,g)=>{const y=Un(o),v=Vn(o),w=Un(e),x=Vn(e),S=t*s*w-n*a*x+c,C=n*s*w+t*a*x+u;return["C",f+d*(-t*s*v-n*a*y),g+d*(-n*s*v+t*a*y),S+d*(t*s*x+n*a*w),C+d*(n*s*x-t*a*w),S,C]},em=(o,e,t,n)=>{const s=Math.atan2(e,o),a=Math.atan2(n,t);return a>=s?a-s:2*Math.PI-(s-a)};function tm(o,e,t,n,s,a,c,u){let d;if(Ce.cachesBoundsOfCurve&&(d=[...arguments].join(),Ps.boundsOfCurveCache[d]))return Ps.boundsOfCurveCache[d];const f=Math.sqrt,g=Math.abs,y=[],v=[[0,0],[0,0]];let w=6*o-12*t+6*s,x=-3*o+9*t-9*s+3*c,S=3*t-3*o;for(let N=0;N<2;++N){if(N>0&&(w=6*e-12*n+6*a,x=-3*e+9*n-9*a+3*u,S=3*n-3*e),g(x)<1e-12){if(g(w)<1e-12)continue;const te=-S/w;0<te&&te<1&&y.push(te);continue}const z=w*w-4*S*x;if(z<0)continue;const G=f(z),X=(-w+G)/(2*x);0<X&&X<1&&y.push(X);const W=(-w-G)/(2*x);0<W&&W<1&&y.push(W)}let C=y.length;const b=C,k=N0(o,e,t,n,s,a,c,u);for(;C--;){const{x:N,y:z}=k(y[C]);v[0][C]=N,v[1][C]=z}v[0][b]=o,v[1][b]=e,v[0][b+1]=c,v[1][b+1]=u;const R=[new F(Math.min(...v[0]),Math.min(...v[1])),new F(Math.max(...v[0]),Math.max(...v[1]))];return Ce.cachesBoundsOfCurve&&(Ps.boundsOfCurveCache[d]=R),R}const HC=(o,e,t)=>{let[n,s,a,c,u,d,f,g]=t;const y=((v,w,x,S,C,b,k)=>{if(x===0||S===0)return[];let R=0,N=0,z=0;const G=Math.PI,X=k*Lh,W=Vn(X),te=Un(X),oe=.5*(-te*v-W*w),pe=.5*(-te*w+W*v),ge=x**2,ce=S**2,we=pe**2,je=oe**2,Te=ge*ce-ge*we-ce*je;let ve=Math.abs(x),Y=Math.abs(S);if(Te<0){const Ye=Math.sqrt(1-Te/(ge*ce));ve*=Ye,Y*=Ye}else z=(C===b?-1:1)*Math.sqrt(Te/(ge*we+ce*je));const ie=z*ve*pe/Y,Q=-z*Y*oe/ve,M=te*ie-W*Q+.5*v,U=W*ie+te*Q+.5*w;let de=em(1,0,(oe-ie)/ve,(pe-Q)/Y),he=em((oe-ie)/ve,(pe-Q)/Y,(-oe-ie)/ve,(-pe-Q)/Y);b===0&&he>0?he-=2*G:b===1&&he<0&&(he+=2*G);const xe=Math.ceil(Math.abs(he/G*2)),me=[],be=he/xe,Oe=8/3*Math.sin(be/4)*Math.sin(be/4)/Math.sin(be/2);let Le=de+be;for(let Ye=0;Ye<xe;Ye++)me[Ye]=VC(de,Le,te,W,ve,Y,M,U,Oe,R,N),R=me[Ye][5],N=me[Ye][6],de=Le,Le+=be;return me})(f-o,g-e,s,a,u,d,c);for(let v=0,w=y.length;v<w;v++)y[v][1]+=o,y[v][2]+=e,y[v][3]+=o,y[v][4]+=e,y[v][5]+=o,y[v][6]+=e;return y},XC=o=>{let e=0,t=0,n=0,s=0;const a=[];let c,u=0,d=0;for(const f of o){const g=[...f];let y;switch(g[0]){case"l":g[1]+=e,g[2]+=t;case"L":e=g[1],t=g[2],y=["L",e,t];break;case"h":g[1]+=e;case"H":e=g[1],y=["L",e,t];break;case"v":g[1]+=t;case"V":t=g[1],y=["L",e,t];break;case"m":g[1]+=e,g[2]+=t;case"M":e=g[1],t=g[2],n=g[1],s=g[2],y=["M",e,t];break;case"c":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t,g[5]+=e,g[6]+=t;case"C":u=g[3],d=g[4],e=g[5],t=g[6],y=["C",g[1],g[2],u,d,e,t];break;case"s":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"S":c==="C"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=g[3],t=g[4],y=["C",u,d,g[1],g[2],e,t],u=y[3],d=y[4];break;case"q":g[1]+=e,g[2]+=t,g[3]+=e,g[4]+=t;case"Q":u=g[1],d=g[2],e=g[3],t=g[4],y=["Q",u,d,e,t];break;case"t":g[1]+=e,g[2]+=t;case"T":c==="Q"?(u=2*e-u,d=2*t-d):(u=e,d=t),e=g[1],t=g[2],y=["Q",u,d,e,t];break;case"a":g[6]+=e,g[7]+=t;case"A":HC(e,t,g).forEach(v=>a.push(v)),e=g[6],t=g[7];break;case"z":case"Z":e=n,t=s,y=["Z"]}y?(a.push(y),c=y[0]):c=""}return a},ll=(o,e,t,n)=>Math.sqrt((t-o)**2+(n-e)**2),N0=(o,e,t,n,s,a,c,u)=>d=>{const f=d**3,g=(w=>3*w**2*(1-w))(d),y=(w=>3*w*(1-w)**2)(d),v=(w=>(1-w)**3)(d);return new F(c*f+s*g+t*y+o*v,u*f+a*g+n*y+e*v)},B0=o=>o**2,z0=o=>2*o*(1-o),W0=o=>(1-o)**2,YC=(o,e,t,n,s,a,c,u)=>d=>{const f=B0(d),g=z0(d),y=W0(d),v=3*(y*(t-o)+g*(s-t)+f*(c-s)),w=3*(y*(n-e)+g*(a-n)+f*(u-a));return Math.atan2(w,v)},$C=(o,e,t,n,s,a)=>c=>{const u=B0(c),d=z0(c),f=W0(c);return new F(s*u+t*d+o*f,a*u+n*d+e*f)},GC=(o,e,t,n,s,a)=>c=>{const u=1-c,d=2*(u*(t-o)+c*(s-t)),f=2*(u*(n-e)+c*(a-n));return Math.atan2(f,d)},nm=(o,e,t)=>{let n=new F(e,t),s=0;for(let a=1;a<=100;a+=1){const c=o(a/100);s+=ll(n.x,n.y,c.x,c.y),n=c}return s},qC=(o,e)=>{let t,n=0,s=0,a={x:o.x,y:o.y},c=P({},a),u=.01,d=0;const f=o.iterator,g=o.angleFinder;for(;s<e&&u>1e-4;)c=f(n),d=n,t=ll(a.x,a.y,c.x,c.y),t+s>e?(n-=u,u/=2):(a=c,n+=u,s+=t);return P(P({},c),{},{angle:g(d)})},U0=o=>{let e,t,n=0,s=0,a=0,c=0,u=0;const d=[];for(const f of o){const g={x:s,y:a,command:f[0],length:0};switch(f[0]){case"M":t=g,t.x=c=s=f[1],t.y=u=a=f[2];break;case"L":t=g,t.length=ll(s,a,f[1],f[2]),s=f[1],a=f[2];break;case"C":e=N0(s,a,f[1],f[2],f[3],f[4],f[5],f[6]),t=g,t.iterator=e,t.angleFinder=YC(s,a,f[1],f[2],f[3],f[4],f[5],f[6]),t.length=nm(e,s,a),s=f[5],a=f[6];break;case"Q":e=$C(s,a,f[1],f[2],f[3],f[4]),t=g,t.iterator=e,t.angleFinder=GC(s,a,f[1],f[2],f[3],f[4]),t.length=nm(e,s,a),s=f[3],a=f[4];break;case"Z":t=g,t.destX=c,t.destY=u,t.length=ll(s,a,c,u),s=c,a=u}n+=t.length,d.push(t)}return d.push({length:n,x:s,y:a}),d},KC=function(o,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U0(o),n=0;for(;e-t[n].length>0&&n<t.length-2;)e-=t[n].length,n++;const s=t[n],a=e/s.length,c=o[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return P(P({},new F(s.x,s.y).lerp(new F(s.destX,s.destY),a)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return P(P({},new F(s.x,s.y).lerp(new F(c[1],c[2]),a)),{},{angle:Math.atan2(c[2]-s.y,c[1]-s.x)});case"C":case"Q":return qC(s,e)}},QC=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),rm=new RegExp(WC,"g"),JC=new RegExp(Xr,"gi"),ZC={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},eT=o=>{var e;const t=[],n=(e=o.match(QC))!==null&&e!==void 0?e:[];for(const s of n){const a=s[0];if(a==="z"||a==="Z"){t.push([a]);continue}const c=ZC[a.toLowerCase()];let u=[];if(a==="a"||a==="A"){rm.lastIndex=0;for(let d=null;d=rm.exec(s);)u.push(...d.slice(1))}else u=s.match(JC)||[];for(let d=0;d<u.length;d+=c){const f=new Array(c),g=UC[a];f[0]=d>0&&g?g:a;for(let y=0;y<c;y++)f[y+1]=parseFloat(u[d+y]);t.push(f)}}return t},tT=(o,e)=>o.map(t=>t.map((n,s)=>s===0||e===void 0?n:Ve(n,e)).join(" ")).join(" ");function _h(o,e){const t=o.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(n=>{let[s,a]=n;return t.setProperty(s,a)}))}class nT extends v0{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),O(this,"upper",void 0),O(this,"container",void 0);const{el:s}=this.lower,a=this.createUpperCanvas();this.upper={el:a,ctx:a.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(a,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const c=this.createContainerElement();c.classList.add(n),s.parentNode&&s.parentNode.replaceChild(c,s),c.append(s,a),this.container=c}createUpperCanvas(){const{el:e}=this.lower,t=hn();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Li().createElement("div");return e.setAttribute("data-fabric","wrapper"),_h(e,{position:"relative"}),Ag(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:s}=t;_h(e,P(P({},n),{},{"touch-action":s?"manipulation":Mt})),Ag(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:s}=this.upper;y0(n,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),uh(this.upper.el,e),uh(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),Sn().dispose(this.upper.el),delete this.upper,delete this.container}}class Pl extends Js{constructor(){super(...arguments),O(this,"targets",[]),O(this,"_hoveredTargets",[]),O(this,"_objectsToRender",void 0),O(this,"_currentTransform",null),O(this,"_groupSelector",null),O(this,"contextTopDirty",!1)}static getDefaults(){return P(P({},super.getDefaults()),Pl.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new nT(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const s=this.targetFindTolerance,a=this.pixelFindContext;this.clearContext(a),a.save(),a.translate(-t+s,-n+s),a.transform(...this.viewportTransform);const c=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(a),e.selectionBackgroundColor=c,a.restore();const u=Math.round(s*this.getRetinaScaling());return aC(a,u,u,u)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(n=>!!n&&e[n]===!0):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&n.length>1&&n.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let s;return t===Cl||t===Lt||t===Kt||t===Is?s=this.centeredScaling||e.centeredScaling:t===Fh&&(s=this.centeredRotation||e.centeredRotation),s?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?n.x=Ke:["mr","tr","br"].includes(t)&&(n.x=Pe),["tl","mt","tr"].includes(t)?n.y=ch:["bl","mb","br"].includes(t)&&(n.y=Pt)),n}_setupCurrentTransform(e,t,n){var s;const a=t.group?ki(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:c="",control:u}=t.getActiveControl()||{},d=n&&u?(s=u.getActionHandler(e,t,u))===null||s===void 0?void 0:s.bind(u):kS,f=((w,x,S,C)=>{if(!x||!w)return"drag";const b=C.controls[x];return b.getActionName(S,b,C)})(n,c,e,t),g=e[this.centeredKey],y=this._shouldCenterTransform(t,f,g)?{x:ye,y:ye}:this._getOriginFromCorner(t,c),v={target:t,action:f,actionHandler:d,actionPerformed:!1,corner:c,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:a.x-t.left,offsetY:a.y-t.top,originX:y.x,originY:y.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:Qe(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:g,original:P(P({},_0(t)),{},{originX:y.x,originY:y.y})};this._currentTransform=v,this.fire("before:transform",{e,transform:v})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:s,deltaY:a}=this._groupSelector,c=new F(t,n).transform(this.viewportTransform),u=new F(t+s,n+a).transform(this.viewportTransform),d=this.selectionLineWidth/2;let f=Math.min(c.x,u.x),g=Math.min(c.y,u.y),y=Math.max(c.x,u.x),v=Math.max(c.y,u.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(f,g,y-f,v-g)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,f+=d,g+=d,y-=d,v-=d,gt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(f,g,y-f,v-g))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,s=this.getActiveObjects();if(this.targets=[],n&&s.length>=1){if(n.findControl(t,hh(e))||s.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const a=this.targets;this.targets=[];const c=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&c&&c!==n?(this.targets=a,n):c}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const s=this.getZoom(),a=e.padding/s;if(a){const[c,u,d,f]=n,g=Math.atan2(u.y-c.y,u.x-c.x),y=Un(g)*a,v=Vn(g)*a,w=y+v,x=y-v;n=[new F(c.x-x,c.y-w),new F(u.x+w,u.y-x),new F(d.x+x,d.y+w),new F(f.x-w,f.y+x)]}return Ue.isPointInPolygon(t,n)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,ki(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const s=e[n];if(this._checkTarget(s,t)){if(Va(s)&&s.subTargetCheck){const a=this._searchPossibleTargets(s._objects,t);a&&this.targets.push(a)}return s}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&Va(n)&&n.interactive&&this.targets[0]){const s=this.targets;for(let a=s.length-1;a>0;a--){const c=s[a];if(!Va(c)||!c.interactive)return c}return s[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,s=n.getBoundingClientRect();let a=_S(e),c=s.width||0,u=s.height||0;c&&u||(Pt in s&&ch in s&&(u=Math.abs(s.top-s.bottom)),Ke in s&&Pe in s&&(c=Math.abs(s.right-s.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,t||(a=ki(a,void 0,this.viewportTransform));const d=this.getRetinaScaling();d!==1&&(a.x/=d,a.y/=d);const f=c===0||u===0?new F(1,1):new F(n.width/c,n.height/u);return a.multiply(f)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=hn(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Rr(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,s=!1;const a=this.getActiveObjects(),c=[],u=[];e.forEach(d=>{a.includes(d)||(n=!0,d.fire("deselected",{e:t,target:d}),u.push(d))}),a.forEach(d=>{e.includes(d)||(n=!0,d.fire("selected",{e:t,target:d}),c.push(d))}),e.length>0&&a.length>0?(s=!0,n&&this.fire("selection:updated",{e:t,selected:c,deselected:u})):a.length>0?(s=!0,this.fire("selection:created",{e:t,selected:c})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:u})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),s}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Rr(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),Rr(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,s={e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),n.fire(el,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Rr(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const s=this._realizeGroupTransformOnObject(e),a=super._toObject(e,t,n);return e.set(s),a}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Rr(t)&&this._activeObject===t){const n=Fi(e,["angle","flipX","flipY",Pe,Lt,Kt,ji,Ai,Pt]);return wS(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(s)}}O(Pl,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class rT{constructor(e){O(this,"targets",[]),O(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),wi(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const iT=["target","oldTarget","fireCanvas","e"],Nt={passive:!1},xi=(o,e)=>{const t=o.getViewportPoint(e),n=o.getScenePoint(e);return{viewportPoint:t,scenePoint:n,pointer:t,absolutePointer:n}},fr=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return o.addEventListener(...t)},$t=function(o){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return o.removeEventListener(...t)},sT={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class xh extends Pl{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),O(this,"_isClick",void 0),O(this,"textEditingManager",new rT(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(fr,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,s=this._getEventPrefix();e(m0(n),"resize",this._onResize),e(n,s+"down",this._onMouseDown),e(n,"".concat(s,"move"),this._onMouseMove,Nt),e(n,"".concat(s,"out"),this._onMouseOut),e(n,"".concat(s,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,Nt)}removeListeners(){this.addOrRemove($t,"remove");const e=this._getEventPrefix(),t=ln(this.upperCanvasEl);$t(t,"".concat(e,"up"),this._onMouseUp),$t(t,"touchend",this._onTouchEnd,Nt),$t(t,"".concat(e,"move"),this._onMouseMove,Nt),$t(t,"touchmove",this._onMouseMove,Nt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=P({e},xi(this,e));this.fire("mouse:out",P(P({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",P({},n)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",P(P({},n),{},{target:s})),s&&s.fire("mouseout",P({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",P({e},xi(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void fr(this.upperCanvasEl,"drag",this._onDragProgress)}dh(e)}_renderDragEffects(e,t,n){let s=!1;const a=this._dropTarget;a&&a!==t&&a!==n&&(a.clearContextTop(),s=!0),t==null||t.clearContextTop(),n!==t&&(n==null||n.clearContextTop());const c=this.contextTop;c.save(),c.transform(...this.viewportTransform),t&&(c.save(),t.transform(c),t.renderDragSourceEffect(e),c.restore(),s=!0),n&&(c.save(),n.transform(c),n.renderDropTargetEffect(e),c.restore(),s=!0),c.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==Mt,n=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};$t(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:s}=this.findDragTargets(e),a=this._dragSource,c={e,target:n,subTargets:s,dragSource:a,canDrop:!1,dropTarget:void 0};let u;this.fire(t,c),this._fireEnterLeaveEvents(n,c),n&&(n.canDrop(e)&&(u=n),n.fire(t,c));for(let d=0;d<s.length;d++){const f=s[d];f.canDrop(e)&&(u=f),f.fire(t,c)}this._renderDragEffects(e,a,u),this._dropTarget=u}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),s={e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",P({e,target:t,subTargets:n,dragSource:this._dragSource},xi(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:n});return this.stopContextMenu&&dh(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,a=this._getEventPrefix(),c=ln(s);fr(c,"touchend",this._onTouchEnd,Nt),t&&fr(c,"touchmove",this._onMouseMove,Nt),$t(s,"".concat(a,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();$t(t,"".concat(n,"move"),this._onMouseMove,Nt);const s=ln(t);fr(s,"".concat(n,"up"),this._onMouseUp),fr(s,"".concat(n,"move"),this._onMouseMove,Nt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=ln(this.upperCanvasEl);$t(n,"touchend",this._onTouchEnd,Nt),$t(n,"touchmove",this._onMouseMove,Nt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{fr(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const s=ln(this.upperCanvasEl);$t(s,"".concat(n,"up"),this._onMouseUp),$t(s,"".concat(n,"move"),this._onMouseMove,Nt),fr(t,"".concat(n,"move"),this._onMouseMove,Nt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,s=this._isClick,a=this._target,{button:c}=e;if(c)return(this.fireMiddleClick&&c===1||this.fireRightClick&&c===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let u,d,f=!1;if(n&&(this._finalizeCurrentTransform(e),f=n.actionPerformed),!s){const g=a===this._activeObject;this.handleSelection(e),f||(f=this._shouldRender(a)||!g&&a===this._activeObject)}if(a){const g=a.findControl(this.getViewportPoint(e),hh(e)),{key:y,control:v}=g||{};if(d=y,a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,e),f=!0;else if(v){const w=v.getMouseUpHandler(e,a,v);w&&(u=this.getScenePoint(e),w.call(v,e,n,u.x,u.y))}a.isMoving=!1}if(n&&(n.target!==a||n.corner!==d)){const g=n.target&&n.target.controls[n.corner],y=g&&g.getMouseUpHandler(e,n.target,g);u=u||this.getScenePoint(e),y&&y.call(g,e,n,u.x,u.y)}this._setCursorFromEvent(e,a),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=void 0),f?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:s=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let a=0;a<s.length;a++)s[a]!==n&&s[a].fire(e,t);return t}_handleEvent(e,t){const n=this._target,s=this.targets||[],a=P(P({e,target:n,subTargets:s},xi(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),a),n&&n.fire("mouse".concat(t),a);for(let c=0;c<s.length;c++)s[c]!==n&&s[c].fire("mouse".concat(t),a)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:n}=e;if(n)return(this.fireMiddleClick&&n===1||this.fireRightClick&&n===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),a=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,a=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const c=this.getScenePoint(e);this._groupSelector={x:c.x,y:c.y,deltaY:0,deltaX:0}}if(t){const c=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const u=t.findControl(this.getViewportPoint(e),hh(e));if(t===this._activeObject&&(u||!a)){this._setupCurrentTransform(e,t,c);const d=u?u.control:void 0,f=this.getScenePoint(e),g=d&&d.getMouseDownHandler(e,t,d);g&&g.call(d,e,this._currentTransform,f.x,f.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=ki(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,s=this._hoveredTargets,a=this.targets,c=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:n,fireCanvas:!0});for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("mouse",{e,target:a[u],oldTarget:s[u]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,s=this._hoveredTargets,a=this.targets,c=Math.max(s.length,a.length);this.fireSyntheticInOutEvents("drag",P(P({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let u=0;u<c;u++)this.fireSyntheticInOutEvents("drag",P(P({},t),{},{target:a[u],oldTarget:s[u]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:s,fireCanvas:a,e:c}=t,u=Be(t,iT);const{targetIn:d,targetOut:f,canvasIn:g,canvasOut:y}=sT[e],v=s!==n;if(s&&v){const w=P(P({},u),{},{e:c,target:s,nextTarget:n},xi(this,c));a&&this.fire(y,w),s.fire(f,w)}if(n&&v){const w=P(P({},u),{},{e:c,target:n,previousTarget:s},xi(this,c));a&&this.fire(g,w),n.fire(d,w)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,s=n.target,a=s.group?ki(t,void 0,s.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,a),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:s,actionHandler:a,target:c}=t,u=!!a&&a(e,t,n.x,n.y);u&&c.setCoords(),s==="drag"&&u&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||u}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const s=Rr(this._activeObject)?this._activeObject:null,a=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(a){const c=a.control;this.setCursor(c.cursorStyleHandler(e,c,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(c=>{n=c.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,s=Rr(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||s)&&(s||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e})&&!n.getActiveControl()){if(s){const a=n.getObjects();if(t===n){const c=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(a,c)||this.searchPossibleTargets(this._objects,c))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(a,e)}else{n.isEditing&&n.exitEditing();const a=new(Z.getClass("ActiveSelection"))([],{canvas:this});a.multiSelectAdd(n,t),this._hoveredTarget=a,this._setActiveObject(a,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:s,deltaY:a}=this._groupSelector,c=new F(t,n),u=c.add(new F(s,a)),d=c.min(u),f=c.max(u).subtract(d),g=this.collectObjects({left:d.x,top:d.y,width:f.x,height:f.y},{includeIntersecting:!this.selectionFullyContained}),y=c.eq(u)?g[0]?[g[0]]:[]:g.length>1?g.filter(v=>!v.onSelect({e})).reverse():g;if(y.length===1)this.setActiveObject(y[0],e);else if(y.length>1){const v=Z.getClass("ActiveSelection");this.setActiveObject(new v(y,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const V0={x1:0,y1:0,x2:0,y2:0},oT=P(P({},V0),{},{r1:0,r2:0}),Ci=(o,e)=>isNaN(o)&&typeof e=="number"?e:o,aT=/^(\d+\.\d+)%|(\d+)%$/;function H0(o){return o&&aT.test(o)}function X0(o,e){const t=typeof o=="number"?o:typeof o=="string"?parseFloat(o)/(H0(o)?100:1):NaN;return Oi(0,Ci(t,e),1)}const lT=/\s*;\s*/,cT=/\s*:\s*/;function uT(o,e){let t,n;const s=o.getAttribute("style");if(s){const c=s.split(lT);c[c.length-1]===""&&c.pop();for(let u=c.length;u--;){const[d,f]=c[u].split(cT).map(g=>g.trim());d==="stop-color"?t=f:d==="stop-opacity"&&(n=f)}}const a=new Re(t||o.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:X0(o.getAttribute("offset"),0),color:a.toRgb(),opacity:Ci(parseFloat(n||o.getAttribute("stop-opacity")||""),1)*a.getAlpha()*e}}function hT(o,e){const t=[],n=o.getElementsByTagName("stop"),s=X0(e,1);for(let a=n.length;a--;)t.push(uT(n[a],s));return t}function Y0(o){return o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?"linear":"radial"}function $0(o){return o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function sn(o,e){return o.getAttribute(e)}function dT(o,e){return function(t,n){let s,{width:a,height:c,gradientUnits:u}=n;return Object.keys(t).reduce((d,f)=>{const g=t[f];return g==="Infinity"?s=1:g==="-Infinity"?s=0:(s=typeof g=="string"?parseFloat(g):g,typeof g=="string"&&H0(g)&&(s*=.01,u==="pixels"&&(f!=="x1"&&f!=="x2"&&f!=="r2"||(s*=a),f!=="y1"&&f!=="y2"||(s*=c)))),d[f]=s,d},{})}(Y0(o)==="linear"?function(t){return{x1:sn(t,"x1")||0,y1:sn(t,"y1")||0,x2:sn(t,"x2")||"100%",y2:sn(t,"y2")||0}}(o):function(t){return{x1:sn(t,"fx")||sn(t,"cx")||"50%",y1:sn(t,"fy")||sn(t,"cy")||"50%",r1:0,x2:sn(t,"cx")||"50%",y2:sn(t,"cy")||"50%",r2:sn(t,"r")||"50%"}}(o),P(P({},e),{},{gradientUnits:$0(o)}))}class ga{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:s={},colorStops:a=[],offsetX:c=0,offsetY:u=0,gradientTransform:d,id:f}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:P(P({},t==="radial"?oT:V0),s),colorStops:a,offsetX:c,offsetY:u,gradientTransform:d,id:f?"".concat(f,"_").concat(mr()):mr()})}addColorStop(e){for(const t in e){const n=new Re(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return P(P({},Fi(this,e)),{},{type:this.type,coords:P({},this.coords),colorStops:this.colorStops.map(t=>P({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],s=this.gradientTransform?this.gradientTransform.concat():wt.concat(),a=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",c=this.colorStops.map(y=>P({},y)).sort((y,v)=>y.offset-v.offset);let u=-this.offsetX,d=-this.offsetY;var f;a==="objectBoundingBox"?(u/=e.width,d/=e.height):(u+=e.width/2,d+=e.height/2),(f=e)&&typeof f._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(u-=e.pathOffset.x,d-=e.pathOffset.y),s[4]-=u,s[5]-=d;const g=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(a,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(rl(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:y,y1:v,x2:w,y2:x}=this.coords;n.push("<linearGradient ",g,' x1="',y,'" y1="',v,'" x2="',w,'" y2="',x,`">
`)}else if(this.type==="radial"){const{x1:y,y1:v,x2:w,y2:x,r1:S,r2:C}=this.coords,b=S>C;n.push("<radialGradient ",g,' cx="',b?y:w,'" cy="',b?v:x,'" r="',b?S:C,'" fx="',b?w:y,'" fy="',b?x:v,`">
`),b&&(c.reverse(),c.forEach(R=>{R.offset=1-R.offset}));const k=Math.min(S,C);if(k>0){const R=k/Math.max(S,C);c.forEach(N=>{N.offset+=R*(1-N.offset)})}}return c.forEach(y=>{let{color:v,offset:w,opacity:x}=y;n.push("<stop ",'offset="',100*w+"%",'" style="stop-color:',v,x!==void 0?";stop-opacity: "+x:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:t,y1:n,x2:s,y2:a,r1:c,r2:u}=this.coords,d=this.type==="linear"?e.createLinearGradient(t,n,s,a):e.createRadialGradient(t,n,c,s,a,u);return this.colorStops.forEach(f=>{let{color:g,opacity:y,offset:v}=f;d.addColorStop(v,y!==void 0?new Re(g).setAlpha(y).toRgba():g)}),d}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(P(P({},e),{},{colorStops:t?t.map(s=>P({},s)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const s=$0(e),a=t._findCenterFromElement();return new this(P({id:e.getAttribute("id")||void 0,type:Y0(e),coords:dT(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:hT(e,n.opacity),gradientUnits:s,gradientTransform:mh(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-a.x,offsetY:t.height/2-a.y}:{offsetX:0,offsetY:0}))}}O(ga,"type","Gradient"),Z.setClass(ga,"gradient"),Z.setClass(ga,"linear"),Z.setClass(ga,"radial");const fT=["type","source","patternTransform"];class Uu{get type(){return"pattern"}set type(e){gr("warn","Setting type has no effect",e)}constructor(e){O(this,"repeat","repeat"),O(this,"offsetX",0),O(this,"offsetY",0),O(this,"crossOrigin",""),this.id=mr(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return P(P({},Fi(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:Ve(this.offsetX,Ce.NUM_FRACTION_DIGITS),offsetY:Ve(this.offsetY,Ce.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:s,repeat:a,id:c}=this,u=Ci(this.offsetX/t,0),d=Ci(this.offsetY/n,0),f=a==="repeat-y"||a==="no-repeat"?1+Math.abs(u||0):Ci(s.width/t,0),g=a==="repeat-x"||a==="no-repeat"?1+Math.abs(d||0):Ci(s.height/n,0);return['<pattern id="SVGID_'.concat(c,'" x="').concat(u,'" y="').concat(d,'" width="').concat(f,'" height="').concat(g,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:n,source:s,patternTransform:a}=e,c=Be(e,fT);const u=await Xa(s,P(P({},t),{},{crossOrigin:c.crossOrigin}));return new this(P(P({},c),{},{patternTransform:a&&a.slice(0),source:u}))}}O(Uu,"type","Pattern"),Z.setClass(Uu),Z.setClass(Uu,"pattern");const pT=["path","left","top"],gT=["d"];class Lr extends gt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:s,top:a}=t,c=Be(t,pT);super(),Object.assign(this,Lr.ownDefaults),this.setOptions(c),this._setPath(e||[],!0),typeof s=="number"&&this.set(Pe,s),typeof a=="number"&&this.set(Pt,a)}_setPath(e,t){this.path=XC(Array.isArray(e)?e:eT(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new F(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+n);break;case"M":e.moveTo(s[1]+t,s[2]+n);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n,s[5]+t,s[6]+n);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+n,s[3]+t,s[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P(P({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=tT(this.path,Ce.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Ce.NUM_FRACTION_DIGITS;return" translate(".concat(Ve(-this.pathOffset.x,e),", ").concat(Ve(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:s}=this._calcDimensions();this.set({width:t,height:n,pathOffset:s}),e&&this.setPositionByOrigin(s,ye,ye)}_calcBoundsFromPath(){const e=[];let t=0,n=0,s=0,a=0;for(const c of this.path)switch(c[0]){case"L":s=c[1],a=c[2],e.push({x:t,y:n},{x:s,y:a});break;case"M":s=c[1],a=c[2],t=s,n=a;break;case"C":e.push(...tm(s,a,c[1],c[2],c[3],c[4],c[5],c[6])),s=c[5],a=c[6];break;case"Q":e.push(...tm(s,a,c[1],c[2],c[1],c[2],c[3],c[4])),s=c[3],a=c[4];break;case"Z":s=t,a=n}return Bn(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return P(P({},e),{},{pathOffset:new F(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const s=Yn(e,this.ATTRIBUTE_NAMES,n),{d:a}=s;return new this(a,P(P(P({},Be(s,gT)),t),{},{left:void 0,top:void 0}))}}O(Lr,"type","Path"),O(Lr,"cacheProperties",[...Xn,"path","fillRule"]),O(Lr,"ATTRIBUTE_NAMES",[...vr,"d"]),Z.setClass(Lr),Z.setSVGClass(Lr);const mT=["left","top","radius"],G0=["radius","startAngle","endAngle","counterClockwise"];class jn extends gt{static getDefaults(){return P(P({},super.getDefaults()),jn.ownDefaults)}constructor(e){super(),Object.assign(this,jn.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Qe(this.startAngle),Qe(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Lt)}getRadiusY(){return this.get("radius")*this.get(Kt)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...G0,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,n=Qe(this.startAngle),s=Qe(this.endAngle),a=Un(n)*t,c=Vn(n)*t,u=Un(s)*t,d=Vn(s)*t,f=e>180?1:0,g=this.counterClockwise?0:1;return['<path d="M '.concat(a," ").concat(c," A ").concat(t," ").concat(t," 0 ").concat(f," ").concat(g," ").concat(u," ").concat(d,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,n){const s=Yn(e,this.ATTRIBUTE_NAMES,n),{left:a=0,top:c=0,radius:u=0}=s;return new this(P(P({},Be(s,mT)),{},{radius:u,left:a-u,top:c-u}))}static fromObject(e){return super._fromObject(e)}}O(jn,"type","Circle"),O(jn,"cacheProperties",[...Xn,...G0]),O(jn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),O(jn,"ATTRIBUTE_NAMES",["cx","cy","r",...vr]),Z.setClass(jn),Z.setSVGClass(jn);const yT=["x1","y1","x2","y2"],vT=["x1","y1","x2","y2"],wh=["x1","x2","y1","y2"];class jr extends gt{constructor(){let[e,t,n,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,jr.ownDefaults),this.setOptions(a),this.x1=e,this.x2=n,this.y1=t,this.y2=s,this._setWidthHeight();const{left:c,top:u}=a;typeof c=="number"&&this.set(Pe,c),typeof u=="number"&&this.set(Pt,u)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:s}=this;this.width=Math.abs(n-e),this.height=Math.abs(s-t);const{left:a,top:c,width:u,height:d}=Bn([{x:e,y:t},{x:n,y:s}]),f=new F(a+u/2,c+d/2);this.setPositionByOrigin(f,ye,ye)}_set(e,t){return super._set(e,t),wh.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var s;qt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new F((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P(P({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:s,width:a,height:c}=this,u=e<=t?-1:1,d=n<=s?-1:1;return{x1:u*a/2,x2:u*-a/2,y1:d*c/2,y2:d*-c/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,n){const s=Yn(e,this.ATTRIBUTE_NAMES,n),{x1:a=0,y1:c=0,x2:u=0,y2:d=0}=s;return new this([a,c,u,d],Be(s,yT))}static fromObject(e){let{x1:t,y1:n,x2:s,y2:a}=e,c=Be(e,vT);return this._fromObject(P(P({},c),{},{points:[t,n,s,a]}),{extraParam:"points"})}}O(jr,"type","Line"),O(jr,"cacheProperties",[...Xn,...wh]),O(jr,"ATTRIBUTE_NAMES",vr.concat(wh)),Z.setClass(jr),Z.setSVGClass(jr);class Fr extends gt{static getDefaults(){return P(P({},super.getDefaults()),Fr.ownDefaults)}constructor(e){super(),Object.assign(this,Fr.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}O(Fr,"type","Triangle"),O(Fr,"ownDefaults",{width:100,height:100}),Z.setClass(Fr),Z.setSVGClass(Fr);const q0=["rx","ry"];class An extends gt{static getDefaults(){return P(P({},super.getDefaults()),An.ownDefaults)}constructor(e){super(),Object.assign(this,An.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Lt)}getRy(){return this.get("ry")*this.get(Kt)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...q0,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Ja,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const s=Yn(e,this.ATTRIBUTE_NAMES,n);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function _T(o){if(!o)return[];const e=o.replace(/,/g," ").trim().split(/\s+/),t=[];for(let n=0;n<e.length;n+=2)t.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return t}O(An,"type","Ellipse"),O(An,"cacheProperties",[...Xn,...q0]),O(An,"ownDefaults",{rx:0,ry:0}),O(An,"ATTRIBUTE_NAMES",[...vr,"cx","cy","rx","ry"]),Z.setClass(An),Z.setSVGClass(An);const xT=["left","top"],K0={exactBoundingBox:!1};class an extends gt{static getDefaults(){return P(P({},super.getDefaults()),an.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),O(this,"strokeDiff",void 0),Object.assign(this,an.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(Pe,n),typeof s=="number"&&this.set(Pt,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return cC(this.points,e,this.isOpen())}_calcDimensions(e){e=P({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(f=>f.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new F,strokeOffset:new F,strokeDiff:new F};const n=Bn(t),s=Tl(P(P({},e),{},{scaleX:1,scaleY:1})),a=Bn(this.points.map(f=>Ot(f,s,!0))),c=new F(this.scaleX,this.scaleY);let u=n.left+n.width/2,d=n.top+n.height/2;return this.exactBoundingBox&&(u-=d*Math.tan(Qe(this.skewX)),d-=u*Math.tan(Qe(this.skewY))),P(P({},n),{},{pathOffset:new F(u,d),strokeOffset:new F(a.left,a.top).subtract(new F(n.left,n.top)).multiply(c),strokeDiff:new F(n.width,n.height).subtract(new F(a.width,a.height)).multiply(c)})}_findCenterFromElement(){const e=Bn(this.points);return new F(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:s,height:a,pathOffset:c,strokeOffset:u,strokeDiff:d}=this._calcDimensions();this.set({width:s,height:a,pathOffset:c,strokeOffset:u,strokeDiff:d}),e&&this.setPositionByOrigin(new F(t+s/2,n+a/2),ye,ye)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new F(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let c;if(Object.keys(e).some(u=>this.strokeUniform||this.constructor.layoutProperties.includes(u))){var t,n;const{width:u,height:d}=this._calcDimensions(e);c=new F((t=e.width)!==null&&t!==void 0?t:u,(n=e.height)!==null&&n!==void 0?n:d)}else{var s,a;c=new F((s=e.width)!==null&&s!==void 0?s:this.width,(a=e.height)!==null&&a!==void 0?a:this.height)}return c.multiply(new F(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&n&&((e===Lt||e===Kt)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P(P({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:n,y:s}=t;return{x:n,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,s=Ce.NUM_FRACTION_DIGITS;for(let a=0,c=this.points.length;a<c;a++)e.push(Ve(this.points[a].x-t,s),",",Ve(this.points[a].y-n,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,n=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-s);for(let a=0;a<t;a++){const c=this.points[a];e.lineTo(c.x-n,c.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(_T(e.getAttribute("points")),P(P({},Be(Yn(e,this.ATTRIBUTE_NAMES,n),xT)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}O(an,"ownDefaults",K0),O(an,"type","Polyline"),O(an,"layoutProperties",[ji,Ai,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),O(an,"cacheProperties",[...Xn,"points"]),O(an,"ATTRIBUTE_NAMES",[...vr]),Z.setClass(an),Z.setSVGClass(an);class ma extends an{isOpen(){return!1}}O(ma,"ownDefaults",K0),O(ma,"type","Polygon"),Z.setClass(ma),Z.setSVGClass(ma);const Q0=["fontSize","fontWeight","fontFamily","fontStyle"],J0=["underline","overline","linethrough"],Z0=[...Q0,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],ey=[...Z0,...J0,"textBackgroundColor","direction"],wT=[...Q0,...J0,Rt,"strokeWidth",nt,"deltaY","textBackgroundColor"],ST={_reNewline:Ah,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Pe,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Pe,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},_n="justify",cl="justify-left",Rs="justify-right",Ls="justify-center";class ty extends gt{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const n in t)for(const s in t[n])for(const a in t[n][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const n=t===void 0?this.styles:{0:this.styles[t]};for(const s in n)for(const a in n[s])if(n[s][a][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,s,a=0,c=!0,u=0;for(const d in t){n=0;for(const f in t[d]){const g=t[d][f]||{};a++,g[e]!==void 0?(s?g[e]!==s&&(c=!1):s=g[e],g[e]===this[e]&&delete g[e]):c=!1,Object.keys(g).length!==0?n++:delete t[d][f]}n===0&&delete t[d]}for(let d=0;d<this._textLines.length;d++)u+=this._textLines[d].length;c&&a===u&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,s,a;for(s in t){for(a in n=t[s],n)delete n[a][e],Object.keys(n[a]).length===0&&delete n[a];Object.keys(n).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const a=zh(P(P({},this._getStyleDeclaration(n,s)),t),c=>c!==void 0);this._setStyleDeclaration(n,s,a)}getSelectionStyles(e,t,n){const s=[];for(let a=e;a<(t||e);a++)s.push(this.getStyleAtPosition(a,n));return s}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,s):this._getStyleDeclaration(n,s)}setSelectionStyles(e,t,n){for(let s=t;s<(n||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const s=this.styles&&this.styles[e];return s&&(n=s[t])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,t){return P(P({},Fi(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}O(ty,"_styleProperties",wT);const CT=/  +/g,TT=/"/g;function Vu(o,e,t,n,s){return"		".concat(function(a,c){let{left:u,top:d,width:f,height:g}=c,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ce.NUM_FRACTION_DIGITS;const v=Bs(nt,a,!1),[w,x,S,C]=[u,d,f,g].map(b=>Ve(b,y));return"<rect ".concat(v,' x="').concat(w,'" y="').concat(x,'" width="').concat(S,'" height="').concat(C,'"></rect>')}(o,{left:e,top:t,width:n,height:s}),`
`)}const bT=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Hu;class vt extends ty{static getDefaults(){return P(P({},super.getDefaults()),vt.ownDefaults)}constructor(e,t){super(),O(this,"__charBounds",[]),Object.assign(this,vt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=U0(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(_n)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,s,a,c,u;for(let d=0,f=this._textLines.length;d<f;d++)if((this.textAlign===_n||d!==f-1&&!this.isEndOfWrapping(d))&&(s=0,a=this._textLines[d],t=this.getLineWidth(d),t<this.width&&(u=this.textLines[d].match(this._reSpacesAndTabs)))){n=u.length,e=(this.width-t)/n;for(let g=0;g<=a.length;g++)c=this.__charBounds[d][g],this._reSpaceAndTab.test(a[g])?(c.width+=e,c.kernedWidth+=e,c.left+=s,s+=e):c.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<n.length;s++){if(e<=n[s].length)return{lineIndex:s,charIndex:e};e-=n[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:n[s-1].length<e?n[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Rt?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case ye:e.textBaseline="middle";break;case"ascender":e.textBaseline=Pt;break;case"descender":e.textBaseline=ch}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,n,s,a,c){this._renderChars(e,t,n,s,a,c)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let s=this._getTopOffset();for(let a=0,c=this._textLines.length;a<c;a++){const u=this.getHeightOfLine(a);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",a)){s+=u;continue}const d=this._textLines[a].length,f=this._getLineLeftOffset(a);let g,y,v=0,w=0,x=this.getValueOfPropertyAt(a,0,"textBackgroundColor");for(let S=0;S<d;S++){const C=this.__charBounds[a][S];y=this.getValueOfPropertyAt(a,S,"textBackgroundColor"),this.path?(e.save(),e.translate(C.renderLeft,C.renderTop),e.rotate(C.angle),e.fillStyle=y,y&&e.fillRect(-C.width/2,-u/this.lineHeight*(1-this._fontSizeFraction),C.width,u/this.lineHeight),e.restore()):y!==x?(g=n+f+w,this.direction==="rtl"&&(g=this.width-g-v),e.fillStyle=x,x&&e.fillRect(g,s,v,u/this.lineHeight),w=C.left,v=C.width,x=y):v+=C.kernedWidth}y&&!this.path&&(g=n+f+w,this.direction==="rtl"&&(g=this.width-g-v),e.fillStyle=y,e.fillRect(g,s,v,u/this.lineHeight)),s+=u}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,s){const a=Ps.getFontCache(t),c=this._getFontDeclaration(t),u=n+e,d=n&&c===this._getFontDeclaration(s),f=t.fontSize/this.CACHE_FONT_SIZE;let g,y,v,w;if(n&&a[n]!==void 0&&(v=a[n]),a[e]!==void 0&&(w=g=a[e]),d&&a[u]!==void 0&&(y=a[u],w=y-v),g===void 0||v===void 0||y===void 0){const x=function(){return Hu||(Hu=Cn({width:0,height:0}).getContext("2d")),Hu}();this._setTextStyles(x,t,!0),g===void 0&&(w=g=x.measureText(e).width,a[e]=g),v===void 0&&d&&n&&(v=x.measureText(n).width,a[n]=v),d&&y===void 0&&(y=x.measureText(u).width,a[u]=y,w=y-v)}return{width:g*f,kernedWidth:w*f}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,s=0;const a=this.pathSide===Ke,c=this.path,u=this._textLines[e],d=u.length,f=new Array(d);this.__charBounds[e]=f;for(let g=0;g<d;g++){const y=u[g];n=this._getGraphemeBox(y,e,g,t),f[g]=n,s+=n.kernedWidth,t=y}if(f[d]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},c&&c.segmentsInfo){let g=0;const y=c.segmentsInfo[c.segmentsInfo.length-1].length;switch(this.textAlign){case Pe:g=a?y-s:0;break;case ye:g=(y-s)/2;break;case Ke:g=a?0:y-s}g+=this.pathStartOffset*(a?-1:1);for(let v=a?d-1:0;a?v>=0:v<d;a?v--:v++)n=f[v],g>y?g%=y:g<0&&(g+=y),this._setGraphemeOnPath(g,n),g+=n.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,s=this.path,a=KC(s.path,n,s.segmentsInfo);t.renderLeft=a.x-s.pathOffset.x,t.renderTop=a.y-s.pathOffset.y,t.angle=a.angle+(this.pathSide===Ke?Math.PI:0)}_getGraphemeBox(e,t,n,s,a){const c=this.getCompleteStyleDeclaration(t,n),u=s?this.getCompleteStyleDeclaration(t,n-1):{},d=this._measureChar(e,c,s,u);let f,g=d.kernedWidth,y=d.width;this.charSpacing!==0&&(f=this._getWidthOfCharSpacing(),y+=f,g+=f);const v={width:y,left:0,height:c.fontSize,kernedWidth:g,deltaY:c.deltaY};if(n>0&&!a){const w=this.__charBounds[t][n-1];v.left=w.left+w.width+d.kernedWidth-d.width}return v}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,s=this._textLines[e].length;n<s;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,s=this._textLines.length;n<s;n++)e=this.getHeightOfLine(n),t+=n===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const s=this._getLeftOffset(),a=this._getTopOffset();for(let c=0,u=this._textLines.length;c<u;c++){const d=this.getHeightOfLine(c),f=d/this.lineHeight,g=this._getLineLeftOffset(c);this._renderTextLine(t,e,this._textLines[c],s+g,a+n+f,c),n+=d}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(nt))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,s,a,c){const u=this.getHeightOfLine(c),d=this.textAlign.includes(_n),f=this.path,g=!d&&this.charSpacing===0&&this.isEmptyStyles(c)&&!f,y=this.direction==="ltr",v=this.direction==="ltr"?1:-1,w=t.direction;let x,S,C,b,k,R="",N=0;if(t.save(),w!==this.direction&&(t.canvas.setAttribute("dir",y?"ltr":"rtl"),t.direction=y?"ltr":"rtl",t.textAlign=y?Pe:Ke),a-=u*this._fontSizeFraction/this.lineHeight,g)return this._renderChar(e,t,c,0,n.join(""),s,a),void t.restore();for(let z=0,G=n.length-1;z<=G;z++)b=z===G||this.charSpacing||f,R+=n[z],C=this.__charBounds[c][z],N===0?(s+=v*(C.kernedWidth-C.width),N+=C.width):N+=C.kernedWidth,d&&!b&&this._reSpaceAndTab.test(n[z])&&(b=!0),b||(x=x||this.getCompleteStyleDeclaration(c,z),S=this.getCompleteStyleDeclaration(c,z+1),b=Gh(x,S,!1)),b&&(f?(t.save(),t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),this._renderChar(e,t,c,z,R,-N/2,0),t.restore()):(k=s,this._renderChar(e,t,c,z,R,k,a)),R="",x=S,s+=v*N,N=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,s=Cn({width:t,height:n}),a=s.getContext("2d");return s.width=t,s.height=n,a.beginPath(),a.moveTo(0,0),a.lineTo(t,0),a.lineTo(t,n),a.lineTo(0,n),a.closePath(),a.translate(t/2,n/2),a.fillStyle=e.toLive(a),this._applyPatternGradientTransform(a,e),a.fill(),a.createPattern(s,"no-repeat")}handleFiller(e,t,n){let s,a;return qt(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,a=-this.height/2,e.translate(s,a),e[t]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:a}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,s,a,c,u){const d=this._getStyleDeclaration(n,s),f=this.getCompleteStyleDeclaration(n,s),g=e==="fillText"&&f.fill,y=e==="strokeText"&&f.stroke&&f.strokeWidth;if(y||g){if(t.save(),t.font=this._getFontDeclaration(f),d.textBackgroundColor&&this._removeShadow(t),d.deltaY&&(u+=d.deltaY),g){const v=this._setFillStyles(t,f);t.fillText(a,c-v.offsetX,u-v.offsetY)}if(y){const v=this._setStrokeStyles(t,f);t.strokeText(a,c-v.offsetX,u-v.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const s=this.get2DCursorLocation(e,!0),a=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),c=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),u={fontSize:a*n.size,deltaY:c+a*n.baseline};this.setSelectionStyles(u,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,s=this.textAlign,a=this.direction,c=this.isEndOfWrapping(e);let u=0;return s===_n||s===Ls&&!c||s===Rs&&!c||s===cl&&!c?0:(s===ye&&(u=n/2),s===Ke&&(u=n),s===Ls&&(u=n/2),s===Rs&&(u=n),a==="rtl"&&(s===Ke||s===_n||s===Rs?u=0:s===Pe||s===cl?u=-n:s!==ye&&s!==Ls||(u=-n/2)),u)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var s;return(s=this._getStyleDeclaration(e,t)[n])!==null&&s!==void 0?s:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const s=this._getLeftOffset(),a=this.path,c=this._getWidthOfCharSpacing(),u=this.offsets[t];for(let d=0,f=this._textLines.length;d<f;d++){const g=this.getHeightOfLine(d);if(!this[t]&&!this.styleHas(t,d)){n+=g;continue}const y=this._textLines[d],v=g/this.lineHeight,w=this._getLineLeftOffset(d);let x,S,C=0,b=0,k=this.getValueOfPropertyAt(d,0,t),R=this.getValueOfPropertyAt(d,0,nt);const N=n+v*(1-this._fontSizeFraction);let z=this.getHeightOfChar(d,0),G=this.getValueOfPropertyAt(d,0,"deltaY");for(let W=0,te=y.length;W<te;W++){const oe=this.__charBounds[d][W];x=this.getValueOfPropertyAt(d,W,t),S=this.getValueOfPropertyAt(d,W,nt);const pe=this.getHeightOfChar(d,W),ge=this.getValueOfPropertyAt(d,W,"deltaY");if(a&&x&&S)e.save(),e.fillStyle=R,e.translate(oe.renderLeft,oe.renderTop),e.rotate(oe.angle),e.fillRect(-oe.kernedWidth/2,u*pe+ge,oe.kernedWidth,this.fontSize/15),e.restore();else if((x!==k||S!==R||pe!==z||ge!==G)&&b>0){let ce=s+w+C;this.direction==="rtl"&&(ce=this.width-ce-b),k&&R&&(e.fillStyle=R,e.fillRect(ce,N+u*z+G,b,this.fontSize/15)),C=oe.left,b=oe.width,k=x,R=S,z=pe,G=ge}else b+=oe.kernedWidth}let X=s+w+C;this.direction==="rtl"&&(X=this.width-X-b),e.fillStyle=S,x&&S&&e.fillRect(X,N+u*z+G,b-c,this.fontSize/15),n+=g}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const c=e.includes("'")||e.includes('"')||e.includes(",")||vt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(a?this.CACHE_FONT_SIZE:s,"px"),c].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return $h(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),s=[`
`];let a=[];for(let c=0;c<t.length;c++)n[c]=this.graphemeSplit(t[c]),a=a.concat(n[c],s);return a.pop(),{_unwrappedLines:n,lines:t,graphemeText:a,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P(P({},super.toObject([...ey,...e])),{},{styles:dC(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let s=!1,a=!1;if(typeof e=="object")for(const c in e)c==="path"&&this.setPathInfo(),s=s||n.includes(c),a=a||c==="path";else s=n.includes(e),a=e==="path";return a&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const s=Yn(e,vt.ATTRIBUTE_NAMES,n),a=P(P({},t),s),{textAnchor:c=Pe,textDecoration:u="",dx:d=0,dy:f=0,top:g=0,left:y=0,fontSize:v=jh,strokeWidth:w=1}=a,x=Be(a,bT),S=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),P({left:y+d,top:g+f,underline:u.includes("underline"),overline:u.includes("overline"),linethrough:u.includes("line-through"),strokeWidth:0,fontSize:v},x)),C=S.getScaledHeight()/S.height,b=((S.height+S.strokeWidth)*S.lineHeight-S.height)*C,k=S.getScaledHeight()+b;let R=0;return c===ye&&(R=S.getScaledWidth()/2),c===Ke&&(R=S.getScaledWidth()),S.set({left:S.left-R,top:S.top-(k-S.fontSize*(.07+S._fontSizeFraction))/S.lineHeight,strokeWidth:w}),S}static fromObject(e){return this._fromObject(P(P({},e),{},{styles:fC(e.styles||{},e.text)}),{extraParam:"text"})}}O(vt,"textLayoutProperties",Z0),O(vt,"cacheProperties",[...Xn,...ey]),O(vt,"ownDefaults",ST),O(vt,"type","Text"),O(vt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),O(vt,"ATTRIBUTE_NAMES",vr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),L0(vt,[class extends T0{_toSVG(){const o=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(o.textTop,o.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(o){return this._createBaseSVGMarkup(this._toSVG(),{reviver:o,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(o){let{textBgRects:e,textSpans:t}=o;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(TT,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(o,e){const t=[],n=[];let s,a=o;this.backgroundColor&&n.push(...Vu(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let c=0,u=this._textLines.length;c<u;c++)s=this._getLineLeftOffset(c),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",c))&&this._setSVGTextLineBg(n,c,e+s,a),this._setSVGTextLineText(t,c,e+s,a),a+=this.getHeightOfLine(c);return{textSpans:t,textBgRects:n}}_createTextCharSpan(o,e,t,n){const s=this.getSvgSpanStyles(e,o!==o.trim()||!!o.match(CT)),a=s?'style="'.concat(s,'"'):"",c=e.deltaY,u=c?' dy="'.concat(Ve(c,Ce.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Ve(t,Ce.NUM_FRACTION_DIGITS),'" y="').concat(Ve(n,Ce.NUM_FRACTION_DIGITS),'" ').concat(u).concat(a,">").concat(uC(o),"</tspan>")}_setSVGTextLineText(o,e,t,n){const s=this.getHeightOfLine(e),a=this.textAlign.includes(_n),c=this._textLines[e];let u,d,f,g,y,v="",w=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let x=0,S=c.length-1;x<=S;x++)y=x===S||this.charSpacing,v+=c[x],f=this.__charBounds[e][x],w===0?(t+=f.kernedWidth-f.width,w+=f.width):w+=f.kernedWidth,a&&!y&&this._reSpaceAndTab.test(c[x])&&(y=!0),y||(u=u||this.getCompleteStyleDeclaration(e,x),d=this.getCompleteStyleDeclaration(e,x+1),y=Gh(u,d,!0)),y&&(g=this._getStyleDeclaration(e,x),o.push(this._createTextCharSpan(v,g,t,n)),v="",u=d,this.direction==="rtl"?t-=w:t+=w,w=0)}_setSVGTextLineBg(o,e,t,n){const s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight;let c,u=0,d=0,f=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let g=0;g<s.length;g++){const{left:y,width:v,kernedWidth:w}=this.__charBounds[e][g];c=this.getValueOfPropertyAt(e,g,"textBackgroundColor"),c!==f?(f&&o.push(...Vu(f,t+d,n,u,a)),d=y,u=v,f=c):u+=w}c&&o.push(...Vu(f,t+d,n,u,a))}_getSVGLineTopOffset(o){let e,t=0;for(e=0;e<o;e++)t+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(o){return"".concat(super.getSvgStyles(o)," white-space: pre;")}getSvgSpanStyles(o,e){const{fontFamily:t,strokeWidth:n,stroke:s,fill:a,fontSize:c,fontStyle:u,fontWeight:d,deltaY:f}=o,g=this.getSvgTextDecoration(o);return[s?Bs(Rt,s):"",n?"stroke-width: ".concat(n,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",c?"font-size: ".concat(c,"px; "):"",u?"font-style: ".concat(u,"; "):"",d?"font-weight: ".concat(d,"; "):"",g&&"text-decoration: ".concat(g,"; "),a?Bs(nt,a):"",f?"baseline-shift: ".concat(-f,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(o){return["overline","underline","line-through"].filter(e=>o[e.replace("-","")]).join(" ")}}]),Z.setClass(vt),Z.setSVGClass(vt);class kT{constructor(e){O(this,"target",void 0),O(this,"__mouseDownInPlace",!1),O(this,"__dragStartFired",!1),O(this,"__isDraggingOver",!1),O(this,"__dragStartSelection",void 0),O(this,"__dragImageDisposer",void 0),O(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:s,selectionEnd:a}=t;const c=this.target,u=c.canvas,d=new F(c.flipX?-1:1,c.flipY?-1:1),f=c._getCursorBoundaries(s),g=new F(f.left+f.leftOffset,f.top+f.topOffset).multiply(d).transform(c.calcTransformMatrix()),y=u.getScenePoint(e).subtract(g),v=c.getCanvasRetinaScaling(),w=c.getBoundingRect(),x=g.subtract(new F(w.left,w.top)),S=u.viewportTransform,C=x.add(y).transform(S,!0),b=c.backgroundColor,k=Yh(c.styles);c.backgroundColor="";const R={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};c.setSelectionStyles(R,0,s),c.setSelectionStyles(R,a,c.text.length),c.dirty=!0;const N=c.toCanvasElement({enableRetinaScaling:u.enableRetinaScaling,viewportTransform:!0});c.backgroundColor=b,c.styles=k,c.dirty=!0,_h(N,{position:"fixed",left:"".concat(-N.width,"px"),border:Mt,width:"".concat(N.width/v,"px"),height:"".concat(N.height/v,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{N.remove()},ln(e.target||this.target.hiddenTextarea).body.appendChild(N),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(N,C.x,C.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},a=t._text.slice(s.selectionStart,s.selectionEnd).join(""),c=P({text:t.text,value:a},s);e.dataTransfer.setData("text/plain",a),e.dataTransfer.setData("application/fabric",JSON.stringify({value:a,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,c)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,s=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let a=(t=n.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(a&&!s){const c=this.target,u=c.canvas;let d=c.getSelectionStartFromPointer(n);const{styles:f}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},g=a[Math.max(0,a.length-1)],y=0;if(this.__dragStartSelection){const v=this.__dragStartSelection.selectionStart,w=this.__dragStartSelection.selectionEnd;d>v&&d<=w?d=v:d>w&&(d-=w-v),c.removeChars(v,w),delete this.__dragStartSelection}c._reNewline.test(g)&&(c._reNewline.test(c._text[d])||d===c._text.length)&&(a=a.trimEnd()),e.didDrop=!0,e.dropTarget=c,c.insertChars(a,f,d),u.setActiveObject(c),c.enterEditing(n),c.selectionStart=Math.min(d+y,c._text.length),c.selectionEnd=Math.min(c.selectionStart+a.length,c._text.length),c.hiddenTextarea.value=c.text,c._updateTextarea(),c.hiddenTextarea.focus(),c.fire(Za,{index:d+y,action:"drop"}),u.fire("text:changed",{target:c}),u.contextTopDirty=!0,u.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const s=this.target,a=this.target.canvas,{selectionStart:c,selectionEnd:u}=this.__dragStartSelection,d=((n=t.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||Mt;d===Mt?(s.selectionStart=c,s.selectionEnd=u,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),d==="move"&&(s.removeChars(c,u),s.selectionStart=s.selectionEnd=c,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(Za,{index:c,action:"dragend"}),a.fire("text:changed",{target:s}),a.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const im=/[ \n\.,;!\?\-]/;class ET extends vt{constructor(){super(...arguments),O(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:s,onComplete:a}=e;return O0({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:s,onComplete:a,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:c=>{this._currentCursorOpacity=c,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let s=e>0&&this._reSpace.test(n[e])&&(t===-1||!Ah.test(n[e-1]))?e-1:e,a=n[s];for(;s>0&&s<n.length&&!im.test(a);)s+=t,a=n[s];return t===-1&&im.test(a)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),n=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;ln(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),s=this.selectionStart,a=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&s!==a||s!==n&&a!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===a||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const s=n.slice(0,e),a=this.graphemeSplit(s).length;if(e===t)return{selectionStart:a,selectionEnd:a};const c=n.slice(e,t);return{selectionStart:a,selectionEnd:a+this.graphemeSplit(c).length}}fromGraphemeToStringSelection(e,t,n){const s=n.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),s=n.lineIndex,a=n.charIndex,c=this.getValueOfPropertyAt(s,a,"fontSize")*this.lineHeight,u=t.leftOffset,d=this.getCanvasRetinaScaling(),f=this.canvas.upperCanvasEl,g=f.width/d,y=f.height/d,v=g-c,w=y-c,x=new F(t.left+u,t.top+t.topOffset+c).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new F(f.clientWidth/g,f.clientHeight/y));return x.x<0&&(x.x=0),x.x>v&&(x.x=v),x.y<0&&(x.y=0),x.y>w&&(x.y=w),x.x+=this.canvas._offset.left,x.y+=this.canvas._offset.top,{left:"".concat(x.x,"px"),top:"".concat(x.y,"px"),fontSize:"".concat(c,"px"),charHeight:c}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(el),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:a,charIndex:c}=this.get2DCursorLocation(t,!0);if(n!==a){if(this.styles[n])for(let u=s;u<this._unwrappedTextLines[n].length;u++)delete this.styles[n][u];if(this.styles[a])for(let u=c;u<this._unwrappedTextLines[a].length;u++){const d=this.styles[a][u];d&&(this.styles[n]||(this.styles[n]={}),this.styles[n][s+u-c]=d)}for(let u=n+1;u<=a;u++)delete this.styles[u];this.shiftLineStyles(a,n-a)}else if(this.styles[n]){const u=this.styles[n],d=c-s;for(let f=s;f<c;f++)delete u[f];for(const f in this.styles[n]){const g=parseInt(f,10);g>=c&&(u[g-d]=u[f],delete u[f])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const s in this.styles){const a=parseInt(s,10);a>e&&(this.styles[a+t]=n[a],n[a-t]||delete this.styles[a])}}insertNewlineStyleObject(e,t,n,s){const a={},c=this._unwrappedTextLines[e].length,u=c===t;let d=!1;n||(n=1),this.shiftLineStyles(e,n);const f=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const y in this.styles[e]){const v=parseInt(y,10);v>=t&&(d=!0,a[v-t]=this.styles[e][y],u&&t===0||delete this.styles[e][y])}let g=!1;for(d&&!u&&(this.styles[e+n]=a,g=!0),(g||c>t)&&n--;n>0;)s&&s[n-1]?this.styles[e+n]={0:P({},s[n-1])}:f?this.styles[e+n]={0:P({},f)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,s){this.styles||(this.styles={});const a=this.styles[e],c=a?P({},a):{};n||(n=1);for(const d in c){const f=parseInt(d,10);f>=t&&(a[f+n]=c[f],c[f-n]||delete a[f])}if(this._forceClearCache=!0,s){for(;n--;)Object.keys(s[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=P({},s[n]));return}if(!a)return;const u=a[t?t-1:1];for(;u&&n--;)this.styles[e][t+n]=P({},u)}insertNewStyleBlock(e,t,n){const s=this.get2DCursorLocation(t,!0),a=[0];let c,u=0;for(let d=0;d<e.length;d++)e[d]===`
`?(u++,a[u]=0):a[u]++;for(a[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,a[0],n),n=n&&n.slice(a[0]+1)),u&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+a[0],u),c=1;c<u;c++)a[c]>0?this.insertCharStyleObject(s.lineIndex+c,0,a[c],n):n&&this.styles[s.lineIndex+c]&&n[0]&&(this.styles[s.lineIndex+c][0]=n[0]),n=n&&n.slice(a[c]+1);a[c]>0&&this.insertCharStyleObject(s.lineIndex+c,0,a[c],n)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;s>n&&this.removeStyleFromTo(n,s);const a=this.graphemeSplit(e);this.insertNewStyleBlock(a,n,t),this._text=[...this._text.slice(0,n),...a,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=Pe:this._selectionDirection===Ke&&(this._selectionDirection=Pe,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===Ke?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=Ke:this._selectionDirection===Pe&&(this._selectionDirection=Ke,this.selectionStart=t),this.selectionEnd=n)}}class OT extends ET{initHiddenTextarea(){const e=this.canvas&&ln(this.canvas.getElement())||Li(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(c=>{let[u,d]=c;return t.setAttribute(u,d)});const{top:n,left:s,fontSize:a}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(a,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(c=>{let[u,d]=c;return t.addEventListener(u,this[d].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const n=()=>{this.updateFromTextArea(),this.fire(Za),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void n();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,a=this._text.length,c=s.length,u=this.selectionStart,d=this.selectionEnd,f=u!==d;let g,y,v,w,x=c-a;const S=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=u>S.selectionStart;f?(y=this._text.slice(u,d),x+=d-u):c<a&&(y=C?this._text.slice(d+x,d):this._text.slice(u,u-x));const b=s.slice(S.selectionEnd-x,S.selectionEnd);if(y&&y.length&&(b.length&&(g=this.getSelectionStyles(u,u+1,!1),g=b.map(()=>g[0])),f?(v=u,w=d):C?(v=d-y.length,w=d):(v=d,w=d+y.length),this.removeStyleFromTo(v,w)),b.length){const{copyPasteData:k}=Sn();t&&b.join("")===k.copiedText&&!Ce.disableStyleCopyPaste&&(g=k.copiedTextStyle),this.insertNewStyleBlock(b,u,g)}n()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:s}=t;this.compositionStart=n,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Sn();e.copiedText=this.getSelectedText(),Ce.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,s=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],s+=n.left+n.width),s}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),a=s.lineIndex;if(a===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const c=s.charIndex,u=this._getWidthBeforeCursor(a,c),d=this._getIndexOnLine(a+1,u);return this._textLines[a].slice(c).length+d+1+this.missingNewlineOffset(a)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(n),a=s.lineIndex;if(a===0||e.metaKey||e.keyCode===33)return-n;const c=s.charIndex,u=this._getWidthBeforeCursor(a,c),d=this._getIndexOnLine(a-1,u),f=this._textLines[a].slice(0,c),g=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+d-f.length+(1-g)}_getIndexOnLine(e,t){const n=this._textLines[e];let s,a,c=this._getLineLeftOffset(e),u=0;for(let d=0,f=n.length;d<f;d++)if(s=this.__charBounds[e][d].width,c+=s,c>t){a=!0;const g=c-s,y=c,v=Math.abs(g-t);u=Math.abs(y-t)<v?d:d-1;break}return a||(u=n.length-1),u}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Ke);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const s=this.text.length;this.selectionStart=Oi(0,this.selectionStart,s),this.selectionEnd=Oi(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Pe?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let s;if(e.altKey)s=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=n==="Left"?-1:1,!0;s=this["findLineBoundary".concat(n)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Pe,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Ke&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=Pe,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Pe&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ke,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Ke,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Xu=o=>!!o.button;class DT extends OT{constructor(){super(...arguments),O(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new kT(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),dh(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Xu(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Xu(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:n}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const a=this.canvas._activeObject;if(a&&a!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||Xu(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(cn(this.calcTransformMatrix())).add(new F(-this._getLeftOffset(),-this._getTopOffset()));let n=0,s=0,a=0;for(let f=0;f<this._textLines.length&&n<=t.y;f++)n+=this.getHeightOfLine(f),a=f,f>0&&(s+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));let c=Math.abs(this._getLineLeftOffset(a));const u=this._textLines[a].length,d=this.__charBounds[a];for(let f=0;f<u;f++){const g=c+d[f].kernedWidth;if(t.x<=g){Math.abs(t.x-g)<=Math.abs(t.x-c)&&s++;break}c=g,s++}return Math.min(this.flipX?u-s:s,this._text.length)}}const ya="moveCursorUp",va="moveCursorDown",_a="moveCursorLeft",xa="moveCursorRight",wa="exitEditing",PT=P({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:wa,27:wa,33:ya,34:va,35:xa,36:_a,37:_a,38:ya,39:xa,40:va},keysMapRtl:{9:wa,27:wa,33:ya,34:va,35:_a,36:xa,37:xa,38:ya,39:_a,40:va},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class In extends DT{static getDefaults(){return P(P({},super.getDefaults()),In.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,P(P({},In.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof xh&&this.canvas.textEditingManager.remove(this),t instanceof xh&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),s=this._getTopOffset(),a=this._getCursorBoundariesOffsets(e,t);return{left:n,top:s,leftOffset:a.left,topOffset:a.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:s,lineIndex:a}=this.get2DCursorLocation(e);for(let f=0;f<a;f++)t+=this.getHeightOfLine(f);const c=this._getLineLeftOffset(a),u=this.__charBounds[a][s];u&&(n=u.left),this.charSpacing!==0&&s===this._textLines[a].length&&(n-=this._getWidthOfCharSpacing());const d={top:t,left:c+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===Ke||this.textAlign===_n||this.textAlign===Rs?d.left*=-1:this.textAlign===Pe||this.textAlign===cl?d.left=c-(n>0?n:0):this.textAlign!==ye&&this.textAlign!==Ls||(d.left=c-(n>0?n:0))),d}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),s=n.lineIndex,a=n.charIndex>0?n.charIndex-1:0,c=this.getValueOfPropertyAt(s,a,"fontSize"),u=this.getObjectScaling().x*this.canvas.getZoom(),d=this.cursorWidth/u,f=this.getValueOfPropertyAt(s,a,"deltaY"),g=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-c*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,a,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-d/2,top:g+t.top+f,width:d,height:c}}_renderCursor(e,t,n){const{color:s,opacity:a,left:c,top:u,width:d,height:f}=this.getCursorRenderingData(n,t);e.fillStyle=s,e.globalAlpha=a,e.fillRect(c,u,d,f)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const s=t.selectionStart,a=t.selectionEnd,c=this.textAlign.includes(_n),u=this.get2DCursorLocation(s),d=this.get2DCursorLocation(a),f=u.lineIndex,g=d.lineIndex,y=u.charIndex<0?0:u.charIndex,v=d.charIndex<0?0:d.charIndex;for(let w=f;w<=g;w++){const x=this._getLineLeftOffset(w)||0;let S=this.getHeightOfLine(w),C=0,b=0,k=0;if(w===f&&(b=this.__charBounds[f][y].left),w>=f&&w<g)k=c&&!this.isEndOfWrapping(w)?this.width:this.getLineWidth(w)||5;else if(w===g)if(v===0)k=this.__charBounds[g][v].left;else{const X=this._getWidthOfCharSpacing();k=this.__charBounds[g][v-1].left+this.__charBounds[g][v-1].width-X}C=S,(this.lineHeight<1||w===g&&this.lineHeight>1)&&(S/=this.lineHeight);let R=n.left+x+b,N=S,z=0;const G=k-b;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",N=1,z=S):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Ke||this.textAlign===_n||this.textAlign===Rs?R=this.width-R-G:this.textAlign===Pe||this.textAlign===cl?R=n.left+x-k:this.textAlign!==ye&&this.textAlign!==Ls||(R=n.left+x-k)),e.fillRect(R,n.top+n.topOffset+z,G,N),n.topOffset+=C}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,nt)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}O(In,"ownDefaults",PT),O(In,"type","IText"),Z.setClass(In),Z.setClass(In,"i-text");class Ir extends In{static getDefaults(){return P(P({},super.getDefaults()),Ir.ownDefaults)}constructor(e,t){super(e,P(P({},Ir.ownDefaults),t))}static createControls(){return{controls:oC()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(_n)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,s=0;const a={};for(let c=0;c<e.graphemeLines.length;c++)e.graphemeText[s]===`
`&&c>0?(n=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&c>0&&(n++,s++),a[c]={line:t,offset:n},s+=e.graphemeLines[c].length,n+=e.graphemeLines[c].length;return a}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[t];n&&(t=n.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,s=e+1,a=!1;const c=this._styleMap[e],u=this._styleMap[e+1];c&&(e=c.line,n=c.offset),u&&(s=u.line,a=s===e,t=u.offset);const d=e===void 0?this.styles:{line:this.styles[e]};for(const f in d)for(const g in d[f]){const y=parseInt(g,10);if(y>=n&&(!a||y<t))for(const v in d[f][g])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),s=[];for(let a=0;a<n.wordsData.length;a++)s.push(...this._wrapLine(a,t,n));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let s=0;return{wordsData:e.map((a,c)=>{let u=0;const d=t?this.graphemeSplit(a):this.wordSplit(a);return d.length===0?[{word:[],width:0}]:d.map(f=>{const g=t?[f]:this.graphemeSplit(f),y=this._measureWord(g,c,u);return s=Math.max(y,s),u+=g.length+n.length,{word:g,width:y}})}),largestWordWidth:s}}_measureWord(e,t){let n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=0;for(let c=0,u=e.length;c<u;c++)a+=this._getGraphemeBox(e[c],t,c+s,n,!0).kernedWidth,n=e[c];return a}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:s,wordsData:a}=n,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const u=this._getWidthOfCharSpacing(),d=this.splitByGrapheme,f=[],g=d?"":" ";let y=0,v=[],w=0,x=0,S=!0;t-=c;const C=Math.max(t,s,this.dynamicMinWidth),b=a[e];let k;for(w=0,k=0;k<b.length;k++){const{word:R,width:N}=b[k];w+=R.length,y+=x+N-u,y>C&&!S?(f.push(v),v=[],y=N,S=!0):y+=u,S||d||v.push(g),v=v.concat(R),x=d?0:this._measureWord([g],e,w),w++,S=!1}return k&&f.push(v),s+c>this.dynamicMinWidth&&(this.dynamicMinWidth=s-u+c),f}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),s=new Array(n.length);for(let a=0;a<n.length;a++)s[a]=n[a].join("");return t.lines=s,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}O(Ir,"type","Textbox"),O(Ir,"textLayoutProperties",[...In.textLayoutProperties,"width"]),O(Ir,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Z.setClass(Ir);class sm extends Dl{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:s,group:a}=n;if(!s||!this.shouldPerformLayout(e))return;const{width:c,height:u}=Bn(F0(n,s)),d=new F(c,u);if(s.absolutePositioned)return{center:ki(s.getRelativeCenterPoint(),void 0,a?a.calcTransformMatrix():void 0),size:d};{const f=s.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:g=new F,correction:y=new F}=this.calcBoundingBox(t,e)||{};return{center:g.add(f),correction:y.subtract(f),size:d}}return{center:n.getRelativeCenterPoint().add(f),size:d}}}}O(sm,"type","clip-path"),Z.setClass(sm);class om extends Dl{getInitialSize(e,t){let{target:n}=e,{size:s}=t;return new F(n.width||s.x,n.height||s.y)}}O(om,"type","fixed"),Z.setClass(om);class MT extends Ws{subscribeTargets(e){const t=e.target;e.targets.reduce((n,s)=>(s.parent&&n.add(s.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((s,a)=>(a.parent&&s.add(a.parent),s),new Set).forEach(s=>{!n.some(a=>a.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class Nr extends Wr{static getDefaults(){return P(P({},super.getDefaults()),Nr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Nr.ownDefaults),this.setOptions(t);const{left:n,top:s,layoutManager:a}=t;this.groupInit(e,{left:n,top:s,layoutManager:a??new MT})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const a=this._objects.findIndex(u=>u.isInFrontOf(s)),c=a===-1?this.size():a;this.insertAt(c,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(gr("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(s=>{const{parent:a}=s;a&&n.add(a)}),e===Kh?n.forEach(s=>{s._onAfterObjectsChange(ol,t)}):n.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=P(P({hasControls:!1},n),{},{forActiveSelection:!0});for(let a=0;a<this._objects.length;a++)this._objects[a]._renderControls(e,s);super._renderControls(e,t),e.restore()}}O(Nr,"type","ActiveSelection"),O(Nr,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Z.setClass(Nr),Z.setClass(Nr,"activeSelection");class RT{constructor(){O(this,"resources",{})}applyFilters(e,t,n,s,a){const c=a.getContext("2d");if(!c)return;c.drawImage(t,0,0,n,s);const u={sourceWidth:n,sourceHeight:s,imageData:c.getImageData(0,0,n,s),originalEl:t,originalImageData:c.getImageData(0,0,n,s),canvasEl:a,ctx:c,filterBackend:this};e.forEach(f=>{f.applyTo(u)});const{imageData:d}=u;return d.width===n&&d.height===s||(a.width=d.width,a.height=d.height),c.putImageData(d,0,0),u}}class ny{constructor(){let{tileSize:e=Ce.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};O(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),O(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=Cn({width:e,height:t}),s=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)}applyFilters(e,t,n,s,a,c){const u=this.gl,d=a.getContext("2d");if(!u||!d)return;let f;c&&(f=this.getCachedTexture(c,t));const g={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:u,sourceTexture:this.createTexture(u,n,s,f?void 0:t),targetTexture:this.createTexture(u,n,s),originalTexture:f||this.createTexture(u,n,s,f?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},y=u.createFramebuffer();return u.bindFramebuffer(u.FRAMEBUFFER,y),e.forEach(v=>{v&&v.applyTo(g)}),function(v){const w=v.targetCanvas,x=w.width,S=w.height,C=v.destinationWidth,b=v.destinationHeight;x===C&&S===b||(w.width=C,w.height=b)}(g),this.copyGLTo2D(u,g),u.bindTexture(u.TEXTURE_2D,null),u.deleteTexture(g.sourceTexture),u.deleteTexture(g.targetTexture),u.deleteFramebuffer(y),d.setTransform(1,0,0,1,0,0),g}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,s,a){const{NEAREST:c,TEXTURE_2D:u,RGBA:d,UNSIGNED_BYTE:f,CLAMP_TO_EDGE:g,TEXTURE_MAG_FILTER:y,TEXTURE_MIN_FILTER:v,TEXTURE_WRAP_S:w,TEXTURE_WRAP_T:x}=e,S=e.createTexture();return e.bindTexture(u,S),e.texParameteri(u,y,a||c),e.texParameteri(u,v,a||c),e.texParameteri(u,w,g),e.texParameteri(u,x,g),s?e.texImage2D(u,0,d,d,f,s):e.texImage2D(u,0,d,t,n,0,d,f,null),S}getCachedTexture(e,t,n){const{textureCache:s}=this;if(s[e])return s[e];{const a=this.createTexture(this.gl,t.width,t.height,t,n);return a&&(s[e]=a),a}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,s=t.targetCanvas,a=s.getContext("2d");if(!a)return;a.translate(0,s.height),a.scale(1,-1);const c=n.height-s.height;a.drawImage(n,0,c,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),s=t.destinationWidth,a=t.destinationHeight,c=s*a*4;if(!n)return;const u=new Uint8Array(this.imageBuffer,0,c),d=new Uint8ClampedArray(this.imageBuffer,0,c);e.readPixels(0,0,s,a,e.RGBA,e.UNSIGNED_BYTE,u);const f=new ImageData(d,s,a);n.putImageData(f,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const s=e.getParameter(n.UNMASKED_RENDERER_WEBGL),a=e.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),a&&(t.vendor=a.toLowerCase())}return this.gpuInfo=t,t}}let Yu;function LT(){const{WebGLProbe:o}=Sn();return o.queryWebGL(hn()),Ce.enableGLFiltering&&o.isSupported(Ce.textureSize)?new ny({tileSize:Ce.textureSize}):new RT}function $u(){return!Yu&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Yu=LT()),Yu}const jT=["filters","resizeFilter","src","crossOrigin","type"],ry=["cropX","cropY"];class Gt extends gt{static getDefaults(){return P(P({},super.getDefaults()),Gt.ownDefaults)}constructor(e,t){super(),O(this,"_lastScaleX",1),O(this,"_lastScaleY",1),O(this,"_filterScalingX",1),O(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Gt.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(mr()),this.setElement(typeof e=="string"?(this.canvas&&ln(this.canvas.getElement())||Li()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(Gt.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=$u(!1);t instanceof ny&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Sn().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(n=>{n&&t.push(n.toObject())}),P(P({},super.toObject([...ry,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,s=-this.height/2;let a=[],c=[],u="",d="";if(!t)return[];if(this.hasCrop()){const f=mr();a.push('<clipPath id="imageCrop_'+f+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+f+')" '}if(this.imageSmoothing||(d=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(d).concat(u,`></image>
`)),this.stroke||this.strokeDashArray){const f=this.fill;this.fill=null,c=['	<rect x="'.concat(n,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=f}return a=this.paintFirst!==nt?a.concat(c,e):a.concat(e,c),a}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Xa(e,{crossOrigin:t,signal:n}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.x,a=n.y,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&a>t)return this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=a);const u=Cn(c),{width:d,height:f}=c;this._element=u,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=a,$u().applyFilters([e],c,d,f,this._element),this._filterScalingX=u.width/this._originalElement.width,this._filterScalingY=u.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(a=>a&&!a.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const a=Cn({width:n,height:s});this._element=a,this._filteredEl=a}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1);$u().applyFilters(e,this._originalElement,n,s,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,s=this._filterScalingY,a=this.width,c=this.height,u=Math.max(this.cropX,0),d=Math.max(this.cropY,0),f=t.naturalWidth||t.width,g=t.naturalHeight||t.height,y=u*n,v=d*s,w=Math.min(a*n,f-y),x=Math.min(c*s,g-v),S=-a/2,C=-c/2,b=Math.min(a,f/n-u),k=Math.min(c,g/s-d);t&&e.drawImage(t,y,v,w,x,S,C,b,k)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=mS(this.preserveAspectRatio||""),t=this.width,n=this.height,s={width:t,height:n};let a,c=this._element.width,u=this._element.height,d=1,f=1,g=0,y=0,v=0,w=0;return!e||e.alignX===Mt&&e.alignY===Mt?(d=t/c,f=n/u):(e.meetOrSlice==="meet"&&(d=f=BC(this._element,s),a=(t-c*d)/2,e.alignX==="Min"&&(g=-a),e.alignX==="Max"&&(g=a),a=(n-u*f)/2,e.alignY==="Min"&&(y=-a),e.alignY==="Max"&&(y=a)),e.meetOrSlice==="slice"&&(d=f=zC(this._element,s),a=c-t/d,e.alignX==="Mid"&&(v=a/2),e.alignX==="Max"&&(v=a),a=u-n/f,e.alignY==="Mid"&&(w=a/2),e.alignY==="Max"&&(w=a),c=t/d,u=n/f)),{width:c,height:u,scaleX:d,scaleY:f,offsetLeft:g,offsetTop:y,cropX:v,cropY:w}}static fromObject(e,t){let{filters:n,resizeFilter:s,src:a,crossOrigin:c,type:u}=e,d=Be(e,jT);return Promise.all([Xa(a,P(P({},t),{},{crossOrigin:c})),n&&Ns(n,t),s&&Ns([s],t),bl(d,t)]).then(f=>{let[g,y=[],[v]=[],w={}]=f;return new this(g,P(P({},d),{},{src:a,filters:y,resizeFilter:v},w))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return Xa(e,{crossOrigin:t,signal:n}).then(a=>new this(a,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const s=Yn(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(s["xlink:href"],t,s).catch(a=>(gr("log","Unable to parse Image",a),null))}}O(Gt,"type","Image"),O(Gt,"cacheProperties",[...Xn,...ry]),O(Gt,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),O(Gt,"CSS_CANVAS","canvas-img"),O(Gt,"ATTRIBUTE_NAMES",[...vr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),Z.setClass(Gt),Z.setSVGClass(Gt);El(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Ml=o=>o.webgl!==void 0,Qh="precision highp float",AT=`
    `.concat(Qh,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),FT=["type"],IT=["type"],NT=new RegExp(Qh,"g");class rt{get type(){return this.constructor.type}constructor(){let e=Be(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},FT);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return AT}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Sn();s!=="highp"&&(t=t.replace(NT,Qh.replace("highp",s)));const a=e.createShader(e.VERTEX_SHADER),c=e.createShader(e.FRAGMENT_SHADER),u=e.createProgram();if(!a||!c||!u)throw new xn("Vertex, fragment shader or program creation error");if(e.shaderSource(a,n),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new xn("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.shaderSource(c,t),e.compileShader(c),!e.getShaderParameter(c,e.COMPILE_STATUS))throw new xn("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(c)));if(e.attachShader(u,a),e.attachShader(u,c),e.linkProgram(u),!e.getProgramParameter(u,e.LINK_STATUS))throw new xn('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(u)));const d=this.getUniformLocations(e,u)||{};return d.uStepW=e.getUniformLocation(u,"uStepW"),d.uStepH=e.getUniformLocation(u,"uStepH"),{program:u,attributeLocations:this.getAttributeLocations(e,u),uniformLocations:d}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,s={};for(let a=0;a<n.length;a++)s[n[a]]=e.getUniformLocation(t,n[a]);return s}sendAttributeData(e,t,n){const s=t.aPosition,a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){Ml(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,s=Cn({width:t,height:n});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return P({type:this.type},e.reduce((t,n)=>(t[n]=this[n],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Be(e,IT))}}O(rt,"type","BaseFilter"),O(rt,"uniformLocations",[]);const BT={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Sa extends rt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(BT[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const n=new Re(this.color).getSource(),s=this.alpha,a=n[0]*s,c=n[1]*s,u=n[2]*s,d=1-s;for(let f=0;f<t.length;f+=4){const g=t[f],y=t[f+1],v=t[f+2];let w,x,S;switch(this.mode){case"multiply":w=g*a/255,x=y*c/255,S=v*u/255;break;case"screen":w=255-(255-g)*(255-a)/255,x=255-(255-y)*(255-c)/255,S=255-(255-v)*(255-u)/255;break;case"add":w=g+a,x=y+c,S=v+u;break;case"difference":w=Math.abs(g-a),x=Math.abs(y-c),S=Math.abs(v-u);break;case"subtract":w=g-a,x=y-c,S=v-u;break;case"darken":w=Math.min(g,a),x=Math.min(y,c),S=Math.min(v,u);break;case"lighten":w=Math.max(g,a),x=Math.max(y,c),S=Math.max(v,u);break;case"overlay":w=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,x=c<128?2*y*c/255:255-2*(255-y)*(255-c)/255,S=u<128?2*v*u/255:255-2*(255-v)*(255-u)/255;break;case"exclusion":w=a+g-2*a*g/255,x=c+y-2*c*y/255,S=u+v-2*u*v/255;break;case"tint":w=a+g*d,x=c+y*d,S=u+v*d}t[f]=w,t[f+1]=x,t[f+2]=S}}sendUniformData(e,t){const n=new Re(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}O(Sa,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),O(Sa,"type","BlendColor"),O(Sa,"uniformLocations",["uColor"]),Z.setClass(Sa);const zT={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},WT=["type","image"];class Ca extends rt{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return zT[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:s},filterBackend:{resources:a}}=e;const c=this.image;a.blendImage||(a.blendImage=hn());const u=a.blendImage,d=u.getContext("2d");u.width!==n||u.height!==s?(u.width=n,u.height=s):d.clearRect(0,0,n,s),d.setTransform(c.scaleX,0,0,c.scaleY,c.left,c.top),d.drawImage(c.getElement(),0,0,n,s);const f=d.getImageData(0,0,n,s).data;for(let g=0;g<t.length;g+=4){const y=t[g],v=t[g+1],w=t[g+2],x=t[g+3],S=f[g],C=f[g+1],b=f[g+2],k=f[g+3];switch(this.mode){case"multiply":t[g]=y*S/255,t[g+1]=v*C/255,t[g+2]=w*b/255,t[g+3]=x*k/255;break;case"mask":t[g+3]=k}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return P(P({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:s}=e,a=Be(e,WT);return Gt.fromObject(s,t).then(c=>new this(P(P({},a),{},{image:c})))}}O(Ca,"type","BlendImage"),O(Ca,"defaults",{mode:"multiply",alpha:1}),O(Ca,"uniformLocations",["uTransformMatrix","uImage"]),Z.setClass(Ca);class Ta extends rt{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){Ml(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:n,filterBackend:{resources:s}}=e;const{width:a,height:c}=n;s.blurLayer1||(s.blurLayer1=hn(),s.blurLayer2=hn());const u=s.blurLayer1,d=s.blurLayer2;u.width===a&&u.height===c||(d.width=u.width=a,d.height=u.height=c);const f=u.getContext("2d"),g=d.getContext("2d"),y=15,v=.06*this.blur*.5;let w,x,S,C;for(f.putImageData(n,0,0),g.clearRect(0,0,a,c),C=-15;C<=y;C++)w=(Math.random()-.5)/4,x=C/y,S=v*x*a+w,g.globalAlpha=1-Math.abs(x),g.drawImage(u,S,w),f.drawImage(d,0,0),g.globalAlpha=1,g.clearRect(0,0,d.width,d.height);for(C=-15;C<=y;C++)w=(Math.random()-.5)/4,x=C/y,S=v*x*c+w,g.globalAlpha=1-Math.abs(x),g.drawImage(u,w,S),f.drawImage(d,0,0),g.globalAlpha=1,g.clearRect(0,0,d.width,d.height);t.drawImage(u,0,0);const b=t.getImageData(0,0,u.width,u.height);return f.globalAlpha=1,f.clearRect(0,0,u.width,u.height),b}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const n=e*this.blur*.12;return this.horizontal?t[0]=n:t[1]=n,t}}O(Ta,"type","Blur"),O(Ta,"defaults",{blur:0}),O(Ta,"uniformLocations",["uDelta"]),Z.setClass(Ta);class ba extends rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=n,t[s+1]+=n,t[s+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}O(ba,"type","Brightness"),O(ba,"defaults",{brightness:0}),O(ba,"uniformLocations",["uBrightness"]),Z.setClass(ba);const iy={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Ti extends rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,n=this.matrix,s=this.colorsOnly;for(let a=0;a<t.length;a+=4){const c=t[a],u=t[a+1],d=t[a+2];if(t[a]=c*n[0]+u*n[1]+d*n[2]+255*n[4],t[a+1]=c*n[5]+u*n[6]+d*n[7]+255*n[9],t[a+2]=c*n[10]+u*n[11]+d*n[12]+255*n[14],!s){const f=t[a+3];t[a]+=f*n[3],t[a+1]+=f*n[8],t[a+2]+=f*n[13],t[a+3]=c*n[15]+u*n[16]+d*n[17]+f*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],a=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,a)}toObject(){return P(P({},super.toObject()),{},{matrix:[...this.matrix]})}}function $r(o,e){var t;const n=(O(t=class extends Ti{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",o),O(t,"defaults",{colorsOnly:!1,matrix:e}),t);return Z.setClass(n,o),n}O(Ti,"type","ColorMatrix"),O(Ti,"defaults",iy),O(Ti,"uniformLocations",["uColorMatrix","uConstants"]),Z.setClass(Ti);$r("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);$r("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);$r("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);$r("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);$r("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);$r("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);$r("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class am extends rt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Ml(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(n=>Z.getClass(n.type).fromObject(n,t))).then(n=>new this({subFilters:n}))}}O(am,"type","Composed"),Z.setClass(am);class ka extends rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(let a=0;a<t.length;a+=4)t[a]=s*(t[a]-128)+128,t[a+1]=s*(t[a+1]-128)+128,t[a+2]=s*(t[a+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}O(ka,"type","Contrast"),O(ka,"defaults",{contrast:0}),O(ka,"uniformLocations",["uContrast"]),Z.setClass(ka);const UT={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Ea extends rt{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return UT[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,s=this.matrix,a=Math.round(Math.sqrt(s.length)),c=Math.floor(a/2),u=t.width,d=t.height,f=e.ctx.createImageData(u,d),g=f.data,y=this.opaque?1:0;let v,w,x,S,C,b,k,R,N,z,G,X,W;for(G=0;G<d;G++)for(z=0;z<u;z++){for(C=4*(G*u+z),v=0,w=0,x=0,S=0,W=0;W<a;W++)for(X=0;X<a;X++)k=G+W-c,b=z+X-c,k<0||k>=d||b<0||b>=u||(R=4*(k*u+b),N=s[W*a+X],v+=n[R]*N,w+=n[R+1]*N,x+=n[R+2]*N,y||(S+=n[R+3]*N));g[C]=v,g[C+1]=w,g[C+2]=x,g[C+3]=y?n[C+3]:S}e.imageData=f}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return P(P({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}O(Ea,"type","Convolute"),O(Ea,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),O(Ea,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Z.setClass(Ea);const sy="Gamma";class Oa extends rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,s=1/n[0],a=1/n[1],c=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const u=this.rgbValues;for(let d=0;d<256;d++)u.r[d]=255*Math.pow(d/255,s),u.g[d]=255*Math.pow(d/255,a),u.b[d]=255*Math.pow(d/255,c);for(let d=0;d<t.length;d+=4)t[d]=u.r[t[d]],t[d+1]=u.g[t[d+1]],t[d+2]=u.b[t[d+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:sy,gamma:this.gamma.concat()}}}O(Oa,"type",sy),O(Oa,"defaults",{gamma:[1,1,1]}),O(Oa,"uniformLocations",["uGamma"]),Z.setClass(Oa);const VT={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Da extends rt{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2];switch(this.mode){case"average":n=(a+c+u)/3;break;case"lightness":n=(Math.min(a,c,u)+Math.max(a,c,u))/2;break;case"luminosity":n=.21*a+.72*c+.07*u}t[s+2]=t[s+1]=t[s]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return VT[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}O(Da,"type","Grayscale"),O(Da,"defaults",{mode:"average"}),O(Da,"uniformLocations",["uMode"]),Z.setClass(Da);const HT=P(P({},iy),{},{rotation:0});class Gu extends Ti{calculateMatrix(){const e=this.rotation*Math.PI,t=Un(e),n=Vn(e),s=1/3,a=Math.sqrt(s)*n,c=1-t;this.matrix=[t+c/3,s*c-a,s*c+a,0,0,s*c+a,t+s*c,s*c-a,0,0,s*c-a,s*c+a,t+s*c,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}O(Gu,"type","HueRotation"),O(Gu,"defaults",HT),Z.setClass(Gu);class Pa extends rt{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}O(Pa,"type","Invert"),O(Pa,"defaults",{alpha:!1,invert:!0}),O(Pa,"uniformLocations",["uInvert","uAlpha"]),Z.setClass(Pa);class Ma extends rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let s=0;s<t.length;s+=4){const a=(.5-Math.random())*n;t[s]+=a,t[s+1]+=a,t[s+2]+=a}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}O(Ma,"type","Noise"),O(Ma,"defaults",{noise:0}),O(Ma,"uniformLocations",["uNoise","uSeed"]),Z.setClass(Ma);class Ra extends rt{applyTo2d(e){let{imageData:{data:t,width:n,height:s}}=e;for(let a=0;a<s;a+=this.blocksize)for(let c=0;c<n;c+=this.blocksize){const u=4*a*n+4*c,d=t[u],f=t[u+1],g=t[u+2],y=t[u+3];for(let v=a;v<Math.min(a+this.blocksize,s);v++)for(let w=c;w<Math.min(c+this.blocksize,n);w++){const x=4*v*n+4*w;t[x]=d,t[x+1]=f,t[x+2]=g,t[x+3]=y}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}O(Ra,"type","Pixelate"),O(Ra,"defaults",{blocksize:4}),O(Ra,"uniformLocations",["uBlocksize"]),Z.setClass(Ra);class La extends rt{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,s=new Re(this.color).getSource(),a=[s[0]-n,s[1]-n,s[2]-n],c=[s[0]+n,s[1]+n,s[2]+n];for(let u=0;u<t.length;u+=4){const d=t[u],f=t[u+1],g=t[u+2];d>a[0]&&f>a[1]&&g>a[2]&&d<c[0]&&f<c[1]&&g<c[2]&&(t[u+3]=0)}}sendUniformData(e,t){const n=new Re(this.color).getSource(),s=this.distance,a=[0+n[0]/255-s,0+n[1]/255-s,0+n[2]/255-s,1],c=[n[0]/255+s,n[1]/255+s,n[2]/255+s,1];e.uniform4fv(t.uLow,a),e.uniform4fv(t.uHigh,c)}}O(La,"type","RemoveColor"),O(La,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),O(La,"uniformLocations",["uLow","uHigh"]),Z.setClass(La);class ja extends rt{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),s=new Array(n);for(let a=1;a<=n;a++)s[a-1]=e(a*t);return s}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((n,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Ml(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,s=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/s;const a=t.width,c=t.height,u=Math.round(a*n),d=Math.round(c*s);let f;f=this.resizeType==="sliceHack"?this.sliceByTwo(e,a,c,u,d):this.resizeType==="hermite"?this.hermiteFastResize(e,a,c,u,d):this.resizeType==="bilinear"?this.bilinearFiltering(e,a,c,u,d):this.resizeType==="lanczos"?this.lanczosResize(e,a,c,u,d):new ImageData(u,d),e.imageData=f}sliceByTwo(e,t,n,s,a){const c=e.imageData,u=.5;let d=!1,f=!1,g=t*u,y=n*u;const v=e.filterBackend.resources;let w=0,x=0;const S=t;let C=0;v.sliceByTwo||(v.sliceByTwo=hn());const b=v.sliceByTwo;(b.width<1.5*t||b.height<n)&&(b.width=1.5*t,b.height=n);const k=b.getContext("2d");for(k.clearRect(0,0,1.5*t,n),k.putImageData(c,0,0),s=Math.floor(s),a=Math.floor(a);!d||!f;)t=g,n=y,s<Math.floor(g*u)?g=Math.floor(g*u):(g=s,d=!0),a<Math.floor(y*u)?y=Math.floor(y*u):(y=a,f=!0),k.drawImage(b,w,x,t,n,S,C,g,y),w=S,x=C,C+=y;return k.getImageData(w,x,s,a)}lanczosResize(e,t,n,s,a){const c=e.imageData.data,u=e.ctx.createImageData(s,a),d=u.data,f=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,y=this.rcpScaleY,v=2/this.rcpScaleX,w=2/this.rcpScaleY,x=Math.ceil(g*this.lanczosLobes/2),S=Math.ceil(y*this.lanczosLobes/2),C={},b={x:0,y:0},k={x:0,y:0};return function R(N){let z,G,X,W,te,oe,pe,ge,ce,we,je;for(b.x=(N+.5)*g,k.x=Math.floor(b.x),z=0;z<a;z++){for(b.y=(z+.5)*y,k.y=Math.floor(b.y),te=0,oe=0,pe=0,ge=0,ce=0,G=k.x-x;G<=k.x+x;G++)if(!(G<0||G>=t)){we=Math.floor(1e3*Math.abs(G-b.x)),C[we]||(C[we]={});for(let Te=k.y-S;Te<=k.y+S;Te++)Te<0||Te>=n||(je=Math.floor(1e3*Math.abs(Te-b.y)),C[we][je]||(C[we][je]=f(Math.sqrt(Math.pow(we*v,2)+Math.pow(je*w,2))/1e3)),X=C[we][je],X>0&&(W=4*(Te*t+G),te+=X,oe+=X*c[W],pe+=X*c[W+1],ge+=X*c[W+2],ce+=X*c[W+3]))}W=4*(z*s+N),d[W]=oe/te,d[W+1]=pe/te,d[W+2]=ge/te,d[W+3]=ce/te}return++N<s?R(N):u}(0)}bilinearFiltering(e,t,n,s,a){let c,u,d,f,g,y,v,w,x,S,C,b,k,R=0;const N=this.rcpScaleX,z=this.rcpScaleY,G=4*(t-1),X=e.imageData.data,W=e.ctx.createImageData(s,a),te=W.data;for(v=0;v<a;v++)for(w=0;w<s;w++)for(g=Math.floor(N*w),y=Math.floor(z*v),x=N*w-g,S=z*v-y,k=4*(y*t+g),C=0;C<4;C++)c=X[k+C],u=X[k+4+C],d=X[k+G+C],f=X[k+G+4+C],b=c*(1-x)*(1-S)+u*x*(1-S)+d*S*(1-x)+f*x*S,te[R++]=b;return W}hermiteFastResize(e,t,n,s,a){const c=this.rcpScaleX,u=this.rcpScaleY,d=Math.ceil(c/2),f=Math.ceil(u/2),g=e.imageData.data,y=e.ctx.createImageData(s,a),v=y.data;for(let w=0;w<a;w++)for(let x=0;x<s;x++){const S=4*(x+w*s);let C=0,b=0,k=0,R=0,N=0,z=0,G=0;const X=(w+.5)*u;for(let W=Math.floor(w*u);W<(w+1)*u;W++){const te=Math.abs(X-(W+.5))/f,oe=(x+.5)*c,pe=te*te;for(let ge=Math.floor(x*c);ge<(x+1)*c;ge++){let ce=Math.abs(oe-(ge+.5))/d;const we=Math.sqrt(pe+ce*ce);we>1&&we<-1||(C=2*we*we*we-3*we*we+1,C>0&&(ce=4*(ge+W*t),G+=C*g[ce+3],k+=C,g[ce+3]<255&&(C=C*g[ce+3]/250),R+=C*g[ce],N+=C*g[ce+1],z+=C*g[ce+2],b+=C))}}v[S]=R/b,v[S+1]=N/b,v[S+2]=z/b,v[S+3]=G/k}return y}}O(ja,"type","Resize"),O(ja,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),O(ja,"uniformLocations",["uDelta","uTaps"]),Z.setClass(ja);class Aa extends rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2],d=Math.max(a,c,u);t[s]+=d!==a?(d-a)*n:0,t[s+1]+=d!==c?(d-c)*n:0,t[s+2]+=d!==u?(d-u)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}O(Aa,"type","Saturation"),O(Aa,"defaults",{saturation:0}),O(Aa,"uniformLocations",["uSaturation"]),Z.setClass(Aa);class Fa extends rt{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let s=0;s<t.length;s+=4){const a=t[s],c=t[s+1],u=t[s+2],d=Math.max(a,c,u),f=(a+c+u)/3,g=2*Math.abs(d-f)/255*n;t[s]+=d!==a?(d-a)*g:0,t[s+1]+=d!==c?(d-c)*g:0,t[s+2]+=d!==u?(d-u)*g:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}O(Fa,"type","Vibrance"),O(Fa,"defaults",{vibrance:0}),O(Fa,"uniformLocations",["uVibrance"]),Z.setClass(Fa);const XT=()=>{const o=I.useRef(null),e=I.useRef(null);return I.useEffect(()=>{if(!e.current){e.current=new xh(o.current,{width:800,height:600,backgroundColor:"lightgray"});const t=new Bt({left:100,top:100,fill:"blue",width:200,height:150,hasControls:!0,lockRotation:!0}),n=new Bt({left:150,top:150,fill:"green",width:150,height:100,hasControls:!0,lockRotation:!0}),s=new Bt({left:200,top:200,fill:"red",width:100,height:75,hasControls:!0,lockRotation:!0});t.set({scaleX:1,scaleY:1}),n.set({scaleX:.8,scaleY:.8,left:200,top:200}),s.set({scaleX:.6,scaleY:.6,left:300,top:300}),e.current.add(t,n,s)}return()=>{e.current&&(e.current.dispose(),e.current=null)}},[]),K.jsx("canvas",{ref:o})};function YT(){const[o,e]=I.useState([]),[t,n]=I.useState(null);I.useEffect(()=>{(async()=>{try{const d=await He.get("https://thumsbtack-12.onrender.com/api/v1/getTasks");e(d.data)}catch(d){console.error("Error fetching tasks:",d.message)}})()},[]);const s=async u=>{var d,f,g,y;try{const v=new Date().toISOString().split("T")[0];if(u.dueDate<v){toast.error("Due date cannot be in the past");return}const w=await He.post("https://thumsbtack-12.onrender.com/api/v1/createTask",u);e(x=>[...x,w.data]),toast.success("Task created successfully!")}catch(v){console.error("Error adding task:",((f=(d=v.response)==null?void 0:d.data)==null?void 0:f.message)||v.message),toast.error(((y=(g=v.response)==null?void 0:g.data)==null?void 0:y.message)||"Something went wrong")}},a=async u=>{var d,f;try{const g=await He.put(`https://thumsbtack-12.onrender.com/api/v1/updateTask/${u._id}`,u);e(y=>y.map(v=>v._id===u._id?g.data:v)),n(null)}catch(g){console.error("Error editing task:",((f=(d=g.response)==null?void 0:d.data)==null?void 0:f.message)||g.message)}},c=async u=>{var d,f;try{console.log("idid",u),await He.delete(`https://thumsbtack-12.onrender.com/api/v1/deleteTask/${u}`),e(g=>g.filter(y=>y._id!==u))}catch(g){console.error("Error deleting task:",((f=(d=g.response)==null?void 0:d.data)==null?void 0:f.message)||g.message)}};return K.jsxs(K.Fragment,{children:[K.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[K.jsx(Ex,{onSubmit:t?a:s,initialTask:t}),K.jsx(Ox,{tasks:o,onEdit:u=>n(u),onDelete:c})]}),K.jsx(r0,{}),K.jsx(XT,{})]})}function $T(){return K.jsx("div",{className:"flex min-h-screen w-screen flex-col font-roboto",children:K.jsxs(t_,{children:[K.jsx(Ku,{path:"/",element:K.jsx(YT,{})}),K.jsx(Ku,{path:"/floor",element:K.jsx(r0,{})})]})})}u1.createRoot(document.getElementById("root")).render(K.jsx(I.StrictMode,{children:K.jsx(b_,{children:K.jsx($T,{})})}));
